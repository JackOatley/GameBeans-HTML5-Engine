!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GameBeans",[],t):"object"==typeof exports?exports.GameBeans=t():e.GameBeans=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=o(i),s=n(1),l=o(s),u={color:"#FFFFFF",font:"Arial",fontSize:30,textAlign:"start",textBaseline:"alphabetic",target:null,context:null,defaultTransform:[1,0,0,1,0,0],targetStack:[],imageSmoothing:!1,offsetX:0,offsetY:0,setTarget:function(e){u.targetStack.push(u.target),u.target=e,u.context=e.getContext("2d")},resetTarget:function(){var e=u.targetStack.pop();u.target=e,u.context=e.getContext("2d")},getTarget:function(){return u.target},save:function(){u.context.save()},restore:function(){u.context.restore()},reset:function(){var e;u.context.imageSmoothingEnabled=u.imageSmoothing,(e=u.context).setTransform.apply(e,r(u.defaultTransform)),u.context.globalAlpha=1},setImageSmoothing:function(e){u.imageSmoothing=e},transform:{scale:function(e,t){u.context.scale(e,t)},rotate:function(e){u.context.rotate(e*a.default.DEGTORAD)},translate:function(e,t){u.offsetX=e,u.offsetY=t,u.context.translate(e,t)},setDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u.defaultTransform;e.scaleX&&(t[0]=e.scaleX),e.skewX&&(t[1]=e.skewX),e.skewY&&(t[2]=e.skewY),e.scaleY&&(t[3]=e.scaleY),e.moveX&&(t[4]=e.moveX),e.moveY&&(t[5]=e.moveY)}},setColor:function(e){"string"==typeof e?u.color=e:"r"in e&&"g"in e&&"b"in e?u.color="a"in e?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")":"h"in e&&"s"in e&&"l"in e&&(u.color="a"in e?"hsla("+e.h+","+e.s+"%,"+e.l+"%,"+e.a+")":"hsl("+e.h+","+e.s+"%,"+e.l+"%)")},sprite:function(e,t,n,o,r,i,s){e=l.default.get(e);var c=u.context;c.save(),c.translate(n,o),c.rotate(s*a.default.DEGTORAD),c.scale(r,i),t=Math.floor(t)%e.images.length;var d=e.images[t],f=d.img;c.drawImage(f,d.clip.x,d.clip.y,d.clip.w,d.clip.h,-e.originX,-e.originY,e.width,e.height),c.restore()},spriteTiled:function(e,t,n,o,r,i){e=l.default.get(e);var a=void 0,s=void 0,u=void 0,c=void 0;for(u=0,a=n;u<r;u++,a+=e.width)for(c=0,s=o;c<i;c++,s+=e.height)drawSprite(e,t,a,s,1,1,0)},canvas:function(e,t,n){u.context.drawImage(e,t,n)},setFont:function(e,t,n,o){u.font=e,u.fontSize=t,u.textAlign=n,u.textBaseline=o;var r=u.context;r.font=u.fontSize+"px "+u.font,r.textAlign=u.textAlign,r.textBaseline=u.textBaseline},text:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r="fillText",i=u.context;o.stroke?(i.strokeStyle=o.strokeColor||u.color,i.lineWidth=o.lineWidth||2,r="strokeText"):i.fillStyle=u.color;var a=void 0,s=t,l=0,c=e.toString().length;o.pattern&&(l=o.pattern.start,c=o.pattern.end);for(var d=1.2*i.measureText("M").width,f=e.toString().split("#"),h=0;h<f.length;h++){if(o.maxWidth){for(var p=f[h].split(" "),v="",g=0;g<p.length;g++){var y=v+p[g]+" ";if(i.measureText(y).width>o.maxWidth&&g>0){var m=v.slice(0,l),_=v.slice(l,c);s+=i.measureText(m).width,0<c&&i[r](_,s,n),a=y.length,l-=a,c-=a,v=p[g]+" ",n+=d,s=t}else v=y}var b=v.slice(0,l),x=v.slice(l,c);s+=i.measureText(b).width,0<c&&i[r](x,s,n),a=v.length}else{var w=f[h].slice(0,l),S=f[h].slice(l,c);s+=i.measureText(w).width,i[r](S,s,n),a=f[h].length}s=t,n+=d,l-=a,c-=a}},primitive:{textureMap:function(e,t){for(var n=u.context,o=l.default.get(e),r=o.images[0],i=r.img,a=o.width,s=o.height,c=[[0,1,2],[2,3,0]],d=0;d<2;d++){var f=c[d],h=t[f[0]].x,p=t[f[1]].x,v=t[f[2]].x,g=t[f[0]].y,y=t[f[1]].y,m=t[f[2]].y,_=t[f[0]].u*a,b=t[f[1]].u*a,x=t[f[2]].u*a,w=t[f[0]].v*s,S=t[f[1]].v*s,M=t[f[2]].v*s;n.save(),n.beginPath(),n.moveTo(h,g),n.lineTo(p,y),n.lineTo(v,m),n.closePath(),n.clip();var D=_*S+w*x+b*M-S*x-w*b-_*M,A=h*S+w*v+p*M-S*v-w*p-h*M,E=_*p+h*x+b*v-p*x-h*b-_*v,O=_*S*v+w*p*x+h*b*M-h*S*x-w*b*v-_*p*M,k=g*S+w*m+y*M-S*m-w*y-g*M,T=_*y+g*x+b*m-y*x-g*b-_*m,j=_*S*m+w*y*x+g*b*M-g*S*x-w*b*m-_*y*M;n.transform(A/D,k/D,E/D,T/D,O/D,j/D),n.drawImage(i,0,0),n.restore()}}},shape:{line:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=u.context;i.strokeStyle=r.color||u.color,i.beginPath(),i.moveTo(e,t),i.lineTo(n,o),i.stroke()},ellipse:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=u.context;i.save(),i.beginPath(),i.translate(e-n,t-o),i.scale(n,o),i.arc(1,1,1,0,2*Math.PI,!1),i.restore();var a=void 0;if(r.healthbar){var s=r.healthbar.amount||1,l=r.healthbar.color||"#0F0",c=r.healthbar.background||"#F00";a=i.createLinearGradient(e-n,0,e+n,0),a.addColorStop(0,l),a.addColorStop(s,l),a.addColorStop(s,c),a.addColorStop(1,c)}else a=r.color||u.color;r.fill||r.stroke||(r.fill=!0),r.fill&&(i.fillStyle=a,i.fill()),r.stroke&&(i.strokeStyle=a,i.lineWidth=r.lineWidth||1,i.stroke())},rectangle:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=u.context;i.beginPath(),i.rect(e,t,n,o);var a=void 0;if(r.healthbar){var s=r.healthbar.amount||1,l=r.healthbar.color||"#0F0",c=r.healthbar.background||"#F00";a=i.createLinearGradient(e,0,e+n,0),a.addColorStop(0,l),a.addColorStop(s,l),a.addColorStop(s,c),a.addColorStop(1,c)}else a=r.color||u.color;opts.fill||opts.stroke||(opts.fill=!0),r.fill&&(i.fillStyle=a,i.fill()),opts.stroke&&(i.strokeStyle=a,i.lineWidth=r.lineWidth||1,i.stroke())}}};t.default=u},function(e,t,n){"use strict";function o(){return"Sprite_"+u}function r(e,t){for(var n=e.length,o=t.r/255,r=t.g/255,i=t.b/255,a=0;a<n;a+=4)e[a]=o*e[a]>>0,e[a+1]=r*e[a+1]>>0,e[a+2]=i*e[a+2]>>0}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(10),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=[],u=0,c={array:l,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;e.atlas&&(t=e.atlasIndex||0,e.atlas.images[t]);var n={assetType:"sprite",name:e.name||o(),originX:e.originX||0,originY:e.originY||0,width:0,height:0,images:[]};return e.frames&&e.frames.forEach(function(e){c.addFrame(n,{source:e.src})}),l[u++]=n,n},addFrame:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=c.get(e);var n=void 0;t.atlas&&(n=c.get(t.atlas).images[0].img);var o={img:n||new Image,clip:null,ready:!1};t.source&&(o.img.onload=function(){o.clip={x:0,y:0,w:o.img.width,h:o.img.height},e.width*e.height==0&&(e.width=o.clip.w,e.height=o.clip.h),o.ready=!0},o.img.src=t.source||""),n&&t.clip&&(o.clip=t.clip,console.log(o.clip),e.width*e.height==0&&(e.width=o.clip.w,e.height=o.clip.h),o.ready=!0),e.images.push(o)},cache:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=c.get(e),e.images.forEach(function(e){var n=document.createElement("CANVAS");n.width=t.width||e.img.width,n.height=t.height||e.img.height,n.getContext("2d").drawImage(e.img,0,0,n.width+1,n.height+1),e.clip.x=0,e.clip.y=0,e.clip.w=n.width,e.clip.h=n.height,e.img=n})},setOrigin:function(e,t,n){e=c.get(e),e.originX=Number(t),e.originY=Number(n)},readyAll:function(){for(var e=0;e<u;e++)for(var t=l[e],n=0;n<t.images.length;n++){var o=t.images[n];if(!o.ready)return!1}return!0},tint:function(e,t){"object"!==(void 0===e?"undefined":i(e))&&(e=c.get(e)),e.images.forEach(function(n){var o=document.createElement("CANVAS"),a=o.getContext("2d");o.width=e.width,o.height=e.height,a.drawImage(n.img,0,0);var l=a.getImageData(0,0,o.width,o.height);r(l.data,"object"===(void 0===t?"undefined":i(t))?t:s.default.hexToRgb(t)),a.putImageData(l,0,0),n.img.src=o.toDataURL("image/png")})},get:function(e){if("object"===(void 0===e?"undefined":i(e)))return e;for(var t=0;t<u;t++)if(l[t].name===e)return l[t];return null}};t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(4),s=o(a),l=n(7),u=o(l),c=n(12),d=o(c),f=n(1),h=o(f),p=n(0),v=o(p),g=n(22),y=o(g);window.global={};var m=[],_=[],b={instanceArray:m,instanceHardLimit:1e3,create:function(e,t,n){var o=d.default.get(e);if(null===o)return window.addConsoleText("#F00","No such object as "+e),window._GB_stop(),null;var r=o.pool.get();r.object=o,r.objectName=o.objectName,r.assetType="instance",r.x=Number(t),r.y=Number(n),r.boxCollision=i({},r.boxCollision);var a=h.default.get(r.sprite);return a&&(r.boxCollision.x=a.originX,r.boxCollision.y=a.originY,r.boxCollision.width=a.width,r.boxCollision.height=a.height),b.addToArray(r),b.updateBoundingBox(r),b.updateCollisionBox(r),b.executeEvent(r,"create"),r},addToArray:function(e){for(var t=0;t<m.length;t++)if(e.depth<=m[t].depth)return void m.splice(t,0,e);m.push(e)},createMoving:function(e,t,n,o,r){if(m.length>=b.instanceHardLimit)return void console.warn("instance number hard limit reached:",b.instanceHardLimit);var i=b.create(e,t,n);return i.speed=o,i.direction=r,i},find:function(e,t){var n=void 0,o=0;for(n=0;n<m.length;n++){var r=b.instanceArray[n];if(r.objectName===e&&o++===t)return r}return null},findRandom:function(e){var t=void 0,n=0,o=s.default.randomInt(0,count(e)-1);for(t=0;t<b.instanceArray.length;t++){var r=b.instanceArray[t];if(r.objectName===e&&n++===o)return r}return null},count:function(e){var t=0;return b.instanceArray.forEach(function(n){t+=n.objectName===e}),t},setRotation:function(e,t){this.rotation=t?this.rotation+e:e},setDirection:function(e,t){this.direction=t?this.direction+e:e},mouseOn:function(e){return!(e.boxTop>u.default.mouse.y/2-v.default.offsetY||e.boxBottom<u.default.mouse.y/2-v.default.offsetY||e.boxLeft>u.default.mouse.x/2-v.default.offsetX||e.boxRight<u.default.mouse.x/2-v.default.offsetX)},step:function(e,t){b.executeEvent(e,"step"),b.updateAnimation(e,t),b.updatePosition(e,t),b.updateBoundingBox(e),b.updateCollisionBox(e),b.instanceExecuteListeners(e),u.default.triggerEvents.forEach(function(t){b.executeEvent(e,t)})},updateAnimation:function(e,t){e.index+=e.imageSpeed;var n=h.default.get(e.sprite);if(n){var o=n.images.length;if(e.index>=o){var i=e.animationBehavior,a=void 0===i?"undefined":r(i);"string"===a?"loop"===i?e.index-=o:"stop"===i&&(e.index=o-1,e.imageSpeed=0):"function"===a&&i.call(e)}}},updatePosition:function(e,t){var n={x:s.default.lengthDirX(e.terminal,e.gravityDirection),y:s.default.lengthDirY(e.terminal,e.gravityDirection)};(n.x>0&&e.speedX<=n.x||n.x<0&&e.speedX>=n.x)&&(e.speedX+=s.default.lengthDirX(e.gravity,e.gravityDirection)),(n.y>0&&e.speedY<=n.y||n.y<0&&e.speedY>=n.y)&&(e.speedY+=s.default.lengthDirY(e.gravity,e.gravityDirection)),e.x+=e.speedX*t,e.y+=e.speedY*t},updateBoundingBox:function(e){var t=h.default.get(e.sprite);null!==t&&(e.boxTop=e.y-t.originY*e.scaleY,e.boxLeft=e.x-t.originX*e.scaleX,e.boxBottom=e.boxTop+t.height*e.scaleY,e.boxRight=e.boxLeft+t.width*e.scaleX)},updateCollisionBox:function(e){var t=e.boxCollision;t.top=e.y-t.y*e.scaleY,t.left=e.x-t.x*e.scaleX,t.bottom=t.top+t.height*e.scaleY,t.right=t.left+t.width*e.scaleX},destroy:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.exists=!1},draw:function(e){void 0!==e.events.draw?b.executeEvent(e,"draw"):b.drawSelf(e)},drawSelf:function(e){null!==e.sprite&&v.default.sprite(e.sprite,e.index,e.x,e.y,e.scaleX,e.scaleY,e.rotation)},drawDebug:function(e){var t=e.boxCollision;v.default.shape.rectangle(t.left,t.top,t.right-t.left,t.bottom-t.top,{color:"#FF000055"})},changeSprite:function(e){this.sprite=e},instanceExecuteListeners:function(e){e.listeners.forEach(function(t){switch(t.type){case"collision":b.instanceCollisionInstance(e,t.target)}})},instanceCollisionInstance:function(e,t){var n=d.default.getAllInstances(t),o=e.boxCollision;n.forEach(function(n){if(e!==n){var r=n.boxCollision;o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top||b.executeEvent(e,"collision_"+t,n)}})},executeEvent:function(e,t,n){_.push(window.other),window.other=n;try{if(e.exists){var o=e.events[t];o&&b.executeActions(e,o,n)}}catch(n){console.error(n),window.addConsoleText("#F00","Failed to execute event ["+t+"] of object ["+e.objectName+"] with error: "+n)}window.other=_.pop()},executeEventAll:function(e,t){for(var n=0;n<m.length;n++)b.executeEvent(m[n],e,t)},executeActions:function(e,t,n){var o=!0,r=[],i=0,a=void 0,s=void 0;for(a=0;a<t.length;a++){switch(s=t[a],s.flow){case"":if(o){var l=s.action,u=s.args,c=void 0,d=[];for(c=0;c<u.length;c++)switch(u[c]){case"self":d[c]=e;break;case"other":d[c]=n;break;default:d[c]=y.default.actionExpression.call(e,u[c])}o=l.apply(e,d),void 0===o?o=!0:r[i]=0}break;case"blockBegin":i++;break;case"blockEnd":i--;break;case"exitEvent":if(o)return!1}1==r[i]++&&(o=!0)}},stepAll:function(e){m.forEach(function(t){b.step(t,e)})},drawAll:function(){m.forEach(function(e){e.visible&&b.draw(e)})},clearDestroyed:function(){for(var e=m.length-1;e>=0;e--){var t=m[e];t.exists||(t.exists=!0,t.speedX=0,t.speedY=0,t.object.pool.release(t),m.splice(e,1))}}};t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o),i={array:[],main:null,dom:null,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.createElement("CANVAS");if(i.array.push(t),t.width=e.width||300,t.height=e.height||150,t.scale=e.scale||1,t.application=e.application||!1,e.crisp2D){t.getContext("2d").imageSmoothingEnabled=!1}return t.application&&(r.default.setTarget(t),i.setMain(t)),t.oncontextmenu=function(e){e.preventDefault()},t},setMain:function(e){if(i.main=e,null===i.dom){i.dom=e;(document.getElementById("gbgamebox")||document.body).appendChild(e)}},getMain:function(){return i.main},clear:function(e,t){var n=e.getContext("2d");n.fillStyle=t||"#000000",n.fillRect(0,0,e.width/e.scale,e.height/e.scale)}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={PI:Math.PI,RADTODEG:180/Math.PI,DEGTORAD:Math.PI/180,cos:Math.cos,sin:Math.sin,sign:Math.sign,randomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},choose:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},lengthDirX:function(e,t){return Math.cos(t*o.DEGTORAD)*e},lengthDirY:function(e,t){return Math.sin(t*o.DEGTORAD)*e},pointDistance:function(e,t,n,o){var r=e-n,i=t-o;return Math.sqrt(r*r+i*i)},pointDirection:function(e,t,n,r){return(Math.atan2(r-t,n-e)*o.RADTODEG+360)%360},angleDifference:function(e,t){var n=(t-e)%360;return n<=-180?n+=360:n>180&&(n-=360),n}};t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(6),a=o(i),s=n(2),l=o(s),u=n(1),c=o(u),d=n(0),f=o(d),h={array:[],current:null,create:function(e,t,n){var o={name:e,assetType:"room",width:Number(t),height:Number(n),background:null,backgroundMethod:"no-repeat",instances:[]};return null===h.current&&(h.current=o),h.array.push(o),o},setBackground:function(e,t){e=h.get(e),e.background=t},addInstance:function(e,t,n,o){e=h.get(e),e.instances.push({name:t,x:n,y:o})},enter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.transition)return void new a.default({prefab:t.transition,callback:h.enter.bind(null,e)});l.default.executeEventAll("roomleave"),l.default.instanceArray.forEach(function(e){l.default.destroy(e,!1)}),e=h.get(e),h.current=e,e.instances.forEach(function(e){l.default.create(e.name,e.x,e.y)}),l.default.executeEventAll("roomenter")},draw:function(e){e=h.get(e);var t=c.default.get(e.background);if(null!==t){var n=f.default.getTarget(),o=n.getContext("2d"),r=t.images[0].img;if("stretch"===e.backgroundMethod)o.drawImage(r,0,0,n.width,n.height);else{var i=o.createPattern(r,e.backgroundMethod);o.fillStyle=i,o.fillRect(0,0,n.width,n.height)}}},get:function(e){if("object"===(void 0===e?"undefined":r(e)))return e;for(var t=0;t<h.array.length;t++)if(h.array[t].name===e)return h.array[t];return null}};t.default=h},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.type=t.type||"fade",this.time=t.time||60,this.color=t.color||"#000000",this.callback=t.callback||s,t.prefab&&r(this,t.prefab),this.direction=1,this.alpha=0,this.delta=1/this.time,e.allInstances.push(this),e.prefabs.hasOwnProperty(this.type)||(window.addConsoleText("#F00","Unknown transition type: "+this.type),this.type="fade")}return e.prototype.update=function(){e.prefabs.hasOwnProperty(this.type)&&e.prefabs[this.type].update.call(this)},e.prototype.draw=function(){e.prefabs.hasOwnProperty(this.type)&&e.prefabs[this.type].draw.call(this)},e.prototype.destroy=function(){var t=e.allInstances.indexOf(this);e.allInstances.splice(t,1)},e.create=function(t){return new e(t)},e.updateAll=function(){e.allInstances.forEach(function(e){e.update()})},e.drawAll=function(){e.allInstances.forEach(function(e){e.draw()})},e}();t.default=l,l.allInstances=[],l.prefabs={fade:{update:function(){this.alpha+=this.direction?this.delta:-this.delta,this.alpha>=1?(this.callback(),this.direction=0):this.alpha<=0&&(this.destroy(),console.log("destroy"))},draw:function(){var e=a.default.getTarget(),t=e.getContext("2d");t.globalAlpha=this.alpha,t.fillStyle=this.color,t.fillRect(0,0,9999999,9999999)}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=o(r),a=n(11),s=o(a),l=document,u={pressed:[!1,!1,!1],down:[!1,!1,!1],released:[!1,!1,!1],wheelUp:!1,wheelDown:!1,x:0,y:0},c={pressed:{},down:{},released:{}},d={start:[],held:[],move:[],end:[],cancel:[],x:[],y:[]},f=[],h={triggerEvents:f,mouse:u,keyboard:c,touch:d,init:function(){h.initMouse(),h.initKeyboard(),h.initTouch(),l.oncontextmenu=function(e){e.preventDefault()}},initMouse:function(){var e=function(e){e.preventDefault(),!u.pressed[e.button]&&window.focus(),u.pressed[e.button]=!0,u.down[e.button]=!0},t=function(e){e.preventDefault(),u.pressed[e.button]=!1,u.released[e.button]=!0,u.down[e.button]=!1},n=function(e){var t=i.default.main,n=t.getBoundingClientRect();u.x=e.clientX-n.left,u.y=e.clientY-n.top},o=function(e){e.preventDefault();var t=Math.max(-1,Math.min(1,e.wheelDelta));u.wheelUp=t>0,u.wheelDown=t<0};l.onmousedown=e,l.onmouseup=t,l.onmousemove=n,l.onmousewheel=o},initKeyboard:function(){s.default.forEach(function(e){c.pressed[e]=!1,c.down[e]=!1,c.released[e]=!1});var e=function(e){e.preventDefault(),c.down[e.code]||(c.pressed[e.code]=!0,c.down[e.code]=!0)},t=function(e){e.preventDefault(),c.released[e.code]=!0,c.down[e.code]=!1};l.onkeydown=e,l.onkeyup=t},initTouch:function(){var e=function(e){e.preventDefault(),!d.start[0]&&window.focus(),d.start[0]=!0,d.held[0]=!0},t=function(e){e.preventDefault(),d.start[0]=!1,d.end[0]=!0,d.held[0]=!1},n=function(e){e.preventDefault();var t=e.changedTouches;d.x[0]=t[0].pageX,d.y[0]=t[0].pageY};l.ontouchstart=e,l.ontouchend=t,l.ontouchcancel=t,l.ontouchmove=n},getTriggerEvents:function(){f.length=0,Object.keys(c.down).forEach(function(e){s.default.includes(e)?(c.down[e]&&f.push(e),c.pressed[e]&&f.push(e+"Pressed"),c.released[e]&&f.push(e+"Released")):(console.warn("input key not supported: ",e),delete c.down[e])});for(var e=["Left","Middle","Right"],t=0;t<3;t++)u.down[t]&&f.push(e[t]+"Down"),u.pressed[t]&&f.push(e[t]+"Pressed"),u.released[t]&&f.push(e[t]+"Released");u.wheelUp&&f.push("WheelUp"),u.wheelDown&&f.push("WheelDown")},update:function(){Object.keys(c.down).forEach(function(e){c.pressed[e]=!1,c.released[e]=!1}),Object.keys(u.down).forEach(function(e){u.pressed[e]=!1,u.released[e]=!1}),Object.keys(d.held).forEach(function(e){d.start[e]=!1,d.end[e]=!1,d.held[e]=!1}),u.wheelUp=!1,u.wheelDown=!1}};t.default=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(5),s=o(a),l=n(0),u=o(l),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.x=0,this.y=0,this.angle=0,this.width=s.default.current.width,this.height=s.default.current.height,this.follow=null,this.gridLocked=!1,this.left=0,this.right=0,this.top=0,this.bottom=0,i(this,t),e.array.push(this)}return e.prototype.update=function(){if(this.follow){Array.isArray(this.follow)||(this.follow=[this.follow]);var e=0,t=0,n=0,o=1;this.follow.forEach(function(r){Array.isArray(r)?(o=r[1]||1,r=r[0]):o=1,e+=r.x*o,t+=r.y*o,n+=o}),this.x=e/n,this.y=t/n}this.left=this.x-.5*this.width,this.right=this.x+.5*this.width,this.top=this.y-.5*this.height,this.bottom=this.y+.5*this.height,u.default.transform.translate(-this.left,-this.top)},e.create=function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},e.update=function(){e.array.forEach(function(e){e.update()})},e}();t.default=c,c.array=[]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){window._GB_stop&&p.default.triggerEvents.includes("EscapePressed")&&window._GB_stop(),window.requestAnimationFrame(r);var t=D+A,n=0;if(m.default.fps=1e3/(e-O),O=e,e>t){var o=e-D;n=Math.floor(o/A)}p.default.getTriggerEvents(),i(n),s(),n&&p.default.update()}function i(e){for(var t=0;t<e;t++)D+=A,E=1,a(1)}function a(e){g.default.stepAll(e),g.default.clearDestroyed(),M.default.updateAll()}function s(){b.default.reset(),c.default.clear(c.default.main,"#000000"),f.default.draw(f.default.current),w.default.update(),g.default.drawAll(),M.default.drawAll()}function l(){g.default.executeEventAll("resize")}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),c=o(u),d=n(5),f=o(d),h=n(7),p=o(h),v=n(2),g=o(v),y=n(15),m=o(y),_=n(0),b=o(_),x=n(8),w=o(x),S=n(6),M=o(S),D=performance.now(),A=1e3/60,E=0,O=0,k={get dt(){return E},start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e.host&&""!==e.host){var t=window.parent?window.parent.location:window.location,n=t.hostname;e.host.split(" ").join("").split(",");if(!e.host.includes(n))return}var o=c.default.create({width:f.default.current.width,height:f.default.current.height,crisp2D:!0,application:!0});e.enableMouse&&p.default.initMouse(),e.enableKeyboard&&p.default.initKeyboard(),e.enableTouch&&p.default.initTouch(),e.hideCursor&&(o.style.cursor="none"),f.default.enter(f.default.current),r(performance.now())},setGameSpeed:function(e){A=1e3/e}};window.addEventListener("resize",l),t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,n){var r=o.componentToHex;return"#"+r(e)+r(t)+r(n)}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Space","Backspace","Escape","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyZ","KeyY","KeyZ"];t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(13),l=(o(s),n(2)),u=o(l),c=n(21),d=o(c),f=n(14),h=o(f),p=function(){function e(t,n){i(this,e);var o=function(){};return d.default.set(o.prototype),o.assetType="object",o.objectName=t||"object_"+o.id,o.prototype.sprite=n||null,o.pool=new h.default(o),e.array.push(o),o}return e.create=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(n)))},e.set=function(t,n,o){t=e.get(t),t.prototype[n]=o},e.eventAddAction=function(t,n,o){for(var i=arguments.length,s=Array(i>3?i-3:0),l=3;l<i;l++)s[l-3]=arguments[l];if(t=e.get(t),"object"===(void 0===n?"undefined":a(n)))return void e.keys(n).forEach(function(o){n[o].forEach(function(n){e.eventAddAction.apply(e,[t,o].concat(r(n)))})});if(void 0!==o){var u="";if("string"==typeof o&&(u=o),void 0===t.prototype.events[n]&&(t.prototype.events[n]=[],n.includes("collision_"))){var c=n.indexOf("_")+1,d=n.slice(c,200);e.addCollisionListener(t,d)}t.prototype.events[n].push({flow:u,action:o,args:s})}else console.warn("tried to add an undefined action to an event!")},e.addCollisionListener=function(e,t){e.prototype.listeners.push({type:"collision",target:t})},e.getAllInstances=function(e){var t=[];return u.default.instanceArray.forEach(function(n){n.constructor.objectName===e&&t.push(n)}),t},e.get=function(t){if("object"===(void 0===t?"undefined":a(t))||"function"==typeof t)return t;for(var n=0;n<e.array.length;n++)if(e.array[n].objectName===t)return e.array[n];return console.warn("FAIL: ",void 0===t?"undefined":a(t),t),null},e}();t.default=p,p.array=[]},function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={};return e.forEach(function(e){n[e]=e+t}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s={create:"create",roomEnter:"roomEnter",roomLeave:"roomLeave",step:"step",draw:"draw",collision:"collision_",resize:"resize",keyboard:r({},o(a.default),{pressed:o(a.default,"Pressed"),released:o(a.default,"Released")})};t.default=s},function(e,t,n){"use strict";function o(e){this.stack=[],this.length=0,this.newConstructor=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,o.prototype.get=function(e){return this.length&&(e=this.stack[--this.length],this.stack[this.length]=void 0),e||new this.newConstructor},o.prototype.release=function(e){this.stack[this.length++]=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={fps:0};t.default=o},function(e,t,n){"use strict";function o(){this.currentTime=0,this.play()}function r(){this.pause(),this.currentTime=0}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=[],s={isEnabled:!0,enable:function(e){s.isEnabled=e},create:function(e,t){var n={name:e,assetType:"sound",instances:[new Audio(t)],ready:!1},o=n.instances[0],r=function(){n.ready=!0,o.oncanplaythrough=null};return o.oncanplaythrough=r,a.push(n),n},play:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;if("object"!==(void 0===n?"undefined":i(n))&&(n=s.get(e)),!n)return void console.warn("sound with name "+e+" doesn't exist!");if(s.isEnabled){for(var a=void 0,l=0,u=n.instances.length;l<u;l++){var c=n.instances[l];c.paused&&(a=c)}a||(a=n.instances[0].cloneNode(),n.instances.push(a)),a.onError=function(t){console.error(e,t)};var d=a.play();return void 0!==d&&d.then(function(){a.onended=function(){(Number(t.loop||!1)?o:r).call(this),t.onEnd&&t.onEnd()}}).catch(function(e){console.warn(e)}),a}return n.instances[0]},stop:function(e){"object"!==(void 0===e?"undefined":i(e))&&(e=s.get(e));for(var t=0,n=e.instances.length;t<n;t++){var o=e.instances[t];o.paused||r.call(o)}},readyAll:function(){for(var e=0,t=a.length;e<t;e++)if(!a[e].ready)return!1;return!0},get:function(e){for(var t=0,n=a.length;t<n;t++)if(a[t].name===e)return a[t]}};t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e);for(var i=t*n,a=r.value||0,s=e.pool.get(this),l=s===this?this.data=[]:s.data,u=0;u<i;u++)l[u]=a;return s.size=i,s.width=t,s.height=n,s}return e.prototype.get=function(e,t){return this.data[e+t*this.width]},e.prototype.set=function(e,t,n){this.data[e+t*this.width]=n},e.prototype.create=function(){return newGrid.apply(void 0,arguments)},e.prototype.destroy=function(){e.pool.release(this)},e.get=function(){var t;return(t=e.prototype.get).call.apply(t,arguments)},e.set=function(){var t;return(t=e.prototype.set).call.apply(t,arguments)},e}();t.default=a,a.pool=new i.default(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={blend:function(e,t,n){return e+(t-e)*n},cubicBezier:function(e,t,n,r,i){var a=o.blend(0,e,i),s=o.blend(0,t,i),l=o.blend(e,n,i),u=o.blend(t,r,i),c=o.blend(n,1,i),d=o.blend(r,1,i),f=o.blend(a,l,i),h=o.blend(s,u,i),p=o.blend(l,c,i),v=o.blend(u,d,i);o.blend(f,p,i);return o.blend(h,v,i)}};t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.texture,n=p.default.get(t);if(null===n)return void console.warn("No such texture: "+t);var o=f.default.context,r=n.images[0],i=r.img,a=n.width,u=n.height,c=l(e),d=void 0,h=s(e.points,e.modifier),v=c.length;for(d=0;d<v;d++){var g=c[d],y=h[g[0]].x,m=h[g[1]].x,_=h[g[2]].x,b=h[g[0]].y,x=h[g[1]].y,w=h[g[2]].y,S=h[g[0]].u*a,M=h[g[1]].u*a,D=h[g[2]].u*a,A=h[g[0]].v*u,E=h[g[1]].v*u,O=h[g[2]].v*u;o.save(),o.beginPath(),o.moveTo(y,b),o.lineTo(m,x),o.lineTo(_,w),o.closePath(),o.clip();var k=S*E+A*D+M*O-E*D-A*M-S*O,T=y*E+A*_+m*O-E*_-A*m-y*O,j=S*m+y*D+M*_-m*D-y*M-S*_,C=S*E*_+A*m*D+y*M*O-y*E*D-A*M*_-S*m*O,R=b*E+A*w+x*O-E*w-A*x-b*O,P=S*x+b*D+M*w-x*D-b*M-S*w,Y=S*E*w+A*x*D+b*M*O-b*E*D-A*M*w-S*x*O;o.transform(T/k,R/k,j/k,P/k,C/k,Y/k),o.drawImage(i,0,0),o.restore()}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s(e.points,e.modifier);if(t.length>0){var n=u(e),o=void 0,r=f.default.context;for(r.fillStyle=e.color||f.default.color,o=0;o<n.length;o++){var i=n[o],a=void 0,l=t[i[0]];for(r.beginPath(),r.moveTo(l.x,l.y),a=1;a<i.length;a++)l=t[i[a]],r.lineTo(l.x,l.y);r.closePath(),r.fill()}}}function s(e,t){var n=[];return e.forEach(function(e){var o=c({},e,t.call(e));n.push(o)}),n}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if("quads"===e.format){var n=Math.floor(e.points.length/4),o=void 0,r=0;for(o=0;o<n;o++)t.push([r+0,r+1,r+2],[r+2,r+3,r+0]),r+=4}return t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=Math.floor(e.points.length/4),o=void 0,r=0;for(o=0;o<n;o++,r+=4)t.push([r+0,r+1,r+2,r+3]);return t}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=n(0),f=o(d),h=n(1),p=o(h),v=function(){},g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.points=t.points||[],this.texture=t.texture||null,this.color=t.color||"#000000",this.format=t.format||"quads",this.modifier=t.modifier||v,this.x=t.x||0,this.y=t.y||0}return e.prototype.draw=function(){e.draw(this)},e.create=function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},e.draw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.texture?i(e):a(e)},e}();t.default=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=t.tween=t.math=t.draw=t.instance=t.action=t.event=t.object=t.sound=t.sprite=t.input=t.room=t.Camera=t.canvas=t.main=void 0;var r=n(9),i=o(r),a=n(3),s=o(a),l=n(8),u=o(l),c=n(5),d=o(c),f=n(7),h=o(f),p=n(1),v=o(p),g=n(16),y=o(g),m=n(12),_=o(m),b=n(13),x=o(b),w=n(23),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(w),M=n(2),D=o(M),A=n(0),E=o(A),O=n(4),k=o(O),T=n(18),j=o(T),C=n(6),R=o(C),P=n(19);o(P);t.main=i.default,t.canvas=s.default,t.Camera=u.default,t.room=d.default,t.input=h.default,t.sprite=v.default,t.sound=y.default,t.object=_.default,t.event=x.default,t.action=S,t.instance=D.default,t.draw=E.default,t.math=k.default,t.tween=j.default,t.Transition=R.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(4),a=o(i),s=n(2),l=o(s),u=JSON.stringify({sprite:null,index:0,imageSpeed:1,animationBehavior:"loop",visible:!0,solid:!1,exists:!0,scaleX:1,scaleY:1,rotation:0,terminal:100,gravity:0,gravityDirection:0,speedX:0,speedY:0,boxTop:0,boxBottom:0,boxLeft:0,boxRight:0,behaviours:[],listeners:[],events:{},boxCollision:{x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0},_depth:0}),c={set:function(e){r(e,JSON.parse(u)),Object.defineProperty(e,"depth",{set:function(e){this._depth=e,l.default.instanceArray.sort(function(e,t){return e._depth-t._depth})},get:function(){return this._depth}}),Object.defineProperty(e,"speed",{set:function(e){var t=this.direction*a.default.DEGTORAD;this.speedX=Math.cos(t)*e,this.speedY=Math.sin(t)*e},get:function(e){return a.default.pointDistance(0,0,this.speedX,this.speedY)}}),Object.defineProperty(e,"direction",{set:function(e){var t=this.speed;this.speedX=Math.cos(e*a.default.DEGTORAD)*t,this.speedY=Math.sin(e*a.default.DEGTORAD)*t},get:function(e){return a.default.pointDirection(0,0,this.speedX,this.speedY)}})}};t.default=c},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _global=__webpack_require__(15),_global2=_interopRequireDefault(_global),compile={actionExpression:function actionExpression(x){var _this=this;if("string"==typeof x&&64===x.charCodeAt(0)){var n=void 0,string="",sIndex=-1,newArr=[];for(n=1;n<x.length;n++){var c=x.charAt(n);switch(c){case"'":-1===sIndex?sIndex=n+1:(newArr.push("'"+x.slice(sIndex,n)+"'"),sIndex=-1);break;default:-1===sIndex&&" "!==c&&("+"===c||"-"===c||"="===c?(""!==string&&(newArr.push(string),string=""),newArr.push(c)):string+=c)}}""!==string&&(newArr.push(string),string="");var y="";return newArr.forEach(function(e){var t=parseInt(e);if(isNaN(t)){var n=e.charAt(0);"'"===n?y+=e:"+"===n?y+=e:"fps"===e?y+=_global2.default.fps:void 0!==_this[e]?y+="this."+e:y+=e}else y+=e}),eval(y)}return x}};exports.default=compile},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function actionSet(e,t,n){n?this[e]+=t:this[e]=t}function actionTest(e,t,n){switch(t){case"==":return this[e]==n;case"<":return this[e]<n;case">":return this[e]>n;case"<=":return this[e]<=n;case">=":return this[e]>=n;default:return!1}}function actionSetGravity(e){this.gravity=e}function actionJump(e,t,n){n?(this.x+=Number(e),this.y+=Number(t)):(this.x=Number(e),this.y=Number(t))}function actionJumpRandom(){this.x=Math.floor(641*Math.random())+0,this.y=Math.floor(481*Math.random())+0}function moveFree(e,t){this.speed=e,this.direction=t}function moveDirect(e,t){this.x+=e*_main2.default.dt,this.y+=t*_main2.default.dt}function moveSpeedX(e){this.speedX=Number(e)}function moveSpeedY(e){this.speedY=Number(e)}function moveReverseX(){this.speedX=-this.speedX}function moveReverseY(){this.speedY=-this.speedY}function actionWrap(){var e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room2.default.current,o=n.width,r=n.height;this.boxRight<0&&(this.x+=o+e),this.boxBottom<0&&(this.y+=r+t),this.boxLeft>o&&(this.x-=o+e),this.boxTop>r&&(this.y-=r+t)}function actionConfine(){var e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room2.default.current,o=n.width,r=n.height;this.boxLeft<0&&(this.x=0),this.boxTop<0&&(this.y=0),this.boxRight>o&&(this.x=o-e),this.boxBottom>r&&(this.y=r-t)}function actionFunc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];e.apply(this,n)}function runCode(code){if("string"==typeof code)try{eval(code)}catch(e){console.error(e.message)}else console.error("runCode( code ); code must be a string!")}function actionGet(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(this[t].toFixed(2))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GAME=exports.confirm=exports.alert=exports.message=exports.code=exports.func=exports.confine=exports.wrap=exports.actionConfine=exports.actionWrap=exports.moveReverseY=exports.moveReverseX=exports.moveSpeedY=exports.moveSpeedX=exports.moveDirect=exports.moveFree=exports.jumpRandom=exports.jump=exports.setGravity=exports.actionTest=exports.test=exports.get=exports.set=exports.exitEvent=exports.blockEnd=exports.blockBegin=exports.drawSprite=exports.instanceDrawSelf=exports.drawSelf=exports.drawText=exports.drawSetFontSize=exports.drawSetFont=exports.drawSetColor=exports.soundPlay=exports.instanceChangeSprite=exports.changeSprite=exports.instanceSetDirection=exports.instanceSetRotation=exports.instanceDestroy=exports.instanceCreateMoving=exports.instanceCreate=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_room=__webpack_require__(5),_room2=_interopRequireDefault(_room),_sound=__webpack_require__(16),_sound2=_interopRequireDefault(_sound),_draw=__webpack_require__(0),_draw2=_interopRequireDefault(_draw),_instance=__webpack_require__(2),_instance2=_interopRequireDefault(_instance),_input=__webpack_require__(7),_input2=_interopRequireDefault(_input),_math=__webpack_require__(4),_math2=_interopRequireDefault(_math),_sprite=__webpack_require__(1),_sprite2=_interopRequireDefault(_sprite),_canvas=__webpack_require__(3),_canvas2=_interopRequireDefault(_canvas),_color=__webpack_require__(10),_color2=_interopRequireDefault(_color),_main=__webpack_require__(9),_main2=_interopRequireDefault(_main),_camera=__webpack_require__(8),_camera2=_interopRequireDefault(_camera),_app=__webpack_require__(24),_app2=_interopRequireDefault(_app),_data=__webpack_require__(25),_data2=_interopRequireDefault(_data),_tilemap=__webpack_require__(26),_tilemap2=_interopRequireDefault(_tilemap),_tween=__webpack_require__(18),_tween2=_interopRequireDefault(_tween),_transition=__webpack_require__(6),_transition2=_interopRequireDefault(_transition),_primitive=__webpack_require__(19),_primitive2=_interopRequireDefault(_primitive),GAME={main:{setGameSpeed:_main2.default.setGameSpeed},instance:{create:_instance2.default.create,createMoving:_instance2.default.createMoving,destroy:_instance2.default.destroy,find:_instance2.default.find,findRandom:_instance2.default.findRandom,count:_instance2.default.count,mouseOn:_instance2.default.mouseOn},draw:_extends(_draw2.default,{self:_instance2.default.drawSelf,debug:_instance2.default.drawDebug}),canvas:{getMain:_canvas2.default.getMain,create:_canvas2.default.create},color:_color2.default,sprite:{create:_sprite2.default.create,addFrame:_sprite2.default.addFrame,tint:_sprite2.default.tint,get:_sprite2.default.get,cache:_sprite2.default.cache},sound:{play:_sound2.default.play,stop:_sound2.default.stop,get:_sound2.default.get},room:_room2.default,input:{keyboard:_input2.default.keyboard,mouse:_input2.default.mouse,touch:_input2.default.touch},math:_math2.default,Camera:_camera2.default,app:_app2.default,data:_data2.default,Tilemap:_tilemap2.default,tween:_tween2.default,Transition:_transition2.default,Primitive:_primitive2.default},blockBegin="blockBegin",blockEnd="blockEnd",exitEvent="exitEvent",instanceCreate=_instance2.default.create,instanceCreateMoving=_instance2.default.createMoving,instanceDestroy=_instance2.default.destroy,changeSprite=_instance2.default.changeSprite,instanceSetRotation=_instance2.default.setRotation,instanceSetDirection=_instance2.default.setDirection,message=console.log,alert=function(e){window.alert(e)},confirm=function(e){return window.confirm(e)},drawSetColor=_draw2.default.setColor,drawSetFont=_draw2.default.setFont,drawSetFontSize=_draw2.default.setFontSize,drawText=_draw2.default.text,drawSelf=_instance2.default.drawSelf,drawSprite=_draw2.default.sprite,soundPlay=function(e,t){_sound2.default.play(e,{loop:t})};exports.instanceCreate=instanceCreate,exports.instanceCreateMoving=instanceCreateMoving,exports.instanceDestroy=instanceDestroy,exports.instanceSetRotation=instanceSetRotation,exports.instanceSetDirection=instanceSetDirection,exports.changeSprite=changeSprite,exports.instanceChangeSprite=changeSprite,exports.soundPlay=soundPlay,exports.drawSetColor=drawSetColor,exports.drawSetFont=drawSetFont,exports.drawSetFontSize=drawSetFontSize,exports.drawText=drawText,exports.drawSelf=drawSelf,exports.instanceDrawSelf=drawSelf,exports.drawSprite=drawSprite,exports.blockBegin=blockBegin,exports.blockEnd=blockEnd,exports.exitEvent=exitEvent,exports.set=actionSet,exports.get=actionGet,exports.test=actionTest,exports.actionTest=actionTest,exports.setGravity=actionSetGravity,exports.jump=actionJump,exports.jumpRandom=actionJumpRandom,exports.moveFree=moveFree,exports.moveDirect=moveDirect,exports.moveSpeedX=moveSpeedX,exports.moveSpeedY=moveSpeedY,exports.moveReverseX=moveReverseX,exports.moveReverseY=moveReverseY,exports.actionWrap=actionWrap,exports.actionConfine=actionConfine,exports.wrap=actionWrap,exports.confine=actionConfine,exports.func=actionFunc,exports.code=runCode,exports.message=message,exports.alert=alert,exports.confirm=confirm,exports.GAME=GAME},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(o),i={setCursor:function(e){r.default.main.style.cursor=e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={Grid:r.default}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.textureAtlas=e.atlas||null,this.tileWidth=e.tileWidth||16,this.tileHeight=e.tileHeight||16,this.tileSpacing=e.tileSpacing||0,this.tileOverlay=e.tileOverlay||0,this.tilesWide=e.tilesWide||16,this.mapWidth=e.mapWidth||16,this.mapHeight=e.mapHeight||16,this.layers={}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),a=o(i),s=n(17),l=o(s),u=n(0),c=o(u),d=n(1),f=o(d);r.prototype.set=function(e,t,n,o){this.layers[e]||(this.layers[e]=new l.default(this.mapWidth,this.mapHeight)),this.layers[e].set(t,n,o)},r.prototype.draw=function(e){var t=f.default.get(this.textureAtlas).images[0].img,n=this.tileSpacing+this.tileOverlay,o=void 0,r=void 0,i=void 0,a=void 0,s=void 0;e?(s=e.order,o=Math.floor(Math.max(0,e.left/this.tileWidth)),r=Math.floor(Math.max(0,e.top/this.tileHeight)),i=Math.ceil(Math.min(this.mapWidth,e.right/this.tileWidth)),a=Math.ceil(Math.min(this.mapHeight,e.bottom/this.tileHeight))):(s=Object.keys(this.layers),o=0,r=0,i=this.mapWidth,a=this.mapHeight);var l=void 0,u=void 0,d=void 0;for(d=0;d<s.length;d++)for(l=o;l<i;l++)for(u=r;u<a;u++){var h=this.layers[s[d]].get(l,u);if(h>0){var p=(h-1)%this.tilesWide,v=Math.floor((h-1)/this.tilesWide);p=p*(this.tileWidth+2*n)+n,v=v*(this.tileHeight+2*n)+n,c.default.context.drawImage(t,p-this.tileOverlay,v-this.tileOverlay,this.tileWidth+2*this.tileOverlay,this.tileHeight+2*this.tileOverlay,l*this.tileWidth-this.tileOverlay,u*this.tileHeight-this.tileOverlay,this.tileWidth+2*this.tileOverlay,this.tileHeight+2*this.tileOverlay)}}},r.create=a.default.functionFromConstructor(r),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={functionFromConstructor:function(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(n)))}},functionFromMethod:function(e){return function(){return e.call.apply(e,arguments)}}}}])});
//# sourceMappingURL=GameBeans.js.map