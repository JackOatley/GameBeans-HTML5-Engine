!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GameBeans",[],t):"object"==typeof exports?exports.GameBeans=t():e.GameBeans=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(11),a=n(2),s=n(1),_=n(25),c=n(14);window.global=c.a;let l=[],u=[],h={instanceArray:l,instanceHardLimit:1e3,create:function(e,t,n){let r=o.a.get(e);return null===r?(window.addConsoleText("#F00","No such object as "+e),window._GB_stop(),null):new r(t,n)},setup:function(e,t,n,r){e.object=t,e.objectName=t.objectName,e.assetType="instance",e.x=Number(n),e.y=Number(r),e.boxCollision=Object.assign({},e.boxCollision);let i=a.a.get(e.sprite);i&&(e.boxCollision.x=i.originX,e.boxCollision.y=i.originY,e.boxCollision.width=i.width,e.boxCollision.height=i.height),h.addToArray(e),h.updateBoundingBox(e),h.updateCollisionBox(e),h.executeEvent(e,"create")},addToArray:function(e){let t;for(t=0;t<l.length;t++)if(e.depth<=l[t].depth)return void l.splice(t,0,e);l.push(e)},createMoving:function(e,t,n,r,i){if(l.length>=h.instanceHardLimit)return void console.warn("instance number hard limit reached:",h.instanceHardLimit);let o=h.create(e,t,n);return o.speed=r,o.direction=i,o},find:function(e,t){"function"==typeof e&&(e=e.objectName);let n,r,i=0;for(n=0;n<l.length;n++)if((r=h.instanceArray[n]).objectName===e&&i++===t)return r;return null},findRandom:function(e){"function"==typeof e&&(e=e.objectName);let t=r.a.randomInt(0,h.count(e)-1);return h.find(e,t)},count:function(e){let t=0;return h.instanceArray.forEach(n=>{t+=n.objectName===e}),t},setRotation:function(e,t){this.rotation=t?this.rotation+e:e},setDirection:function(e,t){this.direction=t?this.direction+e:e},mouseOn:function(e){return!(e.boxTop>i.a.mouse.y/2-s.a.offsetY||e.boxBottom<i.a.mouse.y/2-s.a.offsetY||e.boxLeft>i.a.mouse.x/2-s.a.offsetX||e.boxRight<i.a.mouse.x/2-s.a.offsetX)},step:function(e,t){h.executeEvent(e,"step"),h.updateAnimation(e,t),h.updatePosition(e,t),h.updateBoundingBox(e),h.updateCollisionBox(e),h.instanceExecuteListeners(e),i.a.triggerEvents.forEach(t=>{h.executeEvent(e,t)})},updateAnimation:function(e,t){e.index+=e.imageSpeed;let n=a.a.get(e.sprite);if(n){let t=n.images.length;if(e.index>=t){let n=e.animationBehavior,r=typeof n;"string"===r?"loop"===n?e.index-=t:"stop"===n&&(e.index=t-1,e.imageSpeed=0):"function"===r&&n.call(e)}}},updatePosition:function(e,t){let n=r.a.lengthDirX(e.terminal,e.gravityDirection),i=r.a.lengthDirY(e.terminal,e.gravityDirection);(n>0&&e.speedX<=n||n<0&&e.speedX>=n)&&(e.speedX+=r.a.lengthDirX(e.gravity,e.gravityDirection)),(i>0&&e.speedY<=i||i<0&&e.speedY>=i)&&(e.speedY+=r.a.lengthDirY(e.gravity,e.gravityDirection)),e.x+=e.speedX*t,e.y+=e.speedY*t},updateBoundingBox:function(e){let t=a.a.get(e.sprite);null!==t&&(e.boxTop=e.y-t.originY*e.scaleY,e.boxLeft=e.x-t.originX*e.scaleX,e.boxBottom=e.boxTop+t.height*e.scaleY,e.boxRight=e.boxLeft+t.width*e.scaleX)},updateCollisionBox:function(e){let t=e.boxCollision;t.top=e.y-t.y*e.scaleY,t.left=e.x-t.x*e.scaleX,t.bottom=t.top+t.height*e.scaleY,t.right=t.left+t.width*e.scaleX},destroy:function(e){e.exists=!1;let t=e.object.instances.indexOf(e);e.object.instances.splice(t,1)},draw:function(e){e.visible&&(e.events.draw?h.executeEvent(e,"draw"):h.drawSelf(e))},drawSelf:function(e){null!==e.sprite&&s.a.sprite(e.sprite,e.index,e.x,e.y,e.scaleX,e.scaleY,e.rotation)},drawDebug:function(e){let t=e.boxCollision;s.a.shape.rectangle(t.left,t.top,t.right-t.left,t.bottom-t.top,{color:"#FF000055"})},changeSprite:function(e){this.sprite=e},instanceExecuteListeners:function(e){e.listeners.forEach(t=>{switch(t.type){case"collision":h.instanceCollisionInstance(e,t.target)}})},instanceCollisionInstance:function(e,t){let n=o.a.getAllInstances(t),r=e.boxCollision;n.forEach(function(n){if(e===n)return;let i=n.boxCollision;r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top||h.executeEvent(e,"collision_"+t,n)})},executeEvent:function(e,t,n){u.push(window.other),window.other=n;try{if(e.exists){let r=e.events[t];r&&h.executeActions(e,r,n)}}catch(n){console.error(n),window.addConsoleText("#F00","Failed to execute event ["+t+"] of object ["+e.objectName+"] with error: "+n)}window.other=u.pop()},executeEventAll:function(e,t){for(var n=0;n<l.length;n++)h.executeEvent(l[n],e,t)},executeActions:function(e,t,n){let r,i,o=!0,a=[],s=0;for(r=0;r<t.length;r++){switch((i=t[r]).flow){case"":if(!o)break;const c=i.args;let l,u=[];for(l=0;l<c.length;l++)switch(c[l]){case"self":u[l]=e;break;case"other":u[l]=n;break;default:u[l]=_.a.actionExpression.call(e,c[l])}void 0===(o=i.action.apply(e,u))?o=!0:a[s]=0;break;case"blockBegin":s++;break;case"blockEnd":s--;break;case"exitEvent":if(o)return!1}1==a[s]++&&(o=!0)}},stepAll:function(e){l.slice().forEach(t=>h.step(t,e))},drawAll:function(){h.doDepthSort&&h.instanceArray.sort((e,t)=>e.depth-t.depth),l.forEach(e=>h.draw(e))},clearDestroyed:function(){for(var e=l.length-1;e>=0;e--){let t=l[e];t.exists||(t.exists=!0,t.speedX=0,t.speedY=0,t.object.pool.release(t),l.splice(e,1))}}};t.a=h},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(7),a=n(17);let s={color:"#FFFFFF",font:"Arial",fontSize:30,textAlign:"start",textBaseline:"alphabetic",target:null,context:null,defaultTransform:[1,0,0,1,0,0],targetStack:[],imageSmoothing:!1,offsetX:0,offsetY:0,setTarget:function(e){s.targetStack.push(s.target),s.target=e,s.context=e.domElement.getContext("2d")},resetTarget:function(){let e=s.targetStack.pop();s.target=e,s.context=e.domElement.getContext("2d")},getTarget:function(){return s.target},clear:function(e){o.a.clear(s.target,e)},save:function(){s.context.save()},restore:function(){s.context.restore()},reset:function(){s.context.imageSmoothingEnabled=s.imageSmoothing,s.context.setTransform(...s.defaultTransform),s.context.globalAlpha=1},setImageSmoothing:function(e){s.imageSmoothing=e},transform:{scale:function(e,t){s.context.scale(e,t)},rotate:function(e){s.context.rotate(e*r.a.DEGTORAD)},translate:function(e,t){s.offsetX=e,s.offsetY=t,s.context.translate(e,t)},setDefault:function(e={}){let t=s.defaultTransform;e.scaleX&&(t[0]=e.scaleX),e.skewX&&(t[1]=e.skewX),e.skewY&&(t[2]=e.skewY),e.scaleY&&(t[3]=e.scaleY),e.moveX&&(t[4]=e.moveX),e.moveY&&(t[5]=e.moveY)}},setColor:function(e){"string"==typeof e?s.color=e:"r"in e&&"g"in e&&"b"in e?s.color="a"in e?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")":"h"in e&&"s"in e&&"l"in e&&(s.color="a"in e?"hsla("+e.h+","+e.s+"%,"+e.l+"%,"+e.a+")":"hsl("+e.h+","+e.s+"%,"+e.l+"%)")},sprite:function(e,t,n,o,a,_,c){e=i.a.get(e);let l=s.context;l.save(),l.translate(n,o),l.rotate(c*r.a.DEGTORAD),l.scale(a,_),t=Math.floor(t)%e.images.length;let u=e.images[t],h=u.img;l.drawImage(h,u.clip.x,u.clip.y,u.clip.w,u.clip.h,-e.originX,-e.originY,e.width,e.height),l.restore()},spriteTiled:function(e,t,n,r,o,a){let s,_,c,l;for(e=i.a.get(e),c=0,s=n;c<o;c++,s+=e.width)for(l=0,_=r;l<a;l++,_+=e.height)drawSprite(e,t,s,_,1,1,0)},canvas:function(e,t,n){s.context.drawImage(e.domElement,t,n)},setFont:function(e,t,n,r){e="string"==typeof e?e:e.name,s.font=e,s.fontSize=t,s.textAlign=n,s.textBaseline=r;const i=s.context;i.font=t+"px "+e,i.textAlign=n,i.textBaseline=r},text:function(e,t,n,r={}){t=Number(t),n=Number(n);let i,o,c,l=!1,u=a.a.get(s.font);u&&"bitmap"===u.method&&(l=!0,o=u.bitmapFont.lookup,i=u.bitmapFont.image,c=s.fontSize/u.bitmapFont.size);let h,p=s.context,d="fillText";r.stroke?(p.strokeStyle=r.strokeColor||s.color,p.lineWidth=r.lineWidth||2,d="strokeText"):p.fillStyle=s.color;let f=t,m=0,g=e.toString().length;r.pattern&&(m=r.pattern.start,g=r.pattern.end);let b=1.2*p.measureText("M").width,w=e.toString().split("#");for(var E=0;E<w.length;E++){if(r.maxWidth){for(var y=w[E].split(" "),x="",D=0;D<y.length;D++){var M=x+y[D]+" ";if(p.measureText(M).width>r.maxWidth&&D>0){let e=x.slice(0,m),r=x.slice(m,g);f+=p.measureText(e).width,0<g&&_(f,n,r,o,p,l,i,c,d),m-=h=M.length,g-=h,x=y[D]+" ",n+=b,f=t}else x=M}let e=x.slice(0,m),a=x.slice(m,g);_(f+=p.measureText(e).width,n,a,o,p,l,i,c,d),h=x.length}else{let e=w[E].slice(0,m),t=w[E].slice(m,g);_(f+=p.measureText(e).width,n,t,o,p,l,i,c,d),h=w[E].length}f=t,n+=b,m-=h,g-=h}},shape:{line:function(e,t,n,r,i={}){let o=s.context;o.strokeStyle=i.color||s.color,o.beginPath(),o.moveTo(e,t),o.lineTo(n,r),o.stroke()},ellipse:function(e,t,n,r,i={}){let o,a=s.context;if(a.save(),a.beginPath(),a.translate(e-n,t-r),a.scale(n,r),a.arc(1,1,1,0,2*Math.PI,!1),a.restore(),i.healthbar){let t=i.healthbar.amount||1,r=i.healthbar.color||"#0F0",s=i.healthbar.background||"#F00";(o=a.createLinearGradient(e-n,0,e+n,0)).addColorStop(0,r),o.addColorStop(t,r),o.addColorStop(t,s),o.addColorStop(1,s)}else o=i.color||s.color;i.fill||i.stroke||(i.fill=!0),i.fill&&(a.fillStyle=o,a.fill()),i.stroke&&(a.strokeStyle=o,a.lineWidth=i.lineWidth||1,a.stroke())},rectangle:function(e,t,n,r,i={}){let o,a=s.context;if(a.beginPath(),a.rect(e,t,n,r),i.healthbar){let t=i.healthbar.amount||1,r=i.healthbar.color||"#0F0",s=i.healthbar.background||"#F00";(o=a.createLinearGradient(e,0,e+n,0)).addColorStop(0,r),o.addColorStop(t,r),o.addColorStop(t,s),o.addColorStop(1,s)}else o=i.color||s.color;i.fill||i.stroke||(i.fill=!0),i.fill&&(a.fillStyle=o,a.fill()),i.stroke&&(a.strokeStyle=o,a.lineWidth=i.lineWidth||1,a.stroke())}}};function _(e,t,n,r,i,o,a,s,_){if(o){let o=~~e;for(var c=0;c<n.length;c++){let e=r[n[c]],_=e.left,l=e.top,u=e.right-e.left,h=e.bottom-e.top;i.drawImage(a,_,l,u,h,o,t,u*s,h*s),o+=(u+1)*s}}else i[_](n,e,t)}t.a=s},function(e,t,n){"use strict";var r=n(20);let i=[],o=0,a={names:[],array:i,create:function(e={}){let t,n;e.atlas&&(n=e.atlasIndex||0,t=e.atlas.images[n]);let r={assetType:"sprite",name:e.name||"Sprite_"+o,originX:e.originX||0,originY:e.originY||0,width:0,height:0,images:[]};return e.frames&&e.frames.forEach(function(e){a.addFrame(r,{source:e.src})}),a.names[o]=r.name,i[o++]=r,r},addFrame:function(e,t={}){let n;e=a.get(e),t.atlas&&(n=a.get(t.atlas).images[0].img);let r={img:n||new Image,clip:null,ready:!1};t.source&&(r.img.onload=function(){r.clip={x:0,y:0,w:r.img.width,h:r.img.height},e.width*e.height==0&&(e.width=r.clip.w,e.height=r.clip.h),r.ready=!0},r.img.src=t.source||""),n&&t.clip&&(r.clip=t.clip,console.log(r.clip),e.width*e.height==0&&(e.width=r.clip.w,e.height=r.clip.h),r.ready=!0),e.images.push(r)},cache:function(e,t={}){(e=a.get(e)).images.forEach(function(e){let n=document.createElement("CANVAS");n.width=t.width||e.img.width,n.height=t.height||e.img.height,n.getContext("2d").drawImage(e.img,0,0,n.width+1,n.height+1),e.clip.x=0,e.clip.y=0,e.clip.w=n.width,e.clip.h=n.height,e.img=n})},setOrigin:function(e,t,n){(e=a.get(e)).originX=Number(t),e.originY=Number(n)},readyAll:function(){for(var e=0;e<o;e++){let n=i[e];for(var t=0;t<n.images.length;t++){if(!n.images[t].ready)return!1}}return!0},tint:function(e,t){"object"!=typeof e&&(e=a.get(e)),e.images.forEach(function(n){let i=document.createElement("CANVAS"),o=i.getContext("2d");i.width=e.width,i.height=e.height,o.drawImage(n.img,0,0);let a=o.getImageData(0,0,i.width,i.height);!function(e,t){let n=e.length,r=t.r/255,i=t.g/255,o=t.b/255;for(var a=0;a<n;a+=4)e[a]=r*e[a]>>0,e[a+1]=i*e[a+1]>>0,e[a+2]=o*e[a+2]>>0}(a.data,"object"==typeof t?t:r.a.hexToRgb(t)),o.putImageData(a,0,0),n.img.src=i.toDataURL("image/png")})},get:function(e){if("object"==typeof e)return e;for(var t=0;t<o;t++)if(i[t].name===e)return i[t];return null}};t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(6),i=n(8),o=n(0),a=n(2),s=n(1);class _{constructor(e,t,n){this.name=e,this.width=Number(t),this.height=Number(n),this.background=null,this.backgroundMethod="no-repeat",this.instances=[],_.names.push(e),_.array.push(this),null===_.current&&(_.current=this)}setBackground(e){this.background=e}addInstance(e,t,n){"object"==typeof e&&(e=e.objectName),this.instances.push({name:e,x:t,y:n})}enter(e={}){e.transition?new i.a({prefab:e.transition,callback:_.enter.bind(null,this)}):(o.a.executeEventAll("roomleave"),o.a.instanceArray.forEach(function(e){o.a.destroy(e,!1)}),_.current=this,this.instances.forEach(function(e){o.a.create(e.name,e.x,e.y)}),o.a.executeEventAll("roomenter"))}draw(){let e=a.a.get(this.background);if(null!==e){var t=s.a.getTarget().domElement,n=t.getContext("2d");let r=e.images[0].img;if("stretch"===this.backgroundMethod)n.drawImage(r,0,0,t.width,t.height);else{let e=n.createPattern(r,this.backgroundMethod);n.fillStyle=e,n.fillRect(0,0,t.width,t.height)}}}static next(){const e=_.array.indexOf(_.current);_.enter(_.array[e+1])}static previous(){const e=_.array.indexOf(_.current);_.enter(_.array[e-1])}static get(e){if("object"==typeof e)return e;for(var t=0;t<_.array.length;t++)if(_.array[t].name===e)return _.array[t];return null}}_.prototype.assetType="room",_.names=[],_.array=[],_.current=null,r.a.classStaticMatch(_)},function(e,t,n){"use strict";let r={PI:Math.PI,RADTODEG:180/Math.PI,DEGTORAD:Math.PI/180,cos:Math.cos,sin:Math.sin,sign:Math.sign,randomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},choose:function(...e){return e[Math.floor(Math.random()*e.length)]},lengthDir:(e,t)=>(t*=r.DEGTORAD,[Math.cos(t)*e,Math.sin(t)*e]),lengthDirX:function(e,t){return Math.cos(t*r.DEGTORAD)*e},lengthDirY:function(e,t){return Math.sin(t*r.DEGTORAD)*e},pointDistance:function(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},pointDirection:function(e,t,n,i){return(Math.atan2(i-t,n-e)*r.RADTODEG+360)%360},angleDifference:function(e,t){let n=(t-e)%360;return n<=-180?n+=360:n>180&&(n-=360),n}};t.a=r},function(e,t,n){"use strict";var r=n(7),i=n(12);let o=document,a={pressed:[!1,!1,!1],down:[!1,!1,!1],released:[!1,!1,!1],wheelUp:!1,wheelDown:!1,x:0,y:0},s={pressed:{},down:{},released:{}},_={start:[],held:[],move:[],end:[],cancel:[],x:[],y:[]},c=[],l={triggerEvents:c,mouse:a,keyboard:s,touch:_,init:function(){l.initMouse(),l.initKeyboard(),l.initTouch(),o.addEventListener("contextmenu",function(e){e.preventDefault()})},initMouse:function(){o.addEventListener("mousedown",function(e){e.preventDefault(),a.pressed[e.button]||window.focus(),a.pressed[e.button]=!0,a.down[e.button]=!0}),o.addEventListener("mouseup",function(e){e.preventDefault(),a.pressed[e.button]=!1,a.released[e.button]=!0,a.down[e.button]=!1}),o.addEventListener("mousemove",function(e){let t=r.a.main.domElement.getBoundingClientRect();a.x=e.clientX-t.left,a.y=e.clientY-t.top}),o.addEventListener("mousewheel",function(e){e.preventDefault();let t=Math.max(-1,Math.min(1,e.wheelDelta));a.wheelUp=t>0,a.wheelDown=t<0})},initKeyboard:function(){i.a.forEach(function(e){s.pressed[e]=!1,s.down[e]=!1,s.released[e]=!1});o.addEventListener("keydown",function(e){e.preventDefault();const t=e.code||e.key;s.down[t]||(s.pressed[t]=!0,s.down[t]=!0)}),o.addEventListener("keyup",function(e){e.preventDefault();const t=e.code||e.key;s.released[t]=!0,s.down[t]=!1})},initTouch:function(){let e=function(e){e.preventDefault(),_.start[0]=!1,_.end[0]=!0,_.held[0]=!1};o.addEventListener("touchstart",function(e){e.preventDefault(),!_.start[0]&&window.focus(),_.start[0]=!0,_.held[0]=!0}),o.addEventListener("touchend",e),o.addEventListener("touchcancel",e),o.addEventListener("touchmove",function(e){e.preventDefault();let t=e.changedTouches;_.x[0]=t[0].pageX,_.y[0]=t[0].pageY})},getTriggerEvents:function(){let e=c;e.length=0,Object.keys(s.down).forEach(t=>{i.a.includes(t)?(s.down[t]&&e.push(t),s.pressed[t]&&e.push(t+"Pressed"),s.released[t]&&e.push(t+"Released")):(console.warn("input key not supported: ",t),delete s.down[t])});let t=["Left","Middle","Right"];for(var n=0;n<3;n++)a.down[n]&&e.push(t[n]+"Down"),a.pressed[n]&&e.push(t[n]+"Pressed"),a.released[n]&&e.push(t[n]+"Released");a.wheelUp&&e.push("WheelUp"),a.wheelDown&&e.push("WheelDown")},update:function(){Object.keys(s.down).forEach(e=>{s.pressed[e]=!1,s.released[e]=!1}),Object.keys(a.down).forEach(e=>{a.pressed[e]=!1,a.released[e]=!1}),Object.keys(_.held).forEach(e=>{_.start[e]=!1,_.end[e]=!1,_.held[e]=!1}),a.wheelUp=!1,a.wheelDown=!1}};t.a=l},function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{static classStaticMatch(e){e.create=r.functionFromConstructor(e);const t=e.get;for(var n in e.prototype)e[n]=r.functionFromMethod(e.prototype[n],t)}static functionFromConstructor(e){return(...t)=>new e(...t)}static functionFromMethod(e,t){return t?(n,...r)=>e.call(t(n),...r):(...t)=>e.call(...t)}static arrayExecute(e,t){return(...n)=>e.forEach(e=>t.call(e,...n))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=n(6);class o{constructor(e={}){const t=document.createElement("CANVAS"),n=t.getContext("2d");this.domElement=t,t.width=e.width||300,t.height=e.height||150,t.scale=e.scale||1,t.application=e.application||!1,e.crisp2D&&(n.imageSmoothingEnabled=!1),t.application&&(r.a.setTarget(this),o.setMain(this)),t.oncontextmenu=(e=>e.preventDefault()),o.array.push(this)}setMain(){let e=this.domElement;if(o.main=this,null===o.dom){o.dom=e;var t=document.getElementById("gbgamebox")||document.body;console.log(this,e),t.appendChild(e)}}static getMain(){return o.main}fill(e){let t=this.domElement;var n=t.getContext("2d");n.fillStyle=e||"#000000",n.fillRect(0,0,t.width/t.scale,t.height/t.scale)}clear(){var e=this.domElement;e.getContext("2d").clearRect(0,0,e.width/e.scale,e.height/e.scale)}}i.a.classStaticMatch(o),o.array=[],o.main=null,o.dom=null},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1);const i=()=>{};class o{constructor(e={}){this.type=e.type||"fade",this.time=e.time||60,this.color=e.color||"#000000",this.callback=e.callback||i,e.prefab&&Object.assign(this,e.prefab),this.direction=1,this.alpha=0,this.delta=1/this.time,o.allInstances.push(this),o.prefabs.hasOwnProperty(this.type)||(window.addConsoleText("#F00","Unknown transition type: "+this.type),this.type="fade")}update(){o.prefabs.hasOwnProperty(this.type)&&o.prefabs[this.type].update.call(this)}draw(){o.prefabs.hasOwnProperty(this.type)&&o.prefabs[this.type].draw.call(this)}destroy(){let e=o.allInstances.indexOf(this);o.allInstances.splice(e,1)}static create(e){return new o(e)}static updateAll(){o.allInstances.forEach(e=>{e.update()})}static drawAll(){o.allInstances.forEach(e=>{e.draw()})}}o.allInstances=[],o.prefabs={fade:{update:function(){this.alpha+=this.direction?this.delta:-this.delta,this.alpha>=1?(this.callback(),this.direction=0):this.alpha<=0&&(this.destroy(),console.log("destroy"))},draw:function(){var e=r.a.getTarget().getContext("2d");e.globalAlpha=this.alpha,e.fillStyle=this.color,e.fillRect(0,0,9999999,9999999)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(19),i=n(6);class o{constructor(e,t,n={}){let r=o.pool.get(this);return r.size=e*t,r.data=r===this?[]:r.data,r.data.length=r.size,r.width=e,r.height=t,r.clear(n.value||0),r}get(e,t){return this.data[e+t*this.width]}set(e,t,n){this.data[e+t*this.width]=n}add(e,t,n){this.data[e+t*this.width]+=n}multiply(e,t,n){this.data[e+t*this.width]*=n}clear(e){this.data.fill(e)}destroy(){o.pool.release(this)}}o.pool=new r.a(o),i.a.classStaticMatch(o)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(6);class i{constructor(e,t){this.name=e,this.instances=[new Audio(t)],this.ready=!1,i.names.push(e),i.array.push(this);let n=this.instances[0];n.oncanplaythrough=(()=>{this.ready=!0,n.oncanplaythrough=null})}play(e={}){if(i.isEnabled){let r;for(var t=0,n=this.instances.length;t<n;t++){let e=this.instances[t];if(e.paused){r=e;break}}r||(r=this.instances[0].cloneNode(),this.instances.push(r)),r.onError=(e=>{console.error(soundName,e)});let i=r.play();return void 0!==i&&i.then(function(){r.onended=function(){(Number(e.loop||!1)?function(){this.currentTime=0,this.play()}:o).call(this),e.onEnd&&e.onEnd()}}).catch(e=>{console.warn(e)}),r}return null}stop(){for(var e=0,t=this.instances.length;e<t;e++){let t=this.instances[e];t.paused||o.call(t)}}static readyAll(){for(var e=0,t=i.array.length;e<t;e++)if(!i.array[e].ready)return!1;return!0}static enable(e){i.isEnabled=e}static get(e){if("object"==typeof e)return e;for(var t=0,n=i.array.length;t<n;t++)if(i.array[t].name===e)return i.array[t];return window.addConsoleText("#F00","Unknown sound: "+e),null}}function o(){this.pause(),this.currentTime=0}r.a.classStaticMatch(i),i.prototype.assetType="sound",i.isEnabled=!0,i.names=[],i.array=[]},function(e,t,n){"use strict";n(21);var r=n(0),i=n(4);let o=JSON.stringify({sprite:null,index:0,imageSpeed:1,animationBehavior:"loop",visible:!0,solid:!1,exists:!0,scaleX:1,scaleY:1,rotation:0,terminal:100,gravity:0,gravityDirection:0,speedX:0,speedY:0,boxTop:0,boxBottom:0,boxLeft:0,boxRight:0,behaviours:[],listeners:[],events:{},boxCollision:{x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0},_depth:0});var a={set:function(e){Object.assign(e,JSON.parse(o)),Object.defineProperty(e,"depth",{set:function(e){this._depth!==e&&(this._depth=e,r.a.doDepthSort=!0)},get:function(){return this._depth}}),Object.defineProperty(e,"speed",{set:function(e){let t=this.direction*i.a.DEGTORAD;this.speedX=Math.cos(t)*e,this.speedY=Math.sin(t)*e},get:function(e){return i.a.pointDistance(0,0,this.speedX,this.speedY)}}),Object.defineProperty(e,"direction",{set:function(e){let t=this.speed;this.speedX=Math.cos(e*i.a.DEGTORAD)*t,this.speedY=Math.sin(e*i.a.DEGTORAD)*t},get:function(e){return i.a.pointDirection(0,0,this.speedX,this.speedY)}})}},s=n(19);n.d(t,"a",function(){return _});class _{constructor(e,t){let n=function(e,t){let i=n.pool.get(this);return r.a.setup(i,n,e,t),n.instances.push(i),i};return a.set(n.prototype),n.objectName=e||"object_"+n.id,n.prototype.sprite=t||null,n.pool=new s.a(n),n.instances=[],_.names.push(n.objectName),_.array.push(n),n}static create(...e){return new _(...e)}static set(e,t,n){(e=_.get(e)).prototype[t]=n}static eventAddAction(e,t,n,...r){if(e=_.get(e),"object"!=typeof t)if(void 0!==n){let i="";if("string"==typeof n&&(i=n),!e.prototype.events[t]&&(e.prototype.events[t]=[],t.includes("collision_"))){let n=t.indexOf("_")+1,r=t.slice(n,200);_.addCollisionListener(e,r)}e.prototype.events[t].push({flow:i,action:n,args:r})}else console.warn("tried to add an undefined action to an event!");else Object.keys(t).forEach(n=>{t[n].forEach(t=>{_.eventAddAction(e,n,...t)})})}static addCollisionListener(e,t){e.prototype.listeners.push({type:"collision",target:t})}static getAllInstances(e){let t=[];return r.a.instanceArray.forEach(n=>{n.constructor.objectName===e&&t.push(n)}),t}static get(e){if("object"==typeof e||"function"==typeof e)return e;for(var t=0;t<_.array.length;t++)if(_.array[t].objectName===e)return _.array[t];return console.warn("FAIL: ",typeof e,e),null}}_.prototype.assetType="object",_.names=[],_.array=[]},function(e,t,n){"use strict";t.a=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Space","Backspace","Escape","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyZ","KeyY","KeyZ"]},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),i=n(1),o=n(6);class a{constructor(e={}){this.x=0,this.y=0,this.angle=0,this.width=r.a.current.width,this.height=r.a.current.height,this.follow=null,this.gridLocked=!1,this.left=0,this.right=0,this.top=0,this.bottom=0,Object.assign(this,e),a.array.push(this)}update(){if(this.follow){Array.isArray(this.follow)||(this.follow=[this.follow]);let e=0,t=0,n=0,r=1;this.follow.forEach(i=>{Array.isArray(i)?(r=i[1]||1,i=i[0]):r=1,e+=i.x*r,t+=i.y*r,n+=r}),this.x=e/n,this.y=t/n}this.left=this.x-.5*this.width,this.right=this.x+.5*this.width,this.top=this.y-.5*this.height,this.bottom=this.y+.5*this.height,i.a.transform.translate(-this.left,-this.top)}}a.array=[],a.create=o.a.functionFromConstructor(a),a.updateAll=o.a.arrayExecute(a.array,a.prototype.update)},function(e,t,n){"use strict";t.a={fps:0}},function(e,t,n){"use strict";var r=n(7),i=n(3),o=n(5),a=n(0),s=n(14),_=n(1),c=n(13),l=n(8);let u=performance.now(),h=1e3/60,p=0,d=0,f={get dt(){return p},start:function(e={}){if(void 0!==e.host&&""!==e.host){let t=(window.parent?window.parent.location:window.location).hostname;e.host.split(" ").join("").split(",");if(!e.host.includes(t))return}let t=r.a.create({width:i.a.current.width,height:i.a.current.height,crisp2D:!0,application:!0});e.enableMouse&&o.a.initMouse(),e.enableKeyboard&&o.a.initKeyboard(),e.enableTouch&&o.a.initTouch(),e.hideCursor&&(t.style.cursor="none"),i.a.enter(i.a.current),m(performance.now())},setGameSpeed:function(e){h=1e3/e}};function m(e){window._GB_stop&&o.a.triggerEvents.includes("EscapePressed")&&window._GB_stop(),window.requestAnimationFrame(m);let t=u+h,n=0;if(s.a.fps=1e3/(e-d),d=e,e>t){let t=e-u;n=Math.floor(t/h)}o.a.getTriggerEvents(),function(e){let t;for(t=0;t<e;t++)u+=h,p=1,g(1)}(n),_.a.reset(),r.a.fill(r.a.main,"#000000"),i.a.draw(i.a.current),c.a.updateAll(),a.a.drawAll(),l.a.drawAll(),n&&o.a.update()}function g(e){a.a.stepAll(e),a.a.clearDestroyed(),l.a.updateAll()}window.addEventListener("resize",function(){a.a.executeEventAll("resize")}),t.a=f},function(e,t,n){"use strict";let r={blend:(e,t,n)=>e+(t-e)*n,cubicBezier(e,t,n,i,o){let a=r.blend(0,e,o),s=r.blend(0,t,o),_=r.blend(e,n,o),c=r.blend(t,i,o),l=r.blend(n,1,o),u=r.blend(i,1,o),h=r.blend(a,_,o),p=r.blend(s,c,o),d=r.blend(_,l,o),f=r.blend(c,u,o);r.blend(h,d,o);return r.blend(p,f,o)}};t.a=r},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(6),i=n(9);class o{constructor(e={}){this.name=e.name||"_UNNAMEDFONT",this.source=e.src||"",this.hasFontFace=!1,this.bitmapFont=e.bitmap||null,this.hasBitmapFont=null!==this.bitmap,this.method=e.method||"normal",e.apply&&this.applyCss(),o.names.push(this.name),o.array.push(this)}getCss(){return"@font-face {\t\t\tfont-family: "+this.name+";\t\t\tsrc: url('"+this.source+"') format('truetype');\t\t}"}applyCss(){let e=document.createElement("STYLE");e.textContent=this.getCss(),document.head.appendChild(e)}convertToBitmapFont(e={}){const t=3*(e.size||8),n=e.map||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=.5*t,o=r,a=e.alphaThreshold||150,s=e.color||[0,0,0,255],_=document.createElement("CANVAS");_.width=t/3*n.length,_.height=t/3;const c=_.getContext("2d"),l=c.createImageData(1,1);l.data.set(s,0);const u=document.createElement("CANVAS");u.width=u.height=t;let h=u.getContext("2d");h.font=t+"px "+this.name,console.log(h.font),h.textAlign="center",h.textBaseline="middle";let p=new i.a(t/3,t/3),d={};for(var f=0;f<n.length;f++){h.clearRect(0,0,t,t),p.clear(-1);let e=n[f];h.fillStyle="#000000",h.fillText(e,r,o);let i=h.getImageData(0,0,u.width,u.height).data;var m;for(m=0;m<i.length;m+=4){let e=~~(m/4%t/3),n=~~(~~(m/4/t)/3);-1===p.get(e,n)&&p.set(e,n,i[m+3])}let s,_,g={left:100,top:100,right:0,bottom:0},b=100,w=0;for(_=0;_<t/3;_++)for(s=0;s<t/3;s++)p.get(s,_)>a&&(g.left=Math.min(g.left,s),g.top=Math.min(g.top,_),g.right=Math.max(g.right,s+1),g.bottom=Math.max(g.bottom,_+1),b=Math.min(b,g.top),w=Math.max(w,g.bottom));for(_=0;_<t/3;_++)for(s=0;s<t/3;s++)p.get(s,_)>a&&c.putImageData(l,f*(t/3)+s,_);g.left+=f*(t/3),g.right+=f*(t/3),g.top=0,g.bottom=t/3,d[e]=g}d[" "]={left:-3,top:0,right:0,bottom:t/3},this.bitmapFont={size:t/3,lookup:d,image:_},this.method="bitmap",console.log(this.bitmapFont)}static get(e){if(["object","function"].includes(typeof e)&&("object"==typeof e||"function"==typeof e))return e;for(var t=0;t<o.array.length;t++)if(o.array[t].name===e)return o.array[t];return null}}r.a.classStaticMatch(o),o.prototype.assetType="font",o.names=[],o.array=[]},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(7);class i{static setCursor(e){r.a.main.style.cursor=e}}},function(e,t,n){"use strict";function r(e){this.stack=[],this.length=0,this.newConstructor=e}n.d(t,"a",function(){return r}),r.prototype.get=function(e){return this.length&&(e=this.stack[--this.length],this.stack[this.length]=void 0),e||new this.newConstructor},r.prototype.release=function(e){this.stack[this.length++]=e}},function(e,t,n){"use strict";let r={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,n){let i=r.componentToHex;return"#"+i(e)+i(t)+i(n)}};t.a=r},function(e,t,n){"use strict";var r=n(12);let i={create:"create",roomEnter:"roomEnter",roomLeave:"roomLeave",step:"step",draw:"draw",collision:"collision_",resize:"resize",keyboard:{...o(r.a),pressed:o(r.a,"Pressed"),released:o(r.a,"Released")}};function o(e,t=""){let n={};return e.forEach(function(e){n[e]=e+t}),n}t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(2);const o=()=>{};class a{constructor(e={}){this.points=e.points||[],this.texture=e.texture||null,this.color=e.color||"#000000",this.format=e.format||"quads",this.modifier=e.modifier||o,this.x=e.x||0,this.y=e.y||0}draw(){a.draw(this)}static create(e={}){return new a(e)}static draw(e={}){e.texture?function(e={}){let t=e.texture,n=i.a.get(t);if(null===n)return void console.warn("No such texture: "+t);let o,a=r.a.context,_=n.images[0].img,c=n.width,l=n.height,u=function(e={}){let t=[];if("quads"===e.format){let n,r=Math.floor(e.points.length/4),i=0;for(n=0;n<r;n++)t.push([i+0,i+1,i+2],[i+2,i+3,i+0]),i+=4}return t}(e),h=s(e.points,e.modifier),p=u.length;for(o=0;o<p;o++){var d=u[o],f=h[d[0]].x,m=h[d[1]].x,g=h[d[2]].x,b=h[d[0]].y,w=h[d[1]].y,E=h[d[2]].y,y=h[d[0]].u*c,x=h[d[1]].u*c,D=h[d[2]].u*c,M=h[d[0]].v*l,v=h[d[1]].v*l,O=h[d[2]].v*l;a.save(),a.beginPath(),a.moveTo(f,b),a.lineTo(m,w),a.lineTo(g,E),a.closePath(),a.clip();var k=y*v+M*D+x*O-v*D-M*x-y*O,P=f*v+M*g+m*O-v*g-M*m-f*O,C=y*m+f*D+x*g-m*D-f*x-y*g,A=y*v*g+M*m*D+f*x*O-f*v*D-M*x*g-y*m*O,T=b*v+M*E+w*O-v*E-M*w-b*O,R=y*w+b*D+x*E-w*D-b*x-y*E,S=y*v*E+M*w*D+b*x*O-b*v*D-M*x*E-y*w*O;a.transform(P/k,T/k,C/k,R/k,A/k,S/k),a.drawImage(_,0,0),a.restore()}}(e):function(e={}){let t=s(e.points,e.modifier);if(t.length>0){let n,i=function(e={}){let t,n=[],r=Math.floor(e.points.length/4),i=0;for(t=0;t<r;t++,i+=4)n.push([i+0,i+1,i+2,i+3]);return n}(e),o=r.a.context;for(o.fillStyle=e.color||r.a.color,n=0;n<i.length;n++){let e,r=i[n],a=t[r[0]];for(o.beginPath(),o.moveTo(a.x,a.y),e=1;e<r.length;e++)a=t[r[e]],o.lineTo(a.x,a.y);o.closePath(),o.fill()}}}(e)}}function s(e,t){let n=[];return e.forEach(function(e){let r=Object.assign({},e,t.call(e));n.push(r)}),n}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"instanceCreate",function(){return instanceCreate}),__webpack_require__.d(__webpack_exports__,"instanceCreateMoving",function(){return instanceCreateMoving}),__webpack_require__.d(__webpack_exports__,"instanceDestroy",function(){return instanceDestroy}),__webpack_require__.d(__webpack_exports__,"instanceSetRotation",function(){return instanceSetRotation}),__webpack_require__.d(__webpack_exports__,"instanceSetDirection",function(){return instanceSetDirection}),__webpack_require__.d(__webpack_exports__,"changeSprite",function(){return changeSprite}),__webpack_require__.d(__webpack_exports__,"instanceChangeSprite",function(){return changeSprite}),__webpack_require__.d(__webpack_exports__,"soundPlay",function(){return soundPlay}),__webpack_require__.d(__webpack_exports__,"soundStop",function(){return soundStop}),__webpack_require__.d(__webpack_exports__,"drawSetColor",function(){return drawSetColor}),__webpack_require__.d(__webpack_exports__,"drawSetFont",function(){return drawSetFont}),__webpack_require__.d(__webpack_exports__,"drawSetFontSize",function(){return drawSetFontSize}),__webpack_require__.d(__webpack_exports__,"drawText",function(){return drawText}),__webpack_require__.d(__webpack_exports__,"drawSelf",function(){return drawSelf}),__webpack_require__.d(__webpack_exports__,"instanceDrawSelf",function(){return drawSelf}),__webpack_require__.d(__webpack_exports__,"drawSprite",function(){return drawSprite}),__webpack_require__.d(__webpack_exports__,"roomEnter",function(){return roomEnter}),__webpack_require__.d(__webpack_exports__,"roomNext",function(){return roomNext}),__webpack_require__.d(__webpack_exports__,"roomPrevious",function(){return roomPrevious}),__webpack_require__.d(__webpack_exports__,"blockBegin",function(){return blockBegin}),__webpack_require__.d(__webpack_exports__,"blockEnd",function(){return blockEnd}),__webpack_require__.d(__webpack_exports__,"exitEvent",function(){return exitEvent}),__webpack_require__.d(__webpack_exports__,"set",function(){return actionSet}),__webpack_require__.d(__webpack_exports__,"get",function(){return actionGet}),__webpack_require__.d(__webpack_exports__,"test",function(){return actionTest}),__webpack_require__.d(__webpack_exports__,"actionTest",function(){return actionTest}),__webpack_require__.d(__webpack_exports__,"setGravity",function(){return setGravity}),__webpack_require__.d(__webpack_exports__,"jump",function(){return actionJump}),__webpack_require__.d(__webpack_exports__,"jumpRandom",function(){return actionJumpRandom}),__webpack_require__.d(__webpack_exports__,"moveFree",function(){return moveFree}),__webpack_require__.d(__webpack_exports__,"moveDirect",function(){return moveDirect}),__webpack_require__.d(__webpack_exports__,"moveSpeedX",function(){return moveSpeedX}),__webpack_require__.d(__webpack_exports__,"moveSpeedY",function(){return moveSpeedY}),__webpack_require__.d(__webpack_exports__,"moveReverseX",function(){return moveReverseX}),__webpack_require__.d(__webpack_exports__,"moveReverseY",function(){return moveReverseY}),__webpack_require__.d(__webpack_exports__,"actionWrap",function(){return actionWrap}),__webpack_require__.d(__webpack_exports__,"actionConfine",function(){return actionConfine}),__webpack_require__.d(__webpack_exports__,"wrap",function(){return actionWrap}),__webpack_require__.d(__webpack_exports__,"confine",function(){return actionConfine}),__webpack_require__.d(__webpack_exports__,"func",function(){return actionFunc}),__webpack_require__.d(__webpack_exports__,"script",function(){return script}),__webpack_require__.d(__webpack_exports__,"code",function(){return code}),__webpack_require__.d(__webpack_exports__,"message",function(){return message}),__webpack_require__.d(__webpack_exports__,"alert",function(){return alert}),__webpack_require__.d(__webpack_exports__,"confirm",function(){return confirm}),__webpack_require__.d(__webpack_exports__,"GAME",function(){return GAME});var _room__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_Sound__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),_draw__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_instance__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_input__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_math__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4),_sprite__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),_canvas__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7),_color__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20),_main__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(15),_camera__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(13),_App__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18),_data_grid__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9),_tilemap__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(24),_tween__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(16),_transition__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(8),_drawing_primitive__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(22);function actionSet(e,t,n){n?this[e]+=t:this[e]=t}function actionTest(e,t,n){switch(t){case"!==":return this[e]!==n;case"===":return this[e]===n;case"!=":return this[e]!=n;case"==":return this[e]==n;case"<":return this[e]<n;case">":return this[e]>n;case"<=":return this[e]<=n;case">=":return this[e]>=n;default:return!1}}function setGravity(e){this.gravity=e}function actionJump(e,t,n){n?(this.x+=Number(e),this.y+=Number(t)):(this.x=Number(e),this.y=Number(t))}function actionJumpRandom(){this.x=Math.floor(641*Math.random())+0,this.y=Math.floor(481*Math.random())+0}function moveFree(e,t){this.speed=e,this.direction=t}function moveDirect(e,t){this.x+=e*_main__WEBPACK_IMPORTED_MODULE_9__.a.dt,this.y+=t*_main__WEBPACK_IMPORTED_MODULE_9__.a.dt}function moveSpeedX(e){this.speedX=Number(e)}function moveSpeedY(e){this.speedY=Number(e)}function moveReverseX(){this.speedX=-this.speedX}function moveReverseY(){this.speedY=-this.speedY}function actionWrap(){let e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room__WEBPACK_IMPORTED_MODULE_0__.a.current,r=n.width,i=n.height;this.boxRight<0&&(this.x+=r+e),this.boxBottom<0&&(this.y+=i+t),this.boxLeft>r&&(this.x-=r+e),this.boxTop>i&&(this.y-=i+t)}function actionConfine(){let e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room__WEBPACK_IMPORTED_MODULE_0__.a.current,r=n.width,i=n.height;this.boxLeft<0&&(this.x=0),this.boxTop<0&&(this.y=0),this.boxRight>r&&(this.x=r-e),this.boxBottom>i&&(this.y=i-t)}function actionFunc(e,...t){e.apply(this,t)}function script(e,t){console.log(window[e],t),window[e].apply(this,t)}function code(code){if("string"==typeof code)try{eval(code)}catch(e){console.error(e.message)}else console.error("runCode(code); code must be a string!")}function actionGet(...e){console.log(this[e].toFixed(2))}let GAME={main:{setGameSpeed:_main__WEBPACK_IMPORTED_MODULE_9__.a.setGameSpeed},instance:{create:_instance__WEBPACK_IMPORTED_MODULE_3__.a.create,createMoving:_instance__WEBPACK_IMPORTED_MODULE_3__.a.createMoving,destroy:_instance__WEBPACK_IMPORTED_MODULE_3__.a.destroy,find:_instance__WEBPACK_IMPORTED_MODULE_3__.a.find,findRandom:_instance__WEBPACK_IMPORTED_MODULE_3__.a.findRandom,count:_instance__WEBPACK_IMPORTED_MODULE_3__.a.count,mouseOn:_instance__WEBPACK_IMPORTED_MODULE_3__.a.mouseOn},draw:Object.assign(_draw__WEBPACK_IMPORTED_MODULE_2__.a,{self:_instance__WEBPACK_IMPORTED_MODULE_3__.a.drawSelf,debug:_instance__WEBPACK_IMPORTED_MODULE_3__.a.drawDebug}),Canvas:_canvas__WEBPACK_IMPORTED_MODULE_7__.a,color:_color__WEBPACK_IMPORTED_MODULE_8__.a,sprite:{create:_sprite__WEBPACK_IMPORTED_MODULE_6__.a.create,addFrame:_sprite__WEBPACK_IMPORTED_MODULE_6__.a.addFrame,tint:_sprite__WEBPACK_IMPORTED_MODULE_6__.a.tint,get:_sprite__WEBPACK_IMPORTED_MODULE_6__.a.get,cache:_sprite__WEBPACK_IMPORTED_MODULE_6__.a.cache},Sound:_Sound__WEBPACK_IMPORTED_MODULE_1__.a,Room:_room__WEBPACK_IMPORTED_MODULE_0__.a,input:{keyboard:_input__WEBPACK_IMPORTED_MODULE_4__.a.keyboard,mouse:_input__WEBPACK_IMPORTED_MODULE_4__.a.mouse,touch:_input__WEBPACK_IMPORTED_MODULE_4__.a.touch},math:_math__WEBPACK_IMPORTED_MODULE_5__.a,Camera:_camera__WEBPACK_IMPORTED_MODULE_10__.a,App:_App__WEBPACK_IMPORTED_MODULE_11__.a,Grid:_data_grid__WEBPACK_IMPORTED_MODULE_12__.a,Tilemap:_tilemap__WEBPACK_IMPORTED_MODULE_13__.a,tween:_tween__WEBPACK_IMPORTED_MODULE_14__.a,Transition:_transition__WEBPACK_IMPORTED_MODULE_15__.a,Primitive:_drawing_primitive__WEBPACK_IMPORTED_MODULE_16__.a},blockBegin="blockBegin",blockEnd="blockEnd",exitEvent="exitEvent",roomEnter=_room__WEBPACK_IMPORTED_MODULE_0__.a.enter,roomNext=_room__WEBPACK_IMPORTED_MODULE_0__.a.next,roomPrevious=_room__WEBPACK_IMPORTED_MODULE_0__.a.previous,instanceCreate=_instance__WEBPACK_IMPORTED_MODULE_3__.a.create,instanceCreateMoving=_instance__WEBPACK_IMPORTED_MODULE_3__.a.createMoving,instanceDestroy=_instance__WEBPACK_IMPORTED_MODULE_3__.a.destroy,changeSprite=_instance__WEBPACK_IMPORTED_MODULE_3__.a.changeSprite,instanceSetRotation=_instance__WEBPACK_IMPORTED_MODULE_3__.a.setRotation,instanceSetDirection=_instance__WEBPACK_IMPORTED_MODULE_3__.a.setDirection,message=console.log,alert=function(e){window.alert(e)},confirm=function(e){return window.confirm(e)},drawSetColor=_draw__WEBPACK_IMPORTED_MODULE_2__.a.setColor,drawSetFont=_draw__WEBPACK_IMPORTED_MODULE_2__.a.setFont,drawSetFontSize=_draw__WEBPACK_IMPORTED_MODULE_2__.a.setFontSize,drawText=_draw__WEBPACK_IMPORTED_MODULE_2__.a.text,drawSelf=_instance__WEBPACK_IMPORTED_MODULE_3__.a.drawSelf,drawSprite=_draw__WEBPACK_IMPORTED_MODULE_2__.a.sprite,soundPlay=function(e,t){_Sound__WEBPACK_IMPORTED_MODULE_1__.a.play(e,{loop:t})},soundStop=_Sound__WEBPACK_IMPORTED_MODULE_1__.a.stop},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(6),i=n(9),o=n(1),a=n(2);class s{constructor(e={}){this.textureAtlas=e.atlas||null,this.tileWidth=e.tileWidth||16,this.tileHeight=e.tileHeight||16,this.tileSpacing=e.tileSpacing||0,this.tileOverlay=e.tileOverlay||0,this.tilesWide=e.tilesWide||16,this.mapWidth=e.mapWidth||16,this.mapHeight=e.mapHeight||16,this.layers={},this.__gap=this.tileSpacing+this.tileOverlay,this.textureAtlas&&(this.__atlas=a.a.get(this.textureAtlas).images[0].img)}set(e,t,n,r){this.layers[e]||(this.layers[e]=new i.a(this.mapWidth,this.mapHeight)),this.layers[e].set(t,n,r)}draw(e){const t=this.__atlas,n=this.tileWidth,r=this.tileHeight,i=this.tilesWide,a=this.__gap,s=this.tileOverlay,_=n+2*s,c=r+2*s,l=e.order||Object.keys(this.layers),u=~~Math.max(0,(e.left||0)/n),h=~~Math.max(0,(e.top||0)/r),p=Math.ceil(Math.min(this.mapWidth,(e.right||0)/n)),d=Math.ceil(Math.min(this.mapHeight,(e.bottom||0)/r));let f,m,g,b,w,E,y;for(g=0;g<l.length;g++)for(b=this.layers[l[g]],f=u;f<p;f++)for(m=h;m<d;m++)(w=b.get(f,m)-1)>=0&&(E=w%i*(n+2*a)+a,y=~~(w/i)*(r+2*a)+a,o.a.context.drawImage(t,E-s,y-s,_,c,f*n-s,m*r-s,_,c))}}r.a.classStaticMatch(s),s.prototype.assetType="tilemap"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Compiler});var _global_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),_sprite_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_Sound__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_room_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3);class Compiler{static actionExpression(exp){if(!isNaN(Number(exp)))return Number(exp);if(Compiler.isBoolean(exp))return!0===exp||"true"===exp;if(Compiler.isFunction(exp)||Compiler.isOperator(exp)||Compiler.isResource(exp)||Compiler.isCss(exp))return exp;if(console.log(exp),Compiler.isString(exp))return exp.slice(1,-1);if("string"==typeof exp){let n,string="",sIndex=-1,newArr=[];for(n=0;n<exp.length;n++){let e=exp.charAt(n);switch(e){case"'":-1===sIndex?sIndex=n+1:(newArr.push("'"+exp.slice(sIndex,n)+"'"),sIndex=-1);break;default:-1===sIndex&&" "!==e&&(Compiler.splitCharacters.includes(e)?(""!==string&&(newArr.push(string),string=""),newArr.push(e)):string+=e)}}""!==string&&(newArr.push(string),string="");let y="";return newArr.forEach(e=>{let t=parseInt(e);if(isNaN(t)){let t=e.charAt(0);"'"===t?y+=e:Compiler.splitCharacters.includes(t)?y+=e:"fps"===e?y+=_global_js__WEBPACK_IMPORTED_MODULE_0__.a.fps:Compiler.isResource(e)||!Compiler.isSingleWord(e)||Compiler.isString(e)||Compiler.isArray(e)?y+=e:y+="this."+e}else y+=e}),console.log(y),eval(y)}return exp}static isResource(e){return _object_js__WEBPACK_IMPORTED_MODULE_1__.a.names.includes(e)||_sprite_js__WEBPACK_IMPORTED_MODULE_2__.a.names.includes(e)||_Sound__WEBPACK_IMPORTED_MODULE_3__.a.names.includes(e)||_room_js__WEBPACK_IMPORTED_MODULE_4__.a.names.includes(e)||"Say"===e}static isArray(e){return"["===e.charAt(0)}static isString(e){return'"'===e.charAt(0)}static isSingleWord(e){return!e.includes(".")}static isFunction(e){return"function"==typeof e}static isBoolean(e){return Compiler.booleans.includes(e)}static isOperator(e){return Compiler.assignmentOperators.includes(e)}static isCss(e){return"#"===e.charAt(0)}}Compiler.booleans=[!0,!1,"true","false"],Compiler.assignmentOperators=["<",">","<=",">=","==","===","!=","!=="],Compiler.splitCharacters=["+","-","=","!"]},function(e,t,n){"use strict";n.r(t);var r=n(18);n.d(t,"App",function(){return r.a});var i=n(15);n.d(t,"main",function(){return i.a});var o=n(7);n.d(t,"canvas",function(){return o.a});var a=n(13);n.d(t,"Camera",function(){return a.a});var s=n(3);n.d(t,"Room",function(){return s.a});var _=n(5);n.d(t,"input",function(){return _.a});var c=n(2);n.d(t,"sprite",function(){return c.a});var l=n(10);n.d(t,"Sound",function(){return l.a});var u=n(11);n.d(t,"object",function(){return u.a});var h=n(21);n.d(t,"event",function(){return h.a});var p=n(23);n.d(t,"action",function(){return p});var d=n(0);n.d(t,"instance",function(){return d.a});var f=n(1);n.d(t,"draw",function(){return f.a});var m=n(4);n.d(t,"math",function(){return m.a});var g=n(16);n.d(t,"tween",function(){return g.a});var b=n(8);n.d(t,"Transition",function(){return b.a});n(22);var w=n(17);n.d(t,"Font",function(){return w.a});var E=n(9);n.d(t,"Grid",function(){return E.a})}])});
//# sourceMappingURL=GameBeans.js.map