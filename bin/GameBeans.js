!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GameBeans",[],t):"object"==typeof exports?exports.GameBeans=t():e.GameBeans=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=25)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,o,r,i,a,s,u){if(i)for(var l=~~e,c=0;c<n.length;c++){var f=o[n[c]],d=f.left,p=f.top,h=f.right-f.left,_=f.bottom-f.top;r.drawImage(a,d,p,h,_,l,t,h*s,_*s),l+=(h+1)*s}else r[u](n,e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=o(a),u=n(2),l=o(u),c=n(3),f=o(c),d=n(11),p=o(d),h={color:"#FFFFFF",font:"Arial",fontSize:30,textAlign:"start",textBaseline:"alphabetic",target:null,context:null,defaultTransform:[1,0,0,1,0,0],targetStack:[],imageSmoothing:!1,offsetX:0,offsetY:0,setTarget:function(e){h.targetStack.push(h.target),h.target=e,h.context=e.domElement.getContext("2d")},resetTarget:function(){var e=h.targetStack.pop();h.target=e,h.context=e.domElement.getContext("2d")},getTarget:function(){return h.target},clear:function(e){f.default.fill(h.target,e)},save:function(){h.context.save()},restore:function(){h.context.restore()},reset:function(){var e;h.context.imageSmoothingEnabled=h.imageSmoothing,(e=h.context).setTransform.apply(e,r(h.defaultTransform)),h.context.globalAlpha=1},setImageSmoothing:function(e){h.imageSmoothing=e},transform:{scale:function(e,t){h.context.scale(e,t)},rotate:function(e){h.context.rotate(e*s.default.DEGTORAD)},translate:function(e,t){h.offsetX=e,h.offsetY=t,h.context.translate(e,t)},setDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h.defaultTransform;e.scaleX&&(t[0]=e.scaleX),e.skewX&&(t[1]=e.skewX),e.skewY&&(t[2]=e.skewY),e.scaleY&&(t[3]=e.scaleY),e.moveX&&(t[4]=e.moveX),e.moveY&&(t[5]=e.moveY)}},setColor:function(e){"string"==typeof e?h.color=e:"r"in e&&"g"in e&&"b"in e?h.color="a"in e?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")":"h"in e&&"s"in e&&"l"in e&&(h.color="a"in e?"hsla("+e.h+","+e.s+"%,"+e.l+"%,"+e.a+")":"hsl("+e.h+","+e.s+"%,"+e.l+"%)")},sprite:function(e,t,n,o,r,i,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};e=l.default.get(e);var c=h.context,f=e.originX,d=e.originY;void 0!==u.originX&&(f=u.originX),void 0!==u.originY&&(d=u.originY),c.save(),c.translate(n,o),c.rotate(a*s.default.DEGTORAD),c.scale(r,i),t=Math.floor(t||0)%e.images.length;var p=e.images[t],_=p.img;c.drawImage(_,p.clip.x,p.clip.y,p.clip.w,p.clip.h,-f,-d,e.width,e.height),c.restore()},spriteTiled:function(e,t,n,o,r,i){e=l.default.get(e);var a=void 0,s=void 0,u=void 0,c=void 0;for(u=0,a=n;u<r;u++,a+=e.width)for(c=0,s=o;c<i;c++,s+=e.height)drawSprite(e,t,a,s,1,1,0)},canvas:function(e,t,n){h.context.drawImage(e.domElement,t,n)},setFont:function(e,t,n,o){e="string"==typeof e?e:e.name,h.font=e,h.fontSize=t,h.textAlign=n,h.textBaseline=o;var r=h.context;r.font=t+"px "+e,r.textAlign=n,r.textBaseline=o},text:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=Number(t),n=Number(n);var r=void 0,a=void 0,s=void 0,u=!1,l=p.default.get(h.font);l&&"bitmap"===l.method&&(u=!0,a=l.bitmapFont.lookup,r=l.bitmapFont.image,s=h.fontSize/l.bitmapFont.size);var c=h.context,f="fillText";o.stroke?(c.strokeStyle=o.strokeColor||h.color,c.lineWidth=o.lineWidth||2,f="strokeText"):c.fillStyle=h.color;var d=void 0,_=t,m=0,v=e.toString().length;o.pattern&&(m=o.pattern.start,v=o.pattern.end);for(var g=1.2*c.measureText("M").width,y=e.toString().split("#"),b=0;b<y.length;b++){if(o.maxWidth){for(var w=y[b].split(" "),x="",S=0;S<w.length;S++){var C=x+w[S]+" ";if(c.measureText(C).width>o.maxWidth&&S>0){var E=x.slice(0,m),A=x.slice(m,v);_+=c.measureText(E).width,0<v&&i(_,n,A,a,c,u,r,s,f),d=C.length,m-=d,v-=d,x=w[S]+" ",n+=g,_=t}else x=C}var j=x.slice(0,m),D=x.slice(m,v);_+=c.measureText(j).width,i(_,n,D,a,c,u,r,s,f),d=x.length}else{var M=y[b].slice(0,m),k=y[b].slice(m,v);_+=c.measureText(M).width,i(~~_,n,k,a,c,u,r,s,f),d=y[b].length}_=t,n+=g,m-=d,v-=d}},shape:{line:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=h.context;i.strokeStyle=r.color||h.color,i.beginPath(),i.moveTo(e,t),i.lineTo(n,o),i.stroke()},ellipse:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=h.context;i.save(),i.beginPath(),i.translate(e-n,t-o),i.scale(n,o),i.arc(1,1,1,0,2*Math.PI,!1),i.restore();var a=void 0;if(r.healthbar){var s=r.healthbar.amount||1,u=r.healthbar.color||"#0F0",l=r.healthbar.background||"#F00";a=i.createLinearGradient(e-n,0,e+n,0),a.addColorStop(0,u),a.addColorStop(s,u),a.addColorStop(s,l),a.addColorStop(1,l)}else a=r.color||h.color;r.fill||r.stroke||(r.fill=!0),r.fill&&(i.fillStyle=a,i.fill()),r.stroke&&(i.strokeStyle=a,i.lineWidth=r.lineWidth||1,i.stroke())},rectangle:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=h.context;i.beginPath(),i.rect(e,t,n,o);var a=void 0;if(r.healthbar){var s=r.healthbar.amount||1,u=r.healthbar.color||"#0F0",l=r.healthbar.background||"#F00";a=i.createLinearGradient(e,0,e+n,0),a.addColorStop(0,u),a.addColorStop(s,u),a.addColorStop(s,l),a.addColorStop(1,l)}else a=r.color||h.color;r.fill||r.stroke||(r.fill=!0),r.fill&&(i.fillStyle=a,i.fill()),r.stroke&&(i.strokeStyle=a,i.lineWidth=r.lineWidth||1,i.stroke())}}};t.default=h},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){o(this,e)}return e.classStaticMatch=function(t){t.create=e.functionFromConstructor(t);var n=t.get;for(var o in t.prototype)t[o]=e.functionFromMethod(t.prototype[o],n)},e.functionFromConstructor=function(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(n)))}},e.functionFromMethod=function(e,t){return t?function(n){for(var o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return e.call.apply(e,[t(n)].concat(r))}:function(){return e.call.apply(e,arguments)}},e.arrayExecute=function(e,t){return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.forEach(function(e){return t.call.apply(t,[e].concat(o))})}},e}();t.default=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return"Sprite_"+p.array.length}function a(e,t){for(var n=e.length,o=t.r/255,r=t.g/255,i=t.b/255,a=0;a<n;a+=4)e[a]=o*e[a]>>0,e[a+1]=r*e[a+1]>>0,e[a+2]=i*e[a+2]>>0}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n(1),c=o(l),f=n(16),d=o(f),p=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var o=void 0;n.atlas&&(o=n.atlasIndex||0,n.atlas.images[o]),this.assetType="sprite",this.name=n.name||i(),this.originX=n.originX||0,this.originY=n.originY||0,this.width=0,this.height=0,this.images=[],n.frames&&n.frames.forEach(function(e){t.addFrame({source:e.src})});var a=e.array.length;e.names[a]=this.name,e.array[a++]=this}return e.prototype.addFrame=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=void 0;n.atlas&&(o=e.get(n.atlas).images[0].img);var r={img:o||new Image,clip:null,ready:!1};n.source&&(r.img.onload=function(){r.clip={x:0,y:0,w:r.img.width,h:r.img.height},t.width*t.height==0&&(t.width=r.clip.w,t.height=r.clip.h),r.ready=!0},r.img.src=n.source||""),o&&n.clip&&(r.clip=n.clip,this.width*this.height==0&&(this.width=r.clip.w,this.height=r.clip.h),r.ready=!0),this.images.push(r)},e.prototype.cache=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.images.forEach(function(t){var n=document.createElement("CANVAS");n.width=e.width||t.img.width,n.height=e.height||t.img.height,n.getContext("2d").drawImage(t.img,0,0,n.width+1,n.height+1),t.__orig=u({},t),t.clip.x=0,t.clip.y=0,t.clip.w=n.width,t.clip.h=n.height,t.img=n})},e.prototype.restore=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.images.forEach(function(e){e.__orig&&(e=e._orig),e.__origSrc&&(e.img.src=e.__origSrc)})},e.prototype.setOrigin=function(e,t){this.originX=Number(e),this.originY=Number(t)},e.prototype.tint=function(e){var t=this;this.images.forEach(function(n){var o=document.createElement("CANVAS"),r=o.getContext("2d");o.width=t.width,o.height=t.height,n.img=n.__orig||n.img,r.drawImage(n.img,0,0);var i=r.getImageData(0,0,o.width,o.height),u="object"===(void 0===e?"undefined":s(e))?e:d.default.hexToRgb(e);a(i.data,u),r.putImageData(i,0,0),n.__orig=n.img,n.__origSrc=n.img.src,n.img=o})},e.readyAll=function(){for(var t=0;t<e.array.length;t++)for(var n=e.array[t],o=0;o<n.images.length;o++){var r=n.images[o];if(!r.ready)return!1}return!0},e.get=function(t){if("object"===(void 0===t?"undefined":s(t)))return t;for(var n=0;n<e.array.length;n++)if(e.array[n].name===t)return e.array[n];return null},e}();c.default.classStaticMatch(p),p.names=[],p.array=[],t.default=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),s=o(a),u=n(1),l=o(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=document.createElement("CANVAS"),o=n.getContext("2d");this.domElement=n,this.context=o,this.width=t.width||300,this.height=t.height||150,n.scale=t.scale||1,n.application=t.application||!1,t.crisp2D&&(o.imageSmoothingEnabled=!1),n.application&&(s.default.setTarget(this),e.setMain(this)),n.oncontextmenu=function(e){return e.preventDefault()},e.array.push(this)}return e.prototype.setMain=function(){var t=this.domElement;if(e.main=this,null===e.dom){e.dom=t;(document.getElementById("gbgamebox")||document.body).appendChild(t)}},e.getMain=function(){return e.main},e.prototype.fill=function(e){var t=this.domElement,n=this.context;n.fillStyle=e||"#000000",n.fillRect(0,0,t.width/t.scale,t.height/t.scale)},e.prototype.clear=function(){var e=this.domElement;this.context.clearRect(0,0,e.width/e.scale,e.height/e.scale)},e.prototype.getPixel=function(e,t){return this.context.getImageData(e,t,1,1).data},i(e,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this.domElement.width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this.domElement.height=e}}]),e}();l.default.classStaticMatch(c),c.array=[],c.main=null,c.dom=null,t.default=c},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_math=__webpack_require__(5),_math2=_interopRequireDefault(_math),_input=__webpack_require__(9),_input2=_interopRequireDefault(_input),_object=__webpack_require__(10),_object2=_interopRequireDefault(_object),_sprite=__webpack_require__(2),_sprite2=_interopRequireDefault(_sprite),_draw=__webpack_require__(0),_draw2=_interopRequireDefault(_draw),_compile=__webpack_require__(28),_compile2=_interopRequireDefault(_compile),_global=__webpack_require__(12),_global2=_interopRequireDefault(_global);window.global=_global2.default;var instance=function(){function create(e,t,n){var o=_object2.default.get(e);return null===o?(window.addConsoleText("#F00","No such object as "+e),window._GB_stop(),null):new o(t,n)}function setup(e,t,n,o){e.id=uniqueId++,e.exists=!0,e.speed=0,e.object=t,e.objectName=t.objectName,e.assetType="instance",e.x=Number(n),e.y=Number(o),e.startX=e.x,e.startY=e.y,e.previousX=e.x,e.previousY=e.y,e.boxCollision={};var r=_sprite2.default.get(e.sprite);r&&(e.boxCollision.x=r.originX,e.boxCollision.y=r.originY,e.boxCollision.width=r.width,e.boxCollision.height=r.height),addToArray(e),updateBoundingBox(e),updateCollisionBox(e),executeEvent(e,"create")}function addToArray(e){for(var t=instanceArray.length;t--;)if(e.depth<=instanceArray[t].depth)return void instanceArray.splice(t,0,e);instanceArray.push(e)}function createMoving(e,t,n,o,r){if(instanceArray.length>=instanceHardLimit)return void console.warn("instance number hard limit reached:",instanceHardLimit);var i=create(e,t,n);return i.speed=o,i.direction=r,i}function find(e,t){"function"==typeof e&&(e=e.objectName);var n=void 0,o=0,r=void 0;for(n=0;n<instanceArray.length;n++)if(r=instanceArray[n],r.objectName===e&&o++===t)return r;return null}function findRandom(e){return"function"==typeof e&&(e=e.objectName),find(e,_math2.default.randomInt(0,count(e)-1))}function count(e){var t=0;return instanceArray.forEach(function(n){t+=n.objectName===e}),t}function setRotation(e,t){this.rotation=t?this.rotation+e:e}function setDirection(e,t){this.direction=t?this.direction+e:e}function mouseOn(e){return!(e.boxTop>_input2.default.mouse.y/2-_draw2.default.offsetY||e.boxBottom<_input2.default.mouse.y/2-_draw2.default.offsetY||e.boxLeft>_input2.default.mouse.x/2-_draw2.default.offsetX||e.boxRight<_input2.default.mouse.x/2-_draw2.default.offsetX)}function step(e){executeEvent(e,"step"),updateAnimation(e),updatePosition(e),updateBoundingBox(e),updateCollisionBox(e),instanceExecuteListeners(e),_input2.default.triggerEvents.forEach(function(t){executeEvent(e,t)})}function updateAnimation(e){e.index+=e.imageSpeed;var t=_sprite2.default.get(e.sprite);if(t){var n=t.images.length;if(e.index>=n){var o=e.animationBehavior,r=void 0===o?"undefined":_typeof(o);"string"===r?"loop"===o?e.index-=n:"stop"===o&&(e.index=n-1,e.imageSpeed=0):"function"===r&&o.call(e)}}}function updatePosition(e){var t={x:_math2.default.lengthDirX(e.terminal,e.gravityDirection),y:_math2.default.lengthDirY(e.terminal,e.gravityDirection)};(t.x>0&&e.speedX<=t.x||t.x<0&&e.speedX>=t.x)&&(e.speedX+=_math2.default.lengthDirX(e.gravity,e.gravityDirection)),(t.y>0&&e.speedY<=t.y||t.y<0&&e.speedY>=t.y)&&(e.speedY+=_math2.default.lengthDirY(e.gravity,e.gravityDirection)),e.x+=e.speedX,e.y+=e.speedY}function updateBoundingBox(e){var t=_sprite2.default.get(e.sprite);null!==t&&(e.boxTop=e.y-t.originY*e.scaleY,e.boxLeft=e.x-t.originX*e.scaleX,e.boxBottom=e.boxTop+t.height*e.scaleY,e.boxRight=e.boxLeft+t.width*e.scaleX)}function updateCollisionBox(e){var t=e.boxCollision;t.top=e.y-t.y*e.scaleY,t.left=e.x-t.x*e.scaleX,t.bottom=t.top+t.height*e.scaleY,t.right=t.left+t.width*e.scaleX}function destroy(e){executeEvent(e,"destroy"),e.exists=!1;var t=e.object.instances.indexOf(e);e.object.instances.splice(t,1)}function draw(e){e.visible&&(e.events.draw?executeEvent(e,"draw"):drawSelf(e))}function drawSelf(e,t){null!==e.sprite&&_draw2.default.sprite(e.sprite,e.index,e.x,e.y,e.scaleX,e.scaleY,e.rotation,t)}function drawDebug(e){var t=e.boxCollision;_draw2.default.shape.rectangle(t.left,t.top,t.right-t.left,t.bottom-t.top,{color:"#FF000055"})}function changeSprite(e){this.sprite=e}function instanceExecuteListeners(e){e.listeners.forEach(function(t){switch(t.type){case"collision":instanceCollisionInstance(e,t.target)}})}function instanceCollisionInstance(e,t){var n=void 0;n="solid"===t?getAllSolid():_object2.default.getAllInstances(t);var o=e.boxCollision;n.forEach(function(n){if(e!==n){var r=n.boxCollision;o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top||executeEvent(e,"collision_"+t,n)}})}function executeEventAll(e,t){for(var n=instanceArray.length;n--;)executeEvent(instanceArray[n],e,t)}function executeEvent(e,t,n){otherStack.push(window.other),window.other=n,currentEvent=t;try{if(e.exists){var o=e.events[t];o&&executeActions(e,o,n)}}catch(n){return console.error(n),window.addConsoleText("#F00","Failed to execute event ["+t+"] of object ["+e.objectName+"] with error: "+n),window._GB_stop(),!1}window.other=otherStack.pop()}function executeActions(inst,actions,otherInst){for(var steps=[],condition=!0,scope=0,_loop=function _loop(a){var action=actions[a];switch(action.flow){case"":if(!condition)break;if(!action.cache){var args=action.args,n=void 0,newArgs=[];for(n=0;n<args.length;n++)if("function"==typeof args[n])newArgs[n]=args[n];else switch(args[n]){case"self":newArgs[n]=inst;break;case"other":newArgs[n]=otherInst;break;default:newArgs[n]=_compile2.default.actionExpression.call(inst,args[n])}if(newArgs.includes(void 0))return window.addConsoleText("#F00","["+inst.objectName+"] > ["+currentEvent+"] > ["+action.action.name+"] Action contains undefined values!"),window._GB_stop(),{v:!1};action.cache=function(){if("function"==typeof newArgs[0])return newArgs[0];var t=inst,f=action.action;return eval("\n\t\t\t\t\t\t\t\t(function() {\n\t\t\t\t\t\t\t\t\treturn f.call(this, "+newArgs.join(",")+");\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t")}()}condition=action.cache.call(inst),void 0===condition?condition=!0:steps[scope]=0;break;case"blockBegin":scope++;break;case"blockEnd":scope--;break;case"exitEvent":if(condition)return{v:!1}}1==steps[scope]++&&(condition=!0)},a=0;a<actions.length;a++){var _ret=_loop(a);if("object"===(void 0===_ret?"undefined":_typeof(_ret)))return _ret.v}}function newStep(){instanceArray.slice().forEach(function(e){e.previousX=e.x,e.previousY=e.y})}function stepAll(){newStep();var e=instanceArray.slice();e.forEach(function(e){executeEvent(e,"stepBegin")}),e.forEach(step),e.forEach(function(e){executeEvent(e,"stepEnd")}),clearDestroyed()}function drawAll(){doDepthSort&&instanceArray.sort(sortFunction),instanceArray.forEach(draw)}function drawGuiAll(){instanceArray.forEach(function(e){executeEvent(e,"drawGUI")})}function sortFunction(e,t){return e.depth===t.depth?e.id-t.id:e.depth-t.depth}function clearDestroyed(){for(var e=instanceArray.length,t=e,n=void 0;n=instanceArray[--t];)n.exists||(n.object.pool.release(n),instanceArray[t]=instanceArray[--e]);instanceArray.length=e}function getAllSolid(){for(var e=[],t=instanceArray.length,n=void 0;n=instanceArray[--t];)n.solid&&e.push(n);return e}var uniqueId=1,instanceArray=[],instanceHardLimit=1e3,doDepthSort=!1,otherStack=[],currentEvent="";return{get instanceArray(){return instanceArray},set doDepthSort(e){doDepthSort=e},create:create,setup:setup,stepAll:stepAll,drawAll:drawAll,drawGuiAll:drawGuiAll,executeEventAll:executeEventAll,changeSprite:changeSprite,createMoving:createMoving,destroy:destroy,drawSelf:drawSelf,setDirection:setDirection,setRotation:setRotation}}();exports.default=instance},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={PI:Math.PI,RADTODEG:180/Math.PI,DEGTORAD:Math.PI/180,cos:Math.cos,sin:Math.sin,sign:Math.sign,randomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},choose:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},lengthDir:function(e,t){return t*=o.DEGTORAD,[Math.cos(t)*e,Math.sin(t)*e]},lengthDirX:function(e,t){return Math.cos(t*o.DEGTORAD)*e},lengthDirY:function(e,t){return Math.sin(t*o.DEGTORAD)*e},pointDistance:function(e,t,n,o){var r=e-n,i=t-o;return Math.sqrt(r*r+i*i)},pointDirection:function(e,t,n,r){return(Math.atan2(r-t,n-e)*o.RADTODEG+360)%360},angleDifference:function(e,t){var n=(t-e)%360;return n<=-180?n+=360:n>180&&(n-=360),n}};t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),s=o(a),u=n(8),l=o(u),c=n(4),f=o(c),d=n(2),p=o(d),h=n(0),_=o(h),m=function(){function e(t,n,o){r(this,e),this.name=t,this.width=Number(n),this.height=Number(o),this.background=null,this.backgroundMethod="no-repeat",this.backgroundColor="#FF0000",this.instances=[],e.names.push(t),e.array.push(this),null===e.current&&(e.current=this)}return e.prototype.setBackground=function(e){this.background=e},e.prototype.addInstance=function(e,t,n){"object"===(void 0===e?"undefined":i(e))&&(e=e.objectName),this.instances.push({name:e,x:t,y:n})},e.prototype.enter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.transition)return void new l.default({prefab:t.transition,callback:e.enter.bind(null,this)});f.default.executeEventAll("roomleave"),f.default.instanceArray.forEach(function(e){f.default.destroy(e,!1)}),e.current=this,this.instances.forEach(function(e){f.default.create(e.name,e.x,e.y)}),f.default.executeEventAll("roomenter")},e.prototype.draw=function(){var e=_.default.target.domElement,t=_.default.context;_.default.clear(this.backgroundColor);var n=p.default.get(this.background);if(null!==n){var o=n.images[0].img;if("stretch"===this.backgroundMethod)t.drawImage(o,0,0,e.width,e.height);else{var r=t.createPattern(o,this.backgroundMethod);t.fillStyle=r,t.fillRect(0,0,e.width,e.height)}}},e.next=function(){var t=e.array.indexOf(e.current);e.enter(e.array[t+1])},e.previous=function(){var t=e.array.indexOf(e.current);e.enter(e.array[t-1])},e.get=function(t){if("object"===(void 0===t?"undefined":i(t)))return t;for(var n=0;n<e.array.length;n++)if(e.array[n].name===t)return e.array[n];return null},e}();m.prototype.assetType="room",m.names=[],m.array=[],m.current=null,s.default.classStaticMatch(m),t.default=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),a=o(i),s=n(1),u=o(s),l=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var i=e.pool.get(this);return i.size=t*n,i.data=i===this?[]:i.data,i.data.length=i.size,i.width=t,i.height=n,i.clear(o.value||0),i}return e.prototype.get=function(e,t){return this.data[e+t*this.width]},e.prototype.set=function(e,t,n){this.data[e+t*this.width]=n},e.prototype.add=function(e,t,n){this.data[e+t*this.width]+=n},e.prototype.multiply=function(e,t,n){this.data[e+t*this.width]*=n},e.prototype.clear=function(e){this.data.fill(e)},e.prototype.destroy=function(){e.pool.release(this)},e}();t.default=l,l.pool=new a.default(l),u.default.classStaticMatch(l)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(0),s=o(a),u=n(26),l=o(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.type=t.type||"fade",this.time=t.time||60,this.color=t.color||"#000000",this.callback=t.callback||l.default,t.prefab&&i(this,t.prefab),this.direction=1,this.alpha=0,this.delta=1/this.time,e.allInstances.push(this),e.prefabs.hasOwnProperty(this.type)||(window.addConsoleText("#F00","Unknown transition type: "+this.type),this.type="fade")}return e.prototype.update=function(){e.prefabs.hasOwnProperty(this.type)&&e.prefabs[this.type].update.call(this)},e.prototype.draw=function(){e.prefabs.hasOwnProperty(this.type)&&e.prefabs[this.type].draw.call(this)},e.prototype.destroy=function(){var t=e.allInstances.indexOf(this);e.allInstances.splice(t,1)},e.create=function(t){return new e(t)},e.updateAll=function(){e.allInstances.forEach(function(e){e.update()})},e.drawAll=function(){e.allInstances.forEach(function(e){e.draw()})},e}();c.allInstances=[],c.prefabs={fade:{update:function(){this.alpha+=this.direction?this.delta:-this.delta,this.alpha>=1?(this.callback(),this.direction=0):this.alpha<=0&&this.destroy()},draw:function(){var e=s.default.context;e.globalAlpha=this.alpha,e.fillStyle=this.color,e.fillRect(0,0,9999999,9999999)}}},t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=o(i),s=n(19),u=o(s),l={pressed:[!1,!1,!1],down:[!1,!1,!1],released:[!1,!1,!1],wheelUp:!1,wheelDown:!1,rawX:0,rawY:0,x:0,y:0},c={pressed:{},down:{},released:{}},f={start:[],held:[],move:[],end:[],cancel:[],x:[],y:[]},d=function(){function e(){r(this,e)}return e.init=function(){e.initMouse(),e.initKeyboard(),e.initTouch(),e.element.addEventListener("contextmenu",function(e){e.preventDefault()})},e.initMouse=function(){var t=function(e){e.preventDefault(),l.pressed[e.button]||window.focus(),l.pressed[e.button]=!0,l.down[e.button]=!0},n=function(e){e.preventDefault(),l.pressed[e.button]=!1,l.released[e.button]=!0,l.down[e.button]=!1},o=function(e){var t=a.default.main.domElement,n=t.getBoundingClientRect(),o=t.width/n.width,r=t.height/n.height;l.rawX=e.clientX-n.left,l.rawY=e.clientY-n.top,l.x=~~l.rawX*o,l.y=~~l.rawY*r},r=function(e){e.preventDefault();var t=Math.max(-1,Math.min(1,e.wheelDelta));l.wheelUp=t>0,l.wheelDown=t<0};e.element.addEventListener("mousedown",t),e.element.addEventListener("mouseup",n),e.element.addEventListener("mousemove",o),e.element.addEventListener("mousewheel",r)},e.initKeyboard=function(){u.default.forEach(function(e){c.pressed[e]=!1,c.down[e]=!1,c.released[e]=!1});var t=function(e){e.preventDefault();var t=e.code||e.key;c.down[t]||(c.pressed[t]=!0,c.down[t]=!0)},n=function(e){e.preventDefault();var t=e.code||e.key;c.released[t]=!0,c.down[t]=!1};e.element.addEventListener("keydown",t),e.element.addEventListener("keyup",n)},e.initTouch=function(){var t=function(e){e.preventDefault(),!f.start[0]&&window.focus(),f.start[0]=!0,f.held[0]=!0},n=function(e){e.preventDefault(),f.start[0]=!1,f.end[0]=!0,f.held[0]=!1},o=function(e){e.preventDefault();var t=e.changedTouches;f.x[0]=t[0].pageX,f.y[0]=t[0].pageY};e.element.addEventListener("touchstart",t),e.element.addEventListener("touchend",n),e.element.addEventListener("touchcancel",n),e.element.addEventListener("touchmove",o)},e.getTriggerEvents=function(){var t=e.triggerEvents;t.length=0,Object.keys(c.down).forEach(function(e){u.default.includes(e)?(c.down[e]&&t.push(e),c.pressed[e]&&t.push(e+"Pressed"),c.released[e]&&t.push(e+"Released")):(console.warn("input key not supported: ",e),delete c.down[e])});for(var n=["Left","Middle","Right"],o=0;o<3;o++)l.down[o]&&t.push(n[o]+"Down"),l.pressed[o]&&t.push(n[o]+"Pressed"),l.released[o]&&t.push(n[o]+"Released");l.wheelUp&&t.push("WheelUp"),l.wheelDown&&t.push("WheelDown")},e.update=function(){Object.keys(c.down).forEach(function(e){c.pressed[e]=!1,c.released[e]=!1}),Object.keys(l.down).forEach(function(e){l.pressed[e]=!1,l.released[e]=!1}),Object.keys(f.held).forEach(function(e){f.start[e]=!1,f.end[e]=!1,f.held[e]=!1}),l.wheelUp=!1,l.wheelDown=!1},e}();d.element=document,d.triggerEvents=[],d.mouse=l,d.keyboard=c,d.touch=f,t.default=d},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_event=__webpack_require__(20),_event2=_interopRequireDefault(_event),_instance=__webpack_require__(4),_instance2=_interopRequireDefault(_instance),_objectVars=__webpack_require__(27),_objectVars2=_interopRequireDefault(_objectVars),_pool=__webpack_require__(17),_pool2=_interopRequireDefault(_pool),_generator=__webpack_require__(1),_generator2=_interopRequireDefault(_generator),GameObject=function(){function GameObject(e,t){_classCallCheck(this,GameObject);var n=function e(t,n){var o=e.pool.get(this);return _instance2.default.setup(o,e,t,n),e.instances.push(o),o};return _extends(n,GameObject.prototype),_objectVars2.default.set(n.prototype),n.objectName=e||"object_"+n.id,n.prototype.sprite=t||null,n.pool=new _pool2.default(n),n.instances=[],GameObject.names.push(n.objectName),GameObject.array.push(n),n}return GameObject.prototype.set=function(e,t){this.prototype[e]=t},GameObject.prototype.executeScript=function executeScript(){var closure=function(){eval(this.objectScript)}.call(this)},GameObject.prototype.eventAddAction=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var i=this;if("object"===(void 0===e?"undefined":_typeof(e)))return void Object.keys(e).forEach(function(t){e[t].forEach(function(e){GameObject.eventAddAction.apply(GameObject,[i,t].concat(_toConsumableArray(e)))})});if(void 0!==t){var a="";if("string"==typeof t&&(a=t),!this.prototype.events[e]&&(this.prototype.events[e]=[],e.includes("collision_"))){var s=e.indexOf("_")+1,u=e.slice(s,200);GameObject.addCollisionListener(this,u)}this.prototype.events[e].push({flow:a,action:t,args:o})}else console.warn("tried to add an undefined action to an event!")},GameObject.prototype.addCollisionListener=function(e){this.prototype.listeners.push({type:"collision",target:e})},GameObject.prototype.getAllInstances=function(){var e=this,t=[];return _instance2.default.instanceArray.forEach(function(n){n.constructor.objectName===e.objectName&&t.push(n)}),t},GameObject.get=function(e){if("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)return e;for(var t=GameObject.array.length;t--;)if(GameObject.array[t].objectName===e)return GameObject.array[t];return null},GameObject}();_generator2.default.classStaticMatch(GameObject),GameObject.prototype.assetType="object",GameObject.names=[],GameObject.array=[],exports.default=GameObject},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),s=o(a),u=n(7),l=o(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.name=t.name||"_UNNAMEDFONT",this.source=t.src||"",this.hasFontFace=!1,this.bitmapFont=t.bitmap||null,this.hasBitmapFont=null!==this.bitmap,this.method=t.method||"normal",t.apply&&this.applyCss(),e.names.push(this.name),e.array.push(this)}return e.prototype.getCss=function(){return"@font-face {\t\t\tfont-family: "+this.name+";\t\t\tsrc: url('"+this.source+"') format('truetype');\t\t}"},e.prototype.applyCss=function(){var e=document.createElement("STYLE");e.textContent=this.getCss(),document.head.appendChild(e)},e.prototype.convertToBitmapFont=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=3*(e.size||8),n=e.map||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=.5*t,r=o,i=e.alphaThreshold||150,a=e.color||[0,0,0,255],s=document.createElement("CANVAS");s.width=t/3*n.length,s.height=t/3;var u=s.getContext("2d"),c=u.createImageData(1,1);c.data.set(a,0);var f=document.createElement("CANVAS");f.width=f.height=t;var d=f.getContext("2d");d.font=t+"px "+this.name,console.log(d.font),d.textAlign="center",d.textBaseline="middle";for(var p=new l.default(t/3,t/3),h={},_=0;_<n.length;_++){d.clearRect(0,0,t,t),p.clear(-1);var m=n[_];d.fillStyle="#000000",d.fillText(m,o,r);var v,g=d.getImageData(0,0,f.width,f.height),y=g.data;for(v=0;v<y.length;v+=4){var b=~~(v/4%t/3),w=~~(~~(v/4/t)/3);-1===p.get(b,w)&&p.set(b,w,y[v+3])}var x={left:100,top:100,right:0,bottom:0},S=100,C=0,E=void 0,A=void 0;for(A=0;A<t/3;A++)for(E=0;E<t/3;E++)p.get(E,A)>i&&(x.left=Math.min(x.left,E),x.top=Math.min(x.top,A),x.right=Math.max(x.right,E+1),x.bottom=Math.max(x.bottom,A+1),S=Math.min(S,x.top),C=Math.max(C,x.bottom));for(A=0;A<t/3;A++)for(E=0;E<t/3;E++)p.get(E,A)>i&&u.putImageData(c,_*(t/3)+E,A);x.left+=_*(t/3),x.right+=_*(t/3),x.top=0,x.bottom=t/3,h[m]=x}h[" "]={left:-3,top:0,right:0,bottom:t/3},this.bitmapFont={size:t/3,lookup:h,image:s},this.method="bitmap",console.log(this.bitmapFont)},e.get=function(t){if(["object","function"].includes(void 0===t?"undefined":i(t))&&("object"===(void 0===t?"undefined":i(t))||"function"==typeof t))return t;for(var n=0;n<e.array.length;n++)if(e.array[n].name===t)return e.array[n];return null},e}();s.default.classStaticMatch(c),c.prototype.assetType="font",c.names=[],c.array=[],t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={fps:0};t.default=o},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){this.currentTime=0,this.play()}function i(){this.pause(),this.currentTime=0}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(){function e(t,n){var r=this;o(this,e),this.name=t,this.instances=[new Audio(n)],this.ready=!1,this.volume=1,e.names.push(t),e.array.push(this);var i=this.instances[0];i.oncanplaythrough=function(){r.ready=!0,i.oncanplaythrough=null}}return e.prototype.preload=function(e){for(var t=e-this.instances.length;t-- >0;){var n=this.instances[0].cloneNode();this.instances.push(n)}},e.prototype.play=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isEnabled){for(var n=void 0,o=0,a=this.instances.length;o<a;o++){var s=this.instances[o];if(s.paused){n=s;break}}n||(n=this.instances[0].cloneNode(),this.instances.push(n)),n.onError=function(e){console.error(soundName,e)},n.volume=this.volume;var u=n.play();return void 0!==u&&u.then(function(){n.onended=function(){(Number(t.loop||!1)?r:i).call(this),t.onEnd&&t.onEnd()}}).catch(function(e){console.warn(e)}),n}return null},e.prototype.stop=function(){for(var e=0,t=this.instances.length;e<t;e++){var n=this.instances[e];n.paused||i.call(n)}},e.readyAll=function(){for(var t=0,n=e.array.length;t<n;t++)if(!e.array[t].ready)return!1;return!0},e.enable=function(t){e.isEnabled=t},e.get=function(t){if("object"===(void 0===t?"undefined":a(t)))return t;for(var n=0,o=e.array.length;n<o;n++)if(e.array[n].name===t)return e.array[n];return window.addConsoleText("#F00","Unknown sound: "+t),null},s(e,[{key:"assetType",get:function(){return"sound"}}]),e}();l.default.classStaticMatch(c),c.isEnabled=!0,c.names=[],c.array=[],t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(6),s=o(a),u=n(0),l=o(u),c=n(1),f=o(c),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.x=0,this.y=0,this.angle=0,this.width=s.default.current.width,this.height=s.default.current.height,this.follow=null,this.gridLocked=!1,this.left=0,this.right=0,this.top=0,this.bottom=0,i(this,t),e.array.push(this)}return e.prototype.update=function(){if(this.follow){Array.isArray(this.follow)||(this.follow=[this.follow]);var e=0,t=0,n=0,o=1;this.follow.forEach(function(r){Array.isArray(r)?(o=r[1]||1,r=r[0]):o=1,e+=r.x*o,t+=r.y*o,n+=o}),this.x=e/n,this.y=t/n}this.left=this.x-.5*this.width,this.right=this.x+.5*this.width,this.top=this.y-.5*this.height,this.bottom=this.y+.5*this.height,l.default.transform.translate(-this.left,-this.top)},e}();d.array=[],d.create=f.default.functionFromConstructor(d),d.updateAll=f.default.arrayExecute(d.array,d.prototype.update),t.default=d},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(){o(this,e)}return e.setCursor=function(e){i.default.main.style.cursor=e},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,n){var r=o.componentToHex;return"#"+r(e)+r(t)+r(n)}};t.default=o},function(e,t,n){"use strict";function o(e){this.stack=[],this.length=0,this.newConstructor=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,o.prototype.get=function(e){return this.length&&(e=this.stack[--this.length],this.stack[this.length]=void 0),e||new this.newConstructor},o.prototype.release=function(e){this.stack[this.length++]=e}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){try{window._GB_stop&&h.default.triggerEvents.includes("EscapePressed")&&window._GB_stop(),window.requestAnimationFrame(r);var t=E+A,n=0;if(g.default.fps=1e3/(e-D),g.default.dt=e-D,D=e,e>t){var o=e-E,a=Math.floor(o/A);E+=A*a,n=Math.min(a,60)}h.default.getTriggerEvents(),i(n),s(),n&&h.default.update()}catch(e){console.error(e),window.addConsoleText("#F00","Error: "+e),window._GB_stop()}}function i(e){for(;e--;)a()}function a(){m.default.stepAll(),C.default.updateAll()}function s(){b.default.reset(),c.default.main.fill("#000000"),d.default.draw(d.default.current),x.default.updateAll(),m.default.drawAll(),b.default.reset(),m.default.drawGuiAll(),C.default.drawAll()}function u(){m.default.executeEventAll("resize")}Object.defineProperty(t,"__esModule",{value:!0});var l=n(3),c=o(l),f=n(6),d=o(f),p=n(9),h=o(p),_=n(4),m=o(_),v=n(12),g=o(v),y=n(0),b=o(y),w=n(14),x=o(w),S=n(8),C=o(S),E=performance.now(),A=1e3/60,j=0,D=0;window.addConsoleText=window.addConsoleText||console.log,window._GB_stop=window._GB_stop||function(){};var M={get dt(){return j},start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e.host&&""!==e.host){var t=window.parent?window.parent.location:window.location,n=t.hostname;e.host.split(" ").join("").split(",");if(!e.host.includes(n))return}var o=new c.default({width:d.default.current.width,height:d.default.current.height,crisp2D:!0,application:!0});e.enableMouse&&h.default.initMouse(),e.enableKeyboard&&h.default.initKeyboard(),e.enableTouch&&h.default.initTouch(),e.hideCursor&&(o.domElement.style.cursor="none"),d.default.enter(d.default.current),r(performance.now())},setGameSpeed:function(e){A=1e3/e}};window.addEventListener("resize",u),t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Space","Backspace","Escape","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9"];t.default=o},function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={};return e.forEach(function(e){n[e]=e+t}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(19),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s={create:"create",roomEnter:"roomEnter",roomLeave:"roomLeave",step:"step",draw:"draw",collision:"collision_",resize:"resize",keyboard:r({},o(a.default),{pressed:o(a.default,"Pressed"),released:o(a.default,"Released")})};t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){o(this,e)};t.default=r,r.names=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={blend:function(e,t,n){return e+(t-e)*n},cubicBezier:function(e,t,n,r,i){var a=o.blend(0,e,i),s=o.blend(0,t,i),u=o.blend(e,n,i),l=o.blend(t,r,i),c=o.blend(n,1,i),f=o.blend(r,1,i),d=o.blend(a,u,i),p=o.blend(s,l,i),h=o.blend(u,c,i),_=o.blend(l,f,i);o.blend(d,h,i);return o.blend(p,_,i)}};t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.texture,n=h.default.get(t);if(null===n)return void console.warn("No such texture: "+t);var o=d.default.context,r=n.images[0],i=r.img,a=n.width,l=n.height,c=u(e),f=void 0,p=s(e.points,e.modifier),_=c.length;for(f=0;f<_;f++){var m=c[f],v=p[m[0]].x,g=p[m[1]].x,y=p[m[2]].x,b=p[m[0]].y,w=p[m[1]].y,x=p[m[2]].y,S=p[m[0]].u*a,C=p[m[1]].u*a,E=p[m[2]].u*a,A=p[m[0]].v*l,j=p[m[1]].v*l,D=p[m[2]].v*l;o.save(),o.beginPath(),o.moveTo(v,b),o.lineTo(g,w),o.lineTo(y,x),o.closePath(),o.clip();var M=S*j+A*E+C*D-j*E-A*C-S*D,k=v*j+A*y+g*D-j*y-A*g-v*D,O=S*g+v*E+C*y-g*E-v*C-S*y,R=S*j*y+A*g*E+v*C*D-v*j*E-A*C*y-S*g*D,T=b*j+A*x+w*D-j*x-A*w-b*D,q=S*w+b*E+C*x-w*E-b*C-S*x,P=S*j*x+A*w*E+b*C*D-b*j*E-A*C*x-S*w*D;o.transform(k/M,T/M,O/M,q/M,R/M,P/M),o.drawImage(i,0,0),o.restore()}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s(e.points,e.modifier);if(t.length>0){var n=l(e),o=void 0,r=d.default.context;for(r.fillStyle=e.color||d.default.color,o=0;o<n.length;o++){var i=n[o],a=void 0,u=t[i[0]];for(r.beginPath(),r.moveTo(u.x,u.y),a=1;a<i.length;a++)u=t[i[a]],r.lineTo(u.x,u.y);r.closePath(),r.fill()}}}function s(e,t){var n=[];return e.forEach(function(e){var o=c({},e,t.call(e));n.push(o)}),n}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if("quads"===e.format){var n=Math.floor(e.points.length/4),o=void 0,r=0;for(o=0;o<n;o++)t.push([r+0,r+1,r+2],[r+2,r+3,r+0]),r+=4}return t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=Math.floor(e.points.length/4),o=void 0,r=0;for(o=0;o<n;o++,r+=4)t.push([r+0,r+1,r+2,r+3]);return t}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=n(0),d=o(f),p=n(2),h=o(p),_=function(){},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.points=t.points||[],this.texture=t.texture||null,this.color=t.color||"#000000",this.format=t.format||"quads",this.modifier=t.modifier||_,this.x=t.x||0,this.y=t.y||0}return e.prototype.draw=function(){e.draw(this)},e.create=function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},e.draw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.texture?i(e):a(e)},e}();t.default=m},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(t,n){o(this,e),this.set(t,n)}return e.prototype.set=function(e,t){this.x=e,this.y=t},e.prototype.copy=function(e){this.x=e.x,this.y=e.y},e.prototype.add=function(e){this.x+=e.x,this.y+=e.y},e.prototype.mul=function(e){this.x*=e.x,this.y*=e.y},e.prototype.div=function(e){this.x/=e.x,this.y/=e.y},e}();i.default.classStaticMatch(a),t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=t.Grid=t.Font=t.Transition=t.tween=t.math=t.draw=t.instance=t.action=t.event=t.object=t.Script=t.Sound=t.sprite=t.input=t.Room=t.Camera=t.canvas=t.main=t.App=void 0;var r=n(15),i=o(r),a=n(18),s=o(a),u=n(3),l=o(u),c=n(14),f=o(c),d=n(6),p=o(d),h=n(9),_=o(h),m=n(21),v=o(m),g=n(2),y=o(g),b=n(13),w=o(b),x=n(10),S=o(x),C=n(20),E=o(C),A=n(29),j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(A),D=n(4),M=o(D),k=n(0),O=o(k),R=n(5),T=o(R),q=n(22),P=o(q),G=n(8),F=o(G),N=n(23),Y=(o(N),n(11)),X=o(Y),B=n(7),I=o(B),L=n(24),W=o(L);t.App=i.default,t.main=s.default,t.canvas=l.default,t.Camera=f.default,t.Room=p.default,t.input=_.default,t.sprite=y.default,t.Sound=w.default,t.Script=v.default,t.object=S.default,t.event=E.default,t.action=j,t.instance=M.default,t.draw=O.default,t.math=T.default,t.tween=P.default,t.Transition=F.default,t.Font=X.default,t.Grid=I.default,t.Vector2=W.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(5),a=o(i),s=n(4),u=o(s),l=JSON.stringify({sprite:null,index:0,imageSpeed:1,animationBehavior:"loop",visible:!0,solid:!1,exists:!0,scaleX:1,scaleY:1,rotation:0,terminal:100,gravity:0,gravityDirection:0,speedX:0,speedY:0,boxTop:0,boxBottom:0,boxLeft:0,boxRight:0,behaviours:[],listeners:[],events:{},boxCollision:{x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0},_depth:0}),c={set:function(e){r(e,JSON.parse(l)),e.destroy=function(){u.default.destroy(this)},Object.defineProperty(e,"depth",{set:function(e){this._depth!==e&&(this._depth=e,u.default.doDepthSort=!0)},get:function(){return this._depth}}),Object.defineProperty(e,"speed",{set:function(e){var t=this.direction*a.default.DEGTORAD;this.speedX=Math.cos(t)*e,this.speedY=Math.sin(t)*e},get:function(e){return a.default.pointDistance(0,0,this.speedX,this.speedY)}}),Object.defineProperty(e,"direction",{set:function(e){var t=this.speed;this.speedX=Math.cos(e*a.default.DEGTORAD)*t,this.speedY=Math.sin(e*a.default.DEGTORAD)*t},get:function(e){return a.default.pointDirection(0,0,this.speedX,this.speedY)}})}};t.default=c},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _font=__webpack_require__(11),_font2=_interopRequireDefault(_font),_global=__webpack_require__(12),_global2=_interopRequireDefault(_global),_object=__webpack_require__(10),_object2=_interopRequireDefault(_object),_room=__webpack_require__(6),_room2=_interopRequireDefault(_room),_Script=__webpack_require__(21),_Script2=_interopRequireDefault(_Script),_Sound=__webpack_require__(13),_Sound2=_interopRequireDefault(_Sound),_sprite=__webpack_require__(2),_sprite2=_interopRequireDefault(_sprite),Compiler=function(){function Compiler(){_classCallCheck(this,Compiler)}return Compiler.actionExpressionEval=function actionExpressionEval(exp){var isActionParam=!1;if(exp instanceof String&&(isActionParam=!0,exp=String(exp)),"self"===exp)return this;if("other"===exp)return window.other;if(!isNaN(Number(exp)))return Number(exp);if(Compiler.isBoolean(exp))return!0===exp||"true"===exp;if(Compiler.isFunction(exp)||Compiler.isOperator(exp)||Compiler.isResource(exp)||Compiler.isCss(exp)||!isActionParam&&"string"==typeof exp)return exp;if("string"==typeof exp){var words=Compiler.getWords(exp),expression=Compiler.joinWords(words);return eval(expression)}return exp},Compiler.actionExpression=function(e){var t=!1;if(e instanceof String&&(t=!0,e=String(e)),"self"===e)return"this";if("other"===e)return"window.other";if(!isNaN(Number(e)))return Number(e);if(Compiler.isBoolean(e))return!0===e||"true"===e;if(Compiler.isOperator(e)||Compiler.isCss(e))return"'"+e+"'";if(Compiler.isFunction(e)||Compiler.isResource(e)||!t&&"string"==typeof e)return e;if("string"==typeof e){var n=Compiler.getWords(e);return Compiler.joinWords(n)}return e},Compiler.getWords=function(e){var t=void 0,n="",o=-1,r="",i=[];for(t=0;t<e.length;t++){var a=e.charAt(t);"'"===a||'"'===a?-1===o?(r=a,o=t+1):r===a&&(i.push("'"+e.slice(o,t)+"'"),o=-1):-1===o&&(" "!==a&&Compiler.splitCharacters.includes(a)?(""!==n&&(i.push(n),n=""),i.push(a)):n+=a)}return""!==n&&(i.push(n),n=""),i},Compiler.joinWords=function(e){var t="";return e.forEach(function(e){var n=parseInt(e);if(isNaN(n)){var o=e.charAt(0);"'"===o||" "===o?t+=e:Compiler.splitCharacters.includes(o)?t+=e:"fps"===e?t+=_global2.default.fps:Compiler.isResource(e)||!Compiler.isSingleWord(e)||Compiler.isString(e)||Compiler.isArray(e)||"this"===e?t+=e:t+="this."+e}else t+=e}),t},Compiler.isResource=function(e){return _object2.default.names.includes(e)||_sprite2.default.names.includes(e)||_Sound2.default.names.includes(e)||_room2.default.names.includes(e)||_font2.default.names.includes(e)||_Script2.default.names.includes(e)},Compiler.isArray=function(e){return"["===e.charAt(0)},Compiler.isString=function(e){return'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)||"'"===e.charAt(0)&&"'"===e.charAt(e.length-1)},Compiler.isSingleWord=function(e){return!e.includes(".")},Compiler.isFunction=function(e){return"function"==typeof e},Compiler.isBoolean=function(e){return Compiler.booleans.includes(e)},Compiler.isOperator=function(e){return Compiler.assignmentOperators.includes(e)},Compiler.isCss=function(e){return"#"===e.charAt(0)},Compiler}();exports.default=Compiler,Compiler.keywords=["self","other"],Compiler.booleans=[!0,!1,"true","false"],Compiler.assignmentOperators=["<",">","<=",">=","==","===","!=","!=="],Compiler.splitCharacters=["+","-","=","!"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function set(e,t,n,o){var r=o?window.global:this;n?r[e]+=t:r[e]=t}function test(e,t,n,o){var r=o?window.global:this;switch(t){case"!==":return r[e]!==n;case"===":return r[e]===n;case"!=":return r[e]!=n;case"==":return r[e]==n;case"<":return r[e]<n;case">":return r[e]>n;case"<=":return r[e]<=n;case">=":return r[e]>=n;default:return!1}}function setGravity(e){this.gravity=e}function jump(e,t,n){n?(this.x+=Number(e),this.y+=Number(t)):(this.x=Number(e),this.y=Number(t))}function jumpRandom(){this.x=Math.floor(641*Math.random())+0,this.y=Math.floor(481*Math.random())+0}function moveFree(e,t){this.speed=e,this.direction=t}function moveDirect(e,t){this.x+=e*_main2.default.dt,this.y+=t*_main2.default.dt}function moveSpeedX(e){this.speedX=Number(e)}function moveSpeedY(e){this.speedY=Number(e)}function moveReverseX(){this.speedX=-this.speedX}function moveReverseY(){this.speedY=-this.speedY}function actionWrap(){var e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room2.default.current,o=n.width,r=n.height;this.boxRight<0&&(this.x+=o+e),this.boxBottom<0&&(this.y+=r+t),this.boxLeft>o&&(this.x-=o+e),this.boxTop>r&&(this.y-=r+t)}function actionConfine(){var e=this.boxRight-this.boxLeft,t=this.boxBottom-this.boxTop,n=_room2.default.current,o=n.width,r=n.height;this.boxLeft<0&&(this.x=0),this.boxTop<0&&(this.y=0),this.boxRight>o&&(this.x=o-e),this.boxBottom>r&&(this.y=r-t)}function actionFunc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];e.apply(this,n)}function script(e,t){console.log(window[e],t),window[e].apply(this,t)}function code(code){if("string"==typeof code)try{eval(code)}catch(e){console.error(e.message)}else console.error("runCode(code); code must be a string!")}function get(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(this[t].toFixed(2))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GAME=exports.confirm=exports.alert=exports.message=exports.code=exports.script=exports.func=exports.confine=exports.wrap=exports.actionConfine=exports.actionWrap=exports.moveReverseY=exports.moveReverseX=exports.moveSpeedY=exports.moveSpeedX=exports.moveDirect=exports.moveFree=exports.jumpRandom=exports.jump=exports.setGravity=exports.test=exports.get=exports.set=exports.exitEvent=exports.blockEnd=exports.blockBegin=exports.roomPrevious=exports.roomNext=exports.roomEnter=exports.drawSprite=exports.instanceDrawSelf=exports.drawSelf=exports.drawText=exports.drawSetFontSize=exports.drawSetFont=exports.drawSetColor=exports.soundStop=exports.soundPlay=exports.instanceChangeSprite=exports.changeSprite=exports.instanceSetDirection=exports.instanceSetRotation=exports.instanceDestroy=exports.instanceCreateMoving=exports.instanceCreate=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_room=__webpack_require__(6),_room2=_interopRequireDefault(_room),_Sound=__webpack_require__(13),_Sound2=_interopRequireDefault(_Sound),_draw=__webpack_require__(0),_draw2=_interopRequireDefault(_draw),_instance=__webpack_require__(4),_instance2=_interopRequireDefault(_instance),_input=__webpack_require__(9),_input2=_interopRequireDefault(_input),_math=__webpack_require__(5),_math2=_interopRequireDefault(_math),_sprite=__webpack_require__(2),_sprite2=_interopRequireDefault(_sprite),_canvas=__webpack_require__(3),_canvas2=_interopRequireDefault(_canvas),_color=__webpack_require__(16),_color2=_interopRequireDefault(_color),_main=__webpack_require__(18),_main2=_interopRequireDefault(_main),_camera=__webpack_require__(14),_camera2=_interopRequireDefault(_camera),_App=__webpack_require__(15),_App2=_interopRequireDefault(_App),_grid=__webpack_require__(7),_grid2=_interopRequireDefault(_grid),_tilemap=__webpack_require__(30),_tilemap2=_interopRequireDefault(_tilemap),_tween=__webpack_require__(22),_tween2=_interopRequireDefault(_tween),_transition=__webpack_require__(8),_transition2=_interopRequireDefault(_transition),_object=__webpack_require__(10),_object2=_interopRequireDefault(_object),_primitive=__webpack_require__(23),_primitive2=_interopRequireDefault(_primitive),_Vector=__webpack_require__(24),_Vector2=_interopRequireDefault(_Vector),GAME={main:{setGameSpeed:_main2.default.setGameSpeed},instance:{create:_instance2.default.create,createMoving:_instance2.default.createMoving,destroy:_instance2.default.destroy,find:_instance2.default.find,findRandom:_instance2.default.findRandom,count:_instance2.default.count,mouseOn:_instance2.default.mouseOn},draw:_extends(_draw2.default,{self:_instance2.default.drawSelf,debug:_instance2.default.drawDebug}),Canvas:_canvas2.default,color:_color2.default,sprite:_sprite2.default,Sound:_Sound2.default,Room:_room2.default,input:{keyboard:_input2.default.keyboard,mouse:_input2.default.mouse,touch:_input2.default.touch},math:_math2.default,Camera:_camera2.default,App:_App2.default,Grid:_grid2.default,Tilemap:_tilemap2.default,tween:_tween2.default,Transition:_transition2.default,Object:_object2.default,Primitive:_primitive2.default,Vector2:_Vector2.default},blockBegin="blockBegin",blockEnd="blockEnd",exitEvent="exitEvent",roomEnter=_room2.default.enter,roomNext=_room2.default.next,roomPrevious=_room2.default.previous,instanceCreate=_instance2.default.create,instanceCreateMoving=_instance2.default.createMoving,instanceDestroy=_instance2.default.destroy,changeSprite=_instance2.default.changeSprite,instanceSetRotation=_instance2.default.setRotation,instanceSetDirection=_instance2.default.setDirection,message=function(e){return console.log(e)},alert=function(e){window.alert(e)},confirm=function(e){return window.confirm(e)},drawSetColor=_draw2.default.setColor,drawSetFont=_draw2.default.setFont,drawSetFontSize=_draw2.default.setFontSize,drawText=_draw2.default.text,drawSelf=_instance2.default.drawSelf,drawSprite=_draw2.default.sprite,soundPlay=function(e,t){_Sound2.default.play(e,{loop:t})},soundStop=_Sound2.default.stop;exports.instanceCreate=instanceCreate,exports.instanceCreateMoving=instanceCreateMoving,exports.instanceDestroy=instanceDestroy,exports.instanceSetRotation=instanceSetRotation,exports.instanceSetDirection=instanceSetDirection,exports.changeSprite=changeSprite,exports.instanceChangeSprite=changeSprite,exports.soundPlay=soundPlay,exports.soundStop=soundStop,exports.drawSetColor=drawSetColor,exports.drawSetFont=drawSetFont,exports.drawSetFontSize=drawSetFontSize,exports.drawText=drawText,exports.drawSelf=drawSelf,exports.instanceDrawSelf=drawSelf,exports.drawSprite=drawSprite,exports.roomEnter=roomEnter,exports.roomNext=roomNext,exports.roomPrevious=roomPrevious,exports.blockBegin=blockBegin,exports.blockEnd=blockEnd,exports.exitEvent=exitEvent,exports.set=set,exports.get=get,exports.test=test,exports.setGravity=setGravity,exports.jump=jump,exports.jumpRandom=jumpRandom,exports.moveFree=moveFree,exports.moveDirect=moveDirect,exports.moveSpeedX=moveSpeedX,exports.moveSpeedY=moveSpeedY,exports.moveReverseX=moveReverseX,exports.moveReverseY=moveReverseY,exports.actionWrap=actionWrap,exports.actionConfine=actionConfine,exports.wrap=actionWrap,exports.confine=actionConfine,exports.func=actionFunc,exports.script=script,exports.code=code,exports.message=message,exports.alert=alert,exports.confirm=confirm,exports.GAME=GAME},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=o(i),s=n(7),u=o(s),l=n(0),c=o(l),f=n(2),d=o(f),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.textureAtlas=t.atlas||null,this.tileWidth=t.tileWidth||16,this.tileHeight=t.tileHeight||16,this.tileSpacing=t.tileSpacing||0,this.tileOverlay=t.tileOverlay||0,this.tilesWide=t.tilesWide||16,this.mapWidth=t.mapWidth||16,this.mapHeight=t.mapHeight||16,this.layers={},this.__gap=this.tileSpacing+this.tileOverlay,this.textureAtlas&&(this.__atlas=d.default.get(this.textureAtlas).images[0].img)}return e.prototype.set=function(e,t,n,o){this.layers[e]||(this.layers[e]=new u.default(this.mapWidth,this.mapHeight)),this.layers[e].set(t,n,o)},e.prototype.draw=function(e){var t=this.__atlas,n=this.tileWidth,o=this.tileHeight,r=this.tilesWide,i=this.__gap,a=this.tileOverlay,s=n+2*a,u=o+2*a,l=e.order||Object.keys(this.layers),f=~~Math.max(0,(e.left||0)/n),d=~~Math.max(0,(e.top||0)/o),p=Math.ceil(Math.min(this.mapWidth,(e.right||0)/n)),h=Math.ceil(Math.min(this.mapHeight,(e.bottom||0)/o)),_=void 0,m=void 0,v=void 0,g=void 0,y=void 0,b=void 0,w=void 0;for(v=0;v<l.length;v++)for(g=this.layers[l[v]],_=f;_<p;_++)for(m=d;m<h;m++)(y=g.get(_,m)-1)>=0&&(b=y%r*(n+2*i)+i,w=~~(y/r)*(o+2*i)+i,c.default.context.drawImage(t,b-a,w-a,s,u,_*n-a,m*o-a,s,u))},e}();a.default.classStaticMatch(p),p.prototype.assetType="tilemap",t.default=p}])});
//# sourceMappingURL=GameBeans.js.map