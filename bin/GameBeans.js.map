{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///GameBeans.js","webpack:///webpack/bootstrap 29454d469d4d3465aafa","webpack:///./js/draw.js","webpack:///./js/sprite.js","webpack:///./js/instance.js","webpack:///./js/canvas.js","webpack:///./js/math.js","webpack:///./js/room.js","webpack:///./js/input.js","webpack:///./js/main.js","webpack:///./js/color.js","webpack:///./js/keyvalues.js","webpack:///./js/object.js","webpack:///./js/event.js","webpack:///./js/utils/pool.js","webpack:///./js/global.js","webpack:///./js/camera.js","webpack:///./js/sound.js","webpack:///./js/generator.js","webpack:///./js/data/dataGrid.js","webpack:///./js/tween.js","webpack:///./js/core.js","webpack:///./js/objectVars.js","webpack:///./js/compile.js","webpack:///./js/action.js","webpack:///./js/app.js","webpack:///./js/data.js","webpack:///./js/tilemap.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","_toConsumableArray","arr","Array","isArray","arr2","length","from","value","_math","_math2","_sprite2","_sprite3","draw","color","font","fontSize","textAlign","textBaseline","target","context","defaultTransform","targetStack","imageSmoothing","offsetX","offsetY","setTarget","push","getContext","resetTarget","pop","getTarget","save","restore","reset","_draw$context","imageSmoothingEnabled","setTransform","apply","setImageSmoothing","enable","transform","scale","x","y","rotate","rot","math","DEGTORAD","translate","setDefault","opt","arguments","undefined","trans","scaleX","skewX","skewY","scaleY","moveX","moveY","setColor","r","g","b","a","h","setFont","size","align","baseline","sprite","spr","index","rotation","ctx","Math","floor","images","frame","img","drawImage","clip","w","originX","originY","width","height","spriteTiled","dx","dy","rx","ry","drawSprite","canvas","console","log","text","options","fillStyle","stroke","strokeStyle","strokeColor","lineWidth","strokeText","fillText","primitive","textureMap","texture","pts","tris","t","pp","x0","x1","x2","y0","y1","y2","u0","u","u1","u2","v0","v","v1","v2","beginPath","moveTo","lineTo","closePath","delta","delta_a","delta_b","delta_c","delta_d","delta_e","delta_f","shape","line","ellipse","xr","yr","arc","PI","style","healthbar","amount","background","createLinearGradient","addColorStop","fill","rectangle","rect","newSpriteName","aLength","pixelDataTint","data","rgb","_typeof","Symbol","iterator","constructor","_color","_color2","aSprites","array","create","atlasIndex","atlas","newSprite","assetType","frames","forEach","addFrame","source","src","image","Image","ready","onload","cache","document","createElement","setOrigin","Number","readyAll","tint","col","imageData","getImageData","hexToRgb","putImageData","toDataURL","_extends","assign","key","_input","_input2","_object","_object2","_sprite","_draw","_draw2","_compile","_compile2","window","global","aInstances","otherStack","instance","instanceArray","instanceHardLimit","addConsoleText","_GB_stop","inst","pool","objectName","boxCollision","addToArray","updateBoundingBox","updateCollisionBox","executeEvent","depth","splice","createMoving","speed","direction","warn","newInst","find","instNumber","findRandom","randomInt","count","setRotation","relative","setDirection","mouseOn","boxTop","input","mouse","boxBottom","boxLeft","boxRight","step","dt","updateAnimation","updatePosition","instanceExecuteListeners","triggerEvents","event","imageSpeed","behavior","animationBehavior","type","gravVector","lengthDirX","terminal","gravityDirection","lengthDirY","speedX","gravity","speedY","box","top","left","bottom","right","destroy","exists","events","drawSelf","drawDebug","changeSprite","listeners","listener","instanceCollisionInstance","getAllInstances","box1","targ","box2","otherInst","other","actions","executeActions","err","error","executeEventAll","condition","steps","scope","action","flow","func","args","newArgs","compile","actionExpression","stepAll","drawAll","visible","clearDestroyed","release","main","dom","application","crisp2D","setMain","oncontextmenu","e","preventDefault","getElementById","body","appendChild","getMain","clear","fillRect","RADTODEG","cos","sin","sign","min","max","ceil","random","choose","_len","_key","pointDistance","sqrt","pointDirection","atan2","angleDifference","angle1","angle2","diff","_instance","_instance2","_draw3","room","current","newRoom","backgroundMethod","instances","setBackground","rm","addInstance","enter","ptrn","createPattern","_canvas","_canvas2","_keyvalues","_keyvalues2","element","__mouse","pressed","down","released","wheelUp","wheelDown","__keyboard","__touch","start","held","move","end","cancel","__triggerEvents","keyboard","touch","init","initMouse","initKeyboard","initTouch","handleMouseDown","button","focus","handleMouseUp","handleMouseMove","canv","getBoundingClientRect","clientX","clientY","handleMouseWheel","wheelDelta","onmousedown","onmouseup","onmousemove","onmousewheel","keyValues","handleKeyDown","code","handleKeyUp","onkeydown","onkeyup","handleTouchStart","handleTouchEnd","handleTouchMove","touches","changedTouches","pageX","pageY","ontouchstart","ontouchend","ontouchcancel","ontouchmove","getTriggerEvents","keys","includes","mouseMap","update","tick","timestamp","requestAnimationFrame","nextTick","lastTick","tickLength","numTicks","fps","last","timeSinceTick","queueUpdates","gameDraw","gameUpdate","camera","handleResizeEvent","_room","_room2","_global","_global2","_camera","_camera2","performance","now","opts","host","loc","parent","location","hostname","split","join","enableMouse","enableKeyboard","enableTouch","hideCursor","cursor","setGameSpeed","addEventListener","hex","result","exec","parseInt","componentToHex","toString","rgbToHex","values","_event","_objectVars","_objectVars2","_pool","_pool2","objectArray","objectModule","objectVars","set","id","Pool","eventAddAction","params","concat","indexOf","slice","addCollisionListener","postfix","roomEnter","roomLeave","collision","resize","newConstructor","stack","def","cam","angle","follow","gridLocked","weight","_loop","currentTime","play","_end","pause","soundResources","soundModule","isEnabled","sound","Audio","test","callback","oncanplaythrough","soundName","playSound","paused","cloneNode","onError","promise","then","onended","loop","onEnd","catch","stop","generator","functionFromConstructor","Function","bind","functionFromMethod","method","gridPool","Grid","myGrid","tween","blend","n1","n2","perc","cubicBezier","x3","y3","xa","ya","xb","yb","xc","yc","xm","ym","xn","yn","_main","_main2","_sound","_sound2","_event2","_action","newObj","_tween","_tween2","basic","JSON","stringify","solid","behaviours","_depth","objectVarsModule","proto","parse","sort","_this","charCodeAt","string","sIndex","newArr","charAt","word","num","isNaN","eval","actionSet","varName","actionTest","op","actionSetGravity","actionJump","actionJumpRandom","moveFree","moveDirect","moveSpeedX","moveSpeedY","moveReverseX","moveReverseY","actionWrap","thisRoom","roomW","roomH","actionConfine","actionFunc","runCode","message","actionGet","_len2","_key2","toFixed","GAME","confirm","alert","confine","wrap","jumpRandom","jump","setGravity","exitEvent","blockEnd","blockBegin","instanceDrawSelf","drawText","drawSetFontSize","drawSetFont","drawSetColor","soundPlay","instanceChangeSprite","instanceSetDirection","instanceSetRotation","instanceDestroy","instanceCreateMoving","instanceCreate","_app","_app2","_data","_data2","_tilemap","_tilemap2","debug","app","Tilemap","setFontSize","snd","setCursor","_generator","_generator2","_dataGrid","_dataGrid2","grid","textureAtlas","tileWidth","tileHeight","tileSpacing","tileOverlay","tilesWide","mapWidth","mapHeight","layers","layer","gap","startX","startY","endX","endY","order","tile","iX","iY"],"mappings":"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","file":"GameBeans.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"GameBeans\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GameBeans\"] = factory();\n\telse\n\t\troot[\"GameBeans\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"GameBeans\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GameBeans\"] = factory();\n\telse\n\t\troot[\"GameBeans\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 19);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _math = __webpack_require__(4);\n\nvar _math2 = _interopRequireDefault(_math);\n\nvar _sprite2 = __webpack_require__(1);\n\nvar _sprite3 = _interopRequireDefault(_sprite2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } /**\r\n                                                                                                                                                                                                     * @module draw\r\n                                                                                                                                                                                                     */\n\n//\nvar draw = {\n\n\t//\n\tcolor: \"#FFFFFF\",\n\tfont: \"Arial\",\n\tfontSize: 30,\n\ttextAlign: \"start\",\n\ttextBaseline: \"alphabetic\",\n\ttarget: null,\n\tcontext: null,\n\tdefaultTransform: [1, 0, 0, 1, 0, 0],\n\ttargetStack: [],\n\timageSmoothing: false,\n\toffsetX: 0,\n\toffsetY: 0,\n\n\t/**\r\n  *\r\n  */\n\tsetTarget: function setTarget(target) {\n\t\tdraw.targetStack.push(draw.target);\n\t\tdraw.target = target;\n\t\tdraw.context = target.getContext(\"2d\");\n\t},\n\n\t/**\r\n  *\r\n  */\n\tresetTarget: function resetTarget() {\n\t\tvar target = draw.targetStack.pop();\n\t\tdraw.target = target;\n\t\tdraw.context = target.getContext(\"2d\");\n\t},\n\n\t/**\r\n  *\r\n  */\n\tgetTarget: function getTarget() {\n\t\treturn draw.target;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsave: function save() {\n\t\tdraw.context.save();\n\t},\n\n\t/**\r\n  *\r\n  */\n\trestore: function restore() {\n\t\tdraw.context.restore();\n\t},\n\n\t/**\r\n  *\r\n  */\n\treset: function reset() {\n\t\tvar _draw$context;\n\n\t\tdraw.context.imageSmoothingEnabled = draw.imageSmoothing;\n\t\t(_draw$context = draw.context).setTransform.apply(_draw$context, _toConsumableArray(draw.defaultTransform));\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsetImageSmoothing: function setImageSmoothing(enable) {\n\t\tdraw.imageSmoothing = enable;\n\t},\n\n\t//\n\ttransform: {\n\n\t\tscale: function scale(x, y) {\n\t\t\tdraw.context.scale(x, y);\n\t\t},\n\n\t\trotate: function rotate(rot) {\n\t\t\tdraw.context.rotate(rot * _math2.default.DEGTORAD);\n\t\t},\n\n\t\ttranslate: function translate(x, y) {\n\t\t\tdraw.offsetX = x;\n\t\t\tdraw.offsetY = y;\n\t\t\tdraw.context.translate(x, y);\n\t\t},\n\n\t\t/**\r\n   * @param {object} opt\r\n   */\n\t\tsetDefault: function setDefault() {\n\t\t\tvar opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t\t\tvar trans = draw.defaultTransform;\n\t\t\tif (opt.scaleX) trans[0] = opt.scaleX;\n\t\t\tif (opt.skewX) trans[1] = opt.skewX;\n\t\t\tif (opt.skewY) trans[2] = opt.skewY;\n\t\t\tif (opt.scaleY) trans[3] = opt.scaleY;\n\t\t\tif (opt.moveX) trans[4] = opt.moveX;\n\t\t\tif (opt.moveY) trans[5] = opt.moveY;\n\t\t}\n\n\t},\n\n\t/**\r\n  * @param {color} c Can be a number or a hex-value.\r\n  */\n\tsetColor: function setColor(c) {\n\n\t\t// quick exit if c is already a CSS color value\n\t\tif (typeof c === \"string\") {\n\t\t\tdraw.color = c;\n\t\t}\n\n\t\t// c is an object\n\t\telse {\n\n\t\t\t\t// RGB / RGBA\n\t\t\t\tif (\"r\" in c && \"g\" in c && \"b\" in c) {\n\t\t\t\t\tdraw.color = \"a\" in c ? \"rgba(\" + c.r + \",\" + c.g + \",\" + c.b + \",\" + c.a + \")\" : \"rgb(\" + c.r + \",\" + c.g + \",\" + c.b + \")\";\n\t\t\t\t}\n\n\t\t\t\t// HSL / HSLA\n\t\t\t\telse if (\"h\" in c && \"s\" in c && \"l\" in c) {\n\t\t\t\t\t\tdraw.color = \"a\" in c ? \"hsla(\" + c.h + \",\" + c.s + \"%,\" + c.l + \"%,\" + c.a + \")\" : \"hsl(\" + c.h + \",\" + c.s + \"%,\" + c.l + \"%)\";\n\t\t\t\t\t}\n\t\t\t}\n\t},\n\n\t/**\r\n  * @param {string} font\r\n  * @param {number} size\r\n  * @param {string} align Horizontal alignment.\r\n  * @param {string} baseline Vertical alignment.\r\n  */\n\tsetFont: function setFont(font, size, align, baseline) {\n\n\t\tdraw.font = font;\n\t\tdraw.fontSize = size;\n\t\tdraw.textAlign = align;\n\t\tdraw.textBaseline = baseline;\n\t},\n\n\t/**\r\n  * Draws the sprite at the given x, y position.\r\n  * @param {sprite} sprite\r\n  * @param {number} x\r\n  * @param {number} y\r\n  */\n\tsprite: function sprite(spr, index, x, y, scaleX, scaleY, rotation) {\n\n\t\tspr = _sprite3.default.get(spr);\n\n\t\t//\n\t\tvar ctx = draw.context;\n\t\tctx.save();\n\n\t\t//\n\t\tctx.translate(x, y);\n\t\tctx.rotate(rotation * _math2.default.DEGTORAD);\n\t\tctx.scale(scaleX, scaleY);\n\n\t\t//\n\t\tindex = Math.floor(index) % spr.images.length;\n\n\t\t//\n\t\tvar frame = spr.images[index];\n\t\tvar img = frame.img;\n\t\tctx.drawImage(img, frame.clip.x, frame.clip.y, frame.clip.w, frame.clip.h, -spr.originX, -spr.originY, spr.width, spr.height);\n\n\t\t//\n\t\tctx.restore();\n\t},\n\n\t/**\r\n  * Draws the sprite at the given x, y position.\r\n  * @param {sprite} sprite\r\n  * @param {number} x\r\n  * @param {number} y\r\n  * @param {number} w\r\n  * @param {number} h\r\n  */\n\tspriteTiled: function spriteTiled(spr, index, x, y, w, h) {\n\n\t\tspr = _sprite3.default.get(spr);\n\n\t\tvar dx = void 0,\n\t\t    dy = void 0,\n\t\t    rx = void 0,\n\t\t    ry = void 0;\n\t\tfor (rx = 0, dx = x; rx < w; rx++, dx += spr.width) {\n\t\t\tfor (ry = 0, dy = y; ry < h; ry++, dy += spr.height) {\n\t\t\t\tdrawSprite(spr, index, dx, dy, 1, 1, 0);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\tcanvas: function canvas(_canvas, x, y) {\n\t\tconsole.log(draw.context.imageSmoothingEnabled);\n\t\tdraw.context.drawImage(_canvas, x, y);\n\t},\n\n\t/**\r\n  * @param {string} text\r\n  * @param {number} x\r\n  * @param {number} y\r\n  */\n\ttext: function text(_text, x, y, options) {\n\n\t\tvar ctx = draw.context;\n\t\tctx.font = draw.fontSize + \"px \" + draw.font;\n\t\tctx.fillStyle = draw.color;\n\t\tctx.textAlign = draw.textAlign;\n\t\tctx.textBaseline = draw.textBaseline;\n\n\t\tif (options) {\n\t\t\tif (options.stroke) {\n\t\t\t\tctx.strokeStyle = options.strokeColor || draw.color;\n\t\t\t\tctx.lineWidth = options.width || 2;\n\t\t\t\tctx.strokeText(_text, x, y);\n\t\t\t}\n\t\t}\n\n\t\tctx.fillText(_text, x, y);\n\t},\n\n\t/**\r\n  *\r\n  */\n\tprimitive: {\n\n\t\ttextureMap: function textureMap(texture, pts) {\n\n\t\t\tvar ctx = draw.context;\n\t\t\tvar spr = _sprite3.default.get(texture);\n\t\t\tvar frame = spr.images[0];\n\t\t\tvar img = frame.img;\n\t\t\tvar w = spr.width;\n\t\t\tvar h = spr.height;\n\n\t\t\tvar tris = [[0, 1, 2], [2, 3, 0]]; // Split in two triangles\n\t\t\tfor (var t = 0; t < 2; t++) {\n\t\t\t\tvar pp = tris[t];\n\t\t\t\tvar x0 = pts[pp[0]].x,\n\t\t\t\t    x1 = pts[pp[1]].x,\n\t\t\t\t    x2 = pts[pp[2]].x;\n\t\t\t\tvar y0 = pts[pp[0]].y,\n\t\t\t\t    y1 = pts[pp[1]].y,\n\t\t\t\t    y2 = pts[pp[2]].y;\n\t\t\t\tvar u0 = pts[pp[0]].u * w,\n\t\t\t\t    u1 = pts[pp[1]].u * w,\n\t\t\t\t    u2 = pts[pp[2]].u * w;\n\t\t\t\tvar v0 = pts[pp[0]].v * h,\n\t\t\t\t    v1 = pts[pp[1]].v * h,\n\t\t\t\t    v2 = pts[pp[2]].v * h;\n\n\t\t\t\t// Set clipping area so that only pixels inside the triangle will\n\t\t\t\t// be affected by the image drawing operation\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(x0, y0);\n\t\t\t\tctx.lineTo(x1, y1);\n\t\t\t\tctx.lineTo(x2, y2);\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.clip();\n\n\t\t\t\t// Compute matrix transform\n\t\t\t\tvar delta = u0 * v1 + v0 * u2 + u1 * v2 - v1 * u2 - v0 * u1 - u0 * v2;\n\t\t\t\tvar delta_a = x0 * v1 + v0 * x2 + x1 * v2 - v1 * x2 - v0 * x1 - x0 * v2;\n\t\t\t\tvar delta_b = u0 * x1 + x0 * u2 + u1 * x2 - x1 * u2 - x0 * u1 - u0 * x2;\n\t\t\t\tvar delta_c = u0 * v1 * x2 + v0 * x1 * u2 + x0 * u1 * v2 - x0 * v1 * u2 - v0 * u1 * x2 - u0 * x1 * v2;\n\t\t\t\tvar delta_d = y0 * v1 + v0 * y2 + y1 * v2 - v1 * y2 - v0 * y1 - y0 * v2;\n\t\t\t\tvar delta_e = u0 * y1 + y0 * u2 + u1 * y2 - y1 * u2 - y0 * u1 - u0 * y2;\n\t\t\t\tvar delta_f = u0 * v1 * y2 + v0 * y1 * u2 + y0 * u1 * v2 - y0 * v1 * u2 - v0 * u1 * y2 - u0 * y1 * v2;\n\n\t\t\t\t// Draw the transformed image\n\t\t\t\tctx.transform(delta_a / delta, delta_d / delta, delta_b / delta, delta_e / delta, delta_c / delta, delta_f / delta);\n\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\n\t},\n\n\t/**\r\n  *\r\n  */\n\tshape: {\n\n\t\t/**\r\n   * @param {number} x1\r\n   * @param {number} y1\r\n   * @param {number} x2\r\n   * @param {number} y2\r\n   * @param {object} options\r\n   */\n\t\tline: function line(x1, y1, x2, y2) {\n\t\t\tvar options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n\n\t\t\tvar ctx = draw.context;\n\t\t\tctx.strokeStyle = options.color || draw.color;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.stroke();\n\t\t},\n\n\t\t/**\r\n   * @param {number} x1\r\n   * @param {number} y1\r\n   * @param {number} x2\r\n   * @param {number} y2\r\n   * @param {object} options\r\n   */\n\t\tellipse: function ellipse(x, y, xr, yr) {\n\t\t\tvar options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n\n\t\t\t//\n\t\t\tvar ctx = draw.context;\n\t\t\tctx.save();\n\t\t\tctx.beginPath();\n\t\t\tctx.translate(x - xr, y - yr);\n\t\t\tctx.scale(xr, yr);\n\t\t\tctx.arc(1, 1, 1, 0, 2 * Math.PI, false);\n\t\t\tctx.restore();\n\n\t\t\t//\n\t\t\tvar style = void 0;\n\t\t\tif (options.healthbar) {\n\t\t\t\tvar amount = options.healthbar.amount || 1;\n\t\t\t\tvar color = options.healthbar.color || \"#0F0\";\n\t\t\t\tvar background = options.healthbar.background || \"#F00\";\n\t\t\t\tstyle = ctx.createLinearGradient(x - xr, 0, x + xr, 0);\n\t\t\t\tstyle.addColorStop(0, color);\n\t\t\t\tstyle.addColorStop(amount, color);\n\t\t\t\tstyle.addColorStop(amount, background);\n\t\t\t\tstyle.addColorStop(1, background);\n\t\t\t} else {\n\t\t\t\tstyle = options.color || draw.color;\n\t\t\t}\n\n\t\t\t//\n\t\t\tif (!options.fill) {\n\t\t\t\tctx.fillStyle = style;\n\t\t\t\tctx.fill();\n\t\t\t} else {\n\t\t\t\tctx.strokeStyle = style;\n\t\t\t\tctx.lineWidth = options.lineWidth || 1;\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\n\t\t/**\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} w\r\n   * @param {number} h\r\n   * @param {object} options\r\n   */\n\t\trectangle: function rectangle(x, y, w, h) {\n\t\t\tvar options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n\n\t\t\t//\n\t\t\tvar ctx = draw.context;\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(x, y, w, h);\n\n\t\t\t//\n\t\t\tvar style = void 0;\n\t\t\tif (options.healthbar) {\n\t\t\t\tvar amount = options.healthbar.amount || 1;\n\t\t\t\tvar color = options.healthbar.color || \"#0F0\";\n\t\t\t\tvar background = options.healthbar.background || \"#F00\";\n\t\t\t\tstyle = ctx.createLinearGradient(x, 0, x + w, 0);\n\t\t\t\tstyle.addColorStop(0, color);\n\t\t\t\tstyle.addColorStop(amount, color);\n\t\t\t\tstyle.addColorStop(amount, background);\n\t\t\t\tstyle.addColorStop(1, background);\n\t\t\t} else {\n\t\t\t\tstyle = options.color || draw.color;\n\t\t\t}\n\n\t\t\t//\n\t\t\tif (!options.fill) {\n\t\t\t\tctx.fillStyle = style;\n\t\t\t\tctx.fill();\n\t\t\t} else {\n\t\t\t\tctx.strokeStyle = style;\n\t\t\t\tctx.lineWidth = options.lineWidth || 1;\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t//\n};exports.default = draw;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\r\n                                                                                                                                                                                                                                                                               * @module sprite\r\n                                                                                                                                                                                                                                                                               */\n\n//\n\n\nvar _color = __webpack_require__(8);\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar aSprites = [],\n    aLength = 0;\n\n/**\r\n *\r\n */\nvar sprite = {\n\n\t//\n\tarray: aSprites,\n\n\t/**\r\n  *\r\n  */\n\tcreate: function create() {\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t\t//\n\t\tvar atlas = void 0,\n\t\t    atlasIndex = void 0;\n\t\tif (options.atlas) {\n\t\t\tatlasIndex = options.atlasIndex || 0;\n\t\t\tatlas = options.atlas.images[atlasIndex];\n\t\t}\n\n\t\t//\n\t\tvar newSprite = {\n\t\t\tassetType: \"sprite\",\n\t\t\tname: options.name || newSpriteName(),\n\t\t\toriginX: options.originX || 0,\n\t\t\toriginY: options.originY || 0,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\timages: []\n\n\t\t\t//\n\t\t};if (options.frames) {\n\t\t\toptions.frames.forEach(function (frame) {\n\t\t\t\tsprite.addFrame(newSprite, {\n\t\t\t\t\tsource: frame.src\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t//\n\t\taSprites[aLength++] = newSprite;\n\t\treturn newSprite;\n\t},\n\n\t/**\r\n  *\r\n  */\n\taddFrame: function addFrame(spr) {\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n\t\tspr = sprite.get(spr);\n\n\t\t//\n\t\tvar atlas = void 0;\n\t\tif (options.atlas) {\n\t\t\tatlas = sprite.get(options.atlas).images[0].img;\n\t\t}\n\n\t\tvar image = {\n\t\t\timg: atlas || new Image(),\n\t\t\tclip: null,\n\t\t\tready: false\n\n\t\t\t//\n\t\t};if (options.source) {\n\n\t\t\timage.img.onload = function () {\n\n\t\t\t\t//\n\t\t\t\timage.clip = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\tw: image.img.width,\n\t\t\t\t\th: image.img.height\n\n\t\t\t\t\t//\n\t\t\t\t};if (spr.width * spr.height === 0) {\n\t\t\t\t\tspr.width = image.clip.w;\n\t\t\t\t\tspr.height = image.clip.h;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\timage.ready = true;\n\t\t\t};\n\t\t\timage.img.src = options.source || \"\";\n\t\t}\n\n\t\t//\n\t\tif (atlas && options.clip) {\n\n\t\t\t//\n\t\t\timage.clip = options.clip;\n\t\t\tconsole.log(image.clip);\n\n\t\t\t//\n\t\t\tif (spr.width * spr.height === 0) {\n\t\t\t\tspr.width = image.clip.w;\n\t\t\t\tspr.height = image.clip.h;\n\t\t\t}\n\n\t\t\t//\n\t\t\timage.ready = true;\n\t\t}\n\n\t\t//\n\t\tspr.images.push(image);\n\t},\n\n\t/**\r\n  *\r\n  */\n\tcache: function cache(spr) {\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n\t\tspr = sprite.get(spr);\n\t\tspr.images.forEach(function (frame) {\n\t\t\tvar canvas = document.createElement(\"CANVAS\");\n\t\t\tcanvas.width = options.width || frame.img.width;\n\t\t\tcanvas.height = options.height || frame.img.height;\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(frame.img, 0, 0, canvas.width + 1, canvas.height + 1);\n\n\t\t\tframe.clip.x = 0;\n\t\t\tframe.clip.y = 0;\n\t\t\tframe.clip.w = canvas.width;\n\t\t\tframe.clip.h = canvas.height;\n\t\t\tframe.img = canvas;\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsetOrigin: function setOrigin(spr, x, y) {\n\n\t\tspr = sprite.get(spr);\n\t\tspr.originX = Number(x);\n\t\tspr.originY = Number(y);\n\t},\n\n\t/**\r\n  *\r\n  */\n\treadyAll: function readyAll() {\n\n\t\tfor (var n = 0; n < aLength; n++) {\n\t\t\tvar spr = aSprites[n];\n\t\t\tfor (var i = 0; i < spr.images.length; i++) {\n\t\t\t\tvar image = spr.images[i];\n\t\t\t\tif (!image.ready) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\r\n  *\r\n  */\n\ttint: function tint(spr, col) {\n\n\t\tif ((typeof spr === \"undefined\" ? \"undefined\" : _typeof(spr)) !== \"object\") spr = sprite.get(spr);\n\n\t\t//\n\t\tspr.images.forEach(function (image) {\n\n\t\t\t// create canvas, draw image\n\t\t\tvar canvas = document.createElement(\"CANVAS\");\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tcanvas.width = spr.width;\n\t\t\tcanvas.height = spr.height;\n\t\t\tctx.drawImage(image.img, 0, 0);\n\n\t\t\t// get data, do thing, put data back\n\t\t\tvar imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tpixelDataTint(imageData.data, (typeof col === \"undefined\" ? \"undefined\" : _typeof(col)) === \"object\" ? col : _color2.default.hexToRgb(col));\n\t\t\tctx.putImageData(imageData, 0, 0);\n\n\t\t\t//\n\t\t\timage.img.src = canvas.toDataURL(\"image/png\");\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tget: function get(name) {\n\n\t\tif ((typeof name === \"undefined\" ? \"undefined\" : _typeof(name)) === \"object\") return name;\n\n\t\tfor (var n = 0; n < aLength; n++) {\n\t\t\tif (aSprites[n].name === name) return aSprites[n];\n\t\t}return null;\n\t}\n\n\t/**\r\n  *\r\n  */\n};function newSpriteName() {\n\treturn \"Sprite_\" + aLength;\n}\n\n/**\r\n *\r\n */\nfunction pixelDataTint(data, rgb) {\n\n\t// cache as much as possible, there could be a lot of pixels\n\tvar l = data.length,\n\t    r = rgb.r / 255,\n\t    g = rgb.g / 255,\n\t    b = rgb.b / 255;\n\n\t//\n\tfor (var i = 0; i < l; i += 4) {\n\t\tdata[i] = r * data[i] >> 0;\n\t\tdata[i + 1] = g * data[i + 1] >> 0;\n\t\tdata[i + 2] = b * data[i + 2] >> 0;\n\t}\n}\n\n//\nexports.default = sprite;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\r\n                                                                                                                                                                                                                                                                   * @module instances\r\n                                                                                                                                                                                                                                                                   */\n\nvar _math = __webpack_require__(4);\n\nvar _math2 = _interopRequireDefault(_math);\n\nvar _input = __webpack_require__(6);\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _object = __webpack_require__(10);\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _sprite = __webpack_require__(1);\n\nvar _sprite2 = _interopRequireDefault(_sprite);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nvar _compile = __webpack_require__(21);\n\nvar _compile2 = _interopRequireDefault(_compile);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nwindow.global = {};\nvar aInstances = [];\nvar otherStack = [];\n\n//\nvar instance = {\n\n\t//\n\tinstanceArray: aInstances,\n\tinstanceHardLimit: 1000,\n\n\t/**\r\n  * @param {object} obj\r\n  * @param {number} x\r\n  * @param {number} y\r\n  */\n\tcreate: function create(obj, x, y) {\n\n\t\t//\n\t\tvar o = _object2.default.get(obj);\n\t\tif (o === null) {\n\t\t\twindow.addConsoleText(\"#F00\", \"No such object as \" + obj);\n\t\t\twindow._GB_stop();\n\t\t\treturn null;\n\t\t}\n\n\t\tvar inst = o.pool.get();\n\t\tinst.object = o;\n\t\tinst.objectName = o.objectName;\n\t\tinst.assetType = \"instance\";\n\t\tinst.x = Number(x);\n\t\tinst.y = Number(y);\n\t\tinst.boxCollision = _extends({}, inst.boxCollision);\n\n\t\t//\n\t\tvar spr = _sprite2.default.get(inst.sprite);\n\t\tif (spr) {\n\t\t\tinst.boxCollision.x = spr.originX;\n\t\t\tinst.boxCollision.y = spr.originY;\n\t\t\tinst.boxCollision.width = spr.width;\n\t\t\tinst.boxCollision.height = spr.height;\n\t\t}\n\n\t\t//\n\t\tinstance.addToArray(inst);\n\t\tinstance.updateBoundingBox(inst);\n\t\tinstance.updateCollisionBox(inst);\n\t\tinstance.executeEvent(inst, \"create\");\n\n\t\t//\n\t\treturn inst;\n\t},\n\n\t/**\r\n  *\r\n  */\n\taddToArray: function addToArray(inst) {\n\n\t\tfor (var i = 0; i < aInstances.length; i++) {\n\t\t\tif (inst.depth <= aInstances[i].depth) {\n\t\t\t\taInstances.splice(i, 0, inst);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\taInstances.push(inst);\n\t},\n\n\t/**\r\n  * @param {object} obj\r\n  * @param {number} x\r\n  * @param {number} y\r\n  * @param {number} speed\r\n  * @param {number} direction\r\n  */\n\tcreateMoving: function createMoving(obj, x, y, speed, direction) {\n\n\t\tif (aInstances.length >= instance.instanceHardLimit) {\n\t\t\tconsole.warn(\"instance number hard limit reached:\", instance.instanceHardLimit);\n\t\t\treturn;\n\t\t}\n\n\t\tvar newInst = instance.create(obj, x, y);\n\t\tnewInst.speed = speed;\n\t\tnewInst.direction = direction;\n\t\treturn newInst;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tfind: function find(objectName, instNumber) {\n\n\t\tvar n = void 0,\n\t\t    c = 0;\n\t\tfor (n = 0; n < aInstances.length; n++) {\n\t\t\tvar inst = instance.instanceArray[n];\n\t\t\tif (inst.objectName === objectName) {\n\t\t\t\tif (c++ === instNumber) return inst;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tfindRandom: function findRandom(name) {\n\n\t\tvar n = void 0,\n\t\t    c = 0,\n\t\t    instNumber = _math2.default.randomInt(0, count(name) - 1);\n\t\tfor (n = 0; n < instance.instanceArray.length; n++) {\n\t\t\tvar inst = instance.instanceArray[n];\n\t\t\tif (inst.objectName === name) {\n\t\t\t\tif (c++ === instNumber) return inst;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tcount: function count(objectName) {\n\n\t\tvar n = void 0,\n\t\t    c = 0;\n\t\tinstance.instanceArray.forEach(function (inst) {\n\t\t\tc += inst.objectName === objectName;\n\t\t});\n\t\treturn c;\n\t},\n\n\t/**\r\n  * @param {number} rotation\r\n  * @param {boolean} relative\r\n  */\n\tsetRotation: function setRotation(rotation, relative) {\n\t\tthis.rotation = relative ? this.rotation + rotation : rotation;\n\t},\n\n\t/**\r\n  * @param {number} rotation\r\n  * @param {boolean} relative\r\n  */\n\tsetDirection: function setDirection(direction, relative) {\n\t\tthis.direction = relative ? this.direction + direction : direction;\n\t},\n\n\t/**\r\n  * @param {object} inst\r\n  */\n\tmouseOn: function mouseOn(inst) {\n\n\t\treturn !(inst.boxTop > _input2.default.mouse.y / 2 - _draw2.default.offsetY || inst.boxBottom < _input2.default.mouse.y / 2 - _draw2.default.offsetY || inst.boxLeft > _input2.default.mouse.x / 2 - _draw2.default.offsetX || inst.boxRight < _input2.default.mouse.x / 2 - _draw2.default.offsetX);\n\t},\n\n\t/**\r\n  * @param {instance} inst\r\n  */\n\tstep: function step(inst, dt) {\n\n\t\t// step events\n\t\tinstance.executeEvent(inst, \"step\");\n\t\tinstance.updateAnimation(inst, dt);\n\t\tinstance.updatePosition(inst, dt);\n\t\tinstance.updateBoundingBox(inst);\n\t\tinstance.updateCollisionBox(inst);\n\n\t\t// collision events\n\t\tinstance.instanceExecuteListeners(inst);\n\n\t\t// input events\n\t\t_input2.default.triggerEvents.forEach(function (event) {\n\t\t\tinstance.executeEvent(inst, event);\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tupdateAnimation: function updateAnimation(inst, dt) {\n\n\t\tinst.index += inst.imageSpeed;\n\t\tvar spr = _sprite2.default.get(inst.sprite);\n\t\tif (spr) {\n\t\t\tvar length = spr.images.length;\n\t\t\tif (inst.index >= length) {\n\n\t\t\t\tvar behavior = inst.animationBehavior;\n\t\t\t\tvar type = typeof behavior === \"undefined\" ? \"undefined\" : _typeof(behavior);\n\n\t\t\t\t//\n\t\t\t\tif (type === \"string\") {\n\n\t\t\t\t\t//\n\t\t\t\t\tif (behavior === \"loop\") {\n\t\t\t\t\t\tinst.index -= length;\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\t\t\t\t\telse if (behavior === \"stop\") {\n\t\t\t\t\t\t\tinst.index = length - 1;\n\t\t\t\t\t\t\tinst.imageSpeed = 0;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\telse if (type === \"function\") {\n\t\t\t\t\t\tbehavior.call(inst);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\tupdatePosition: function updatePosition(inst, dt) {\n\n\t\t// if the instance is already falling at terminal velocity then we no longer apply gravity\n\t\tvar gravVector = {\n\t\t\tx: _math2.default.lengthDirX(inst.terminal, inst.gravityDirection),\n\t\t\ty: _math2.default.lengthDirY(inst.terminal, inst.gravityDirection)\n\t\t};\n\n\t\tif (gravVector.x > 0 && inst.speedX <= gravVector.x || gravVector.x < 0 && inst.speedX >= gravVector.x) {\n\t\t\tinst.speedX += _math2.default.lengthDirX(inst.gravity, inst.gravityDirection);\n\t\t}\n\n\t\tif (gravVector.y > 0 && inst.speedY <= gravVector.y || gravVector.y < 0 && inst.speedY >= gravVector.y) {\n\t\t\tinst.speedY += _math2.default.lengthDirY(inst.gravity, inst.gravityDirection);\n\t\t}\n\n\t\t// move instance\n\t\tinst.x += inst.speedX * dt;\n\t\tinst.y += inst.speedY * dt;\n\t},\n\n\t/**\r\n  * @param {object} inst\r\n  */\n\tupdateBoundingBox: function updateBoundingBox(inst) {\n\n\t\tvar spr = _sprite2.default.get(inst.sprite);\n\t\tif (spr !== null) {\n\t\t\tinst.boxTop = inst.y - spr.originY * inst.scaleY;\n\t\t\tinst.boxLeft = inst.x - spr.originX * inst.scaleX;\n\t\t\tinst.boxBottom = inst.boxTop + spr.height * inst.scaleY;\n\t\t\tinst.boxRight = inst.boxLeft + spr.width * inst.scaleX;\n\t\t}\n\t},\n\n\t/**\r\n  * @param {object} inst\r\n  */\n\tupdateCollisionBox: function updateCollisionBox(inst) {\n\n\t\tvar box = inst.boxCollision;\n\t\tbox.top = inst.y - box.y * inst.scaleY;\n\t\tbox.left = inst.x - box.x * inst.scaleX;\n\t\tbox.bottom = box.top + box.height * inst.scaleY;\n\t\tbox.right = box.left + box.width * inst.scaleX;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdestroy: function destroy(inst) {\n\t\tvar ev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n\n\t\tinst.exists = false;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdraw: function draw(inst) {\n\n\t\t// execute draw event if it exists, else draw default\n\t\tinst.events[\"draw\"] !== undefined ? instance.executeEvent(inst, \"draw\") : instance.drawSelf(inst);\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdrawSelf: function drawSelf(inst) {\n\n\t\tif (inst.sprite !== null) _draw2.default.sprite(inst.sprite, inst.index, inst.x, inst.y, inst.scaleX, inst.scaleY, inst.rotation);\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdrawDebug: function drawDebug(inst) {\n\n\t\tvar box = inst.boxCollision;\n\t\t_draw2.default.shape.rectangle(box.left, box.top, box.right - box.left, box.bottom - box.top, {\n\t\t\tcolor: \"#FF000055\"\n\t\t});\n\t},\n\n\t/**\r\n  * @param {object} sprite\r\n  */\n\tchangeSprite: function changeSprite(sprite) {\n\t\tthis.sprite = sprite;\n\t},\n\n\t/**\r\n  * @param {object} inst\r\n  */\n\tinstanceExecuteListeners: function instanceExecuteListeners(inst) {\n\n\t\tinst.listeners.forEach(function (listener) {\n\t\t\tswitch (listener.type) {\n\n\t\t\t\tcase \"collision\":\n\t\t\t\t\tinstance.instanceCollisionInstance(inst, listener.target);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tinstanceCollisionInstance: function instanceCollisionInstance(inst, target) {\n\n\t\tvar arr = _object2.default.getAllInstances(target);\n\t\tvar box1 = inst.boxCollision;\n\t\tarr.forEach(function (targ) {\n\n\t\t\t// same instance\n\t\t\tif (inst === targ) return;\n\n\t\t\t// no collision\n\t\t\tvar box2 = targ.boxCollision;\n\t\t\tif (box1.left > box2.right || box1.right < box2.left || box1.top > box2.bottom || box1.bottom < box2.top) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// execute collision event\n\t\t\tinstance.executeEvent(inst, \"collision_\" + target, targ);\n\t\t});\n\t},\n\n\t/**\r\n  * @param {instance} inst\r\n  * @param {event} event\r\n  * @param {instance} otherInst The other instance, in collisions for example.\r\n  */\n\texecuteEvent: function executeEvent(inst, event, otherInst) {\n\n\t\t// set the current \"other\" instance\n\t\totherStack.push(window.other);\n\t\twindow.other = otherInst;\n\n\t\t//\n\t\ttry {\n\n\t\t\tif (inst.exists) {\n\t\t\t\tvar actions = inst.events[event];\n\t\t\t\tif (actions) {\n\t\t\t\t\tinstance.executeActions(inst, actions, otherInst);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\twindow.addConsoleText(\"#F00\", \"Failed to execute event [\" + event + \"]\" + \" of object [\" + inst.objectName + \"]\" + \" with error: \" + err);\n\t\t}\n\n\t\t// restore previous \"other\" instance\n\t\twindow.other = otherStack.pop();\n\t},\n\n\t/**\r\n  *\r\n  */\n\texecuteEventAll: function executeEventAll(event, otherInst) {\n\n\t\tfor (var n = 0; n < aInstances.length; n++) {\n\t\t\tinstance.executeEvent(aInstances[n], event, otherInst);\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\texecuteActions: function executeActions(inst, actions, otherInst) {\n\n\t\tvar condition = true,\n\t\t    steps = [],\n\t\t    scope = 0,\n\t\t    a = void 0,\n\t\t    action = void 0;\n\n\t\tfor (a = 0; a < actions.length; a++) {\n\n\t\t\taction = actions[a];\n\t\t\tswitch (action.flow) {\n\n\t\t\t\t// regular action\n\t\t\t\tcase \"\":\n\n\t\t\t\t\tif (condition) {\n\t\t\t\t\t\tvar func = action.action,\n\t\t\t\t\t\t    args = action.args,\n\t\t\t\t\t\t    n = void 0,\n\t\t\t\t\t\t    newArgs = [];\n\n\t\t\t\t\t\tfor (n = 0; n < args.length; n++) {\n\t\t\t\t\t\t\tswitch (args[n]) {\n\t\t\t\t\t\t\t\tcase \"self\":\n\t\t\t\t\t\t\t\t\tnewArgs[n] = inst;break;\n\t\t\t\t\t\t\t\tcase \"other\":\n\t\t\t\t\t\t\t\t\tnewArgs[n] = otherInst;break;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tnewArgs[n] = _compile2.default.actionExpression.call(inst, args[n]);break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcondition = func.apply(inst, newArgs);\n\t\t\t\t\t\tcondition === undefined ? condition = true : steps[scope] = 0;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\t// control actions\n\t\t\t\tcase \"blockBegin\":\n\t\t\t\t\tscope++;break;\n\t\t\t\tcase \"blockEnd\":\n\t\t\t\t\tscope--;break;\n\t\t\t\tcase \"exitEvent\":\n\t\t\t\t\tif (condition) return false;break;\n\n\t\t\t}\n\n\t\t\t// exit from a single statement after an expression not contained in a block\n\t\t\tif (steps[scope]++ === 1) condition = true;\n\t\t}\n\t},\n\n\t/**\r\n  * @param {number} dt Delta time.\r\n  */\n\tstepAll: function stepAll(dt) {\n\n\t\taInstances.forEach(function (i) {\n\t\t\tinstance.step(i, dt);\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdrawAll: function drawAll() {\n\n\t\taInstances.forEach(function (inst) {\n\t\t\tinst.visible && instance.draw(inst);\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tclearDestroyed: function clearDestroyed() {\n\n\t\tfor (var n = aInstances.length - 1; n >= 0; n--) {\n\t\t\tvar i = aInstances[n];\n\t\t\tif (!i.exists) {\n\t\t\t\ti.exists = true;\n\t\t\t\ti.speedX = 0;\n\t\t\t\ti.speedY = 0;\n\t\t\t\ti.object.pool.release(i);\n\t\t\t\taInstances.splice(n, 1);\n\t\t\t}\n\t\t}\n\t}\n\n};\n\nexports.default = instance;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar canvas = {\n\n\t//\n\tarray: [],\n\tmain: null,\n\tdom: null,\n\n\t/**\r\n  *\r\n  */\n\tcreate: function create() {\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t\t//\n\t\tvar c = document.createElement(\"CANVAS\");\n\t\tcanvas.array.push(c);\n\n\t\t//\n\t\tc.width = options.width || 300;\n\t\tc.height = options.height || 150;\n\t\tc.scale = options.scale || 1;\n\t\tc.application = options.application || false;\n\n\t\t//\n\t\tif (options.crisp2D) {\n\t\t\tvar ctx = c.getContext(\"2d\");\n\t\t\tctx.imageSmoothingEnabled = false;\n\t\t\t//ctx.scale( c.scale, c.scale );\n\t\t}\n\n\t\t//\n\t\tif (c.application) {\n\t\t\t_draw2.default.setTarget(c);\n\t\t\tcanvas.setMain(c);\n\t\t}\n\n\t\t//\n\t\tc.oncontextmenu = function (e) {\n\t\t\te.preventDefault();\n\t\t};\n\n\t\t//\n\t\treturn c;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsetMain: function setMain(c) {\n\n\t\tcanvas.main = c;\n\t\tif (canvas.dom === null) {\n\t\t\tcanvas.dom = c;\n\t\t\tvar el = document.getElementById(\"gbgamebox\") || document.body;\n\t\t\tel.appendChild(c);\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\tgetMain: function getMain() {\n\t\treturn canvas.main;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tclear: function clear(c, color) {\n\t\tvar ctx = c.getContext(\"2d\");\n\t\tctx.fillStyle = color || \"#000000\";\n\t\tctx.fillRect(0, 0, c.width / c.scale, c.height / c.scale);\n\t}\n\n\t//\n}; /**\r\n    * @module canvas\r\n    */\n\n//\nexports.default = canvas;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\r\n * @module math\r\n */\n\nvar math = {\n\n\t// constances\n\tPI: Math.PI,\n\tRADTODEG: 180 / Math.PI,\n\tDEGTORAD: Math.PI / 180,\n\n\t// copied functions\n\tcos: Math.cos,\n\tsin: Math.sin,\n\tsign: Math.sign,\n\n\t/**\r\n  *\r\n  */\n\trandomInt: function randomInt(min, max) {\n\t\tmin = Math.ceil(min);\n\t\tmax = Math.floor(max);\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tchoose: function choose() {\n\t\tfor (var _len = arguments.length, value = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\tvalue[_key] = arguments[_key];\n\t\t}\n\n\t\treturn value[Math.floor(Math.random() * value.length)];\n\t},\n\n\t/**\r\n  *\r\n  */\n\tlengthDirX: function lengthDirX(l, d) {\n\t\treturn Math.cos(d * math.DEGTORAD) * l;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tlengthDirY: function lengthDirY(l, d) {\n\t\treturn Math.sin(d * math.DEGTORAD) * l;\n\t},\n\n\t/**\r\n  * @param {number} x1\r\n  * @param {number} y1\r\n  * @param {number} x2\r\n  * @param {number} y2\r\n  */\n\tpointDistance: function pointDistance(x1, y1, x2, y2) {\n\t\tvar a = x1 - x2,\n\t\t    b = y1 - y2;\n\t\treturn Math.sqrt(a * a + b * b);\n\t},\n\n\t/**\r\n  * @param {number} x1\r\n  * @param {number} y1\r\n  * @param {number} x2\r\n  * @param {number} y2\r\n  */\n\tpointDirection: function pointDirection(x1, y1, x2, y2) {\n\t\treturn (Math.atan2(y2 - y1, x2 - x1) * math.RADTODEG + 360) % 360;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tangleDifference: function angleDifference(angle1, angle2) {\n\n\t\tvar diff = (angle2 - angle1) % 360;\n\n\t\tif (diff <= -180) {\n\t\t\tdiff += 360;\n\t\t} else if (diff > 180) {\n\t\t\tdiff -= 360;\n\t\t}\n\n\t\treturn diff;\n\t}\n\n\t//\n};exports.default = math;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\r\n                                                                                                                                                                                                                                                                               * @module room\r\n                                                                                                                                                                                                                                                                               */\n\n//\n\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _sprite = __webpack_require__(1);\n\nvar _sprite2 = _interopRequireDefault(_sprite);\n\nvar _draw2 = __webpack_require__(0);\n\nvar _draw3 = _interopRequireDefault(_draw2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar room = {\n\n\tarray: [],\n\tcurrent: null,\n\n\t/**\r\n  * @param {string} name\r\n  * @param {int} width\r\n  * @param {int} height\r\n  */\n\tcreate: function create(name, width, height) {\n\n\t\tvar newRoom = {\n\t\t\tname: name,\n\t\t\tassetType: \"room\",\n\t\t\twidth: Number(width),\n\t\t\theight: Number(height),\n\t\t\tbackground: null,\n\t\t\tbackgroundMethod: \"no-repeat\",\n\t\t\tinstances: []\n\t\t};\n\n\t\tif (room.current === null) room.current = newRoom;\n\n\t\troom.array.push(newRoom);\n\t\treturn newRoom;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsetBackground: function setBackground(rm, spr) {\n\n\t\trm = room.get(rm);\n\t\trm.background = spr;\n\t},\n\n\t/**\r\n  *\r\n  */\n\taddInstance: function addInstance(rm, inst, x, y) {\n\n\t\trm = room.get(rm);\n\t\trm.instances.push({ name: inst, x: x, y: y });\n\t},\n\n\t/**\r\n  *\r\n  */\n\tenter: function enter(rm) {\n\n\t\t// leave room event\n\t\t_instance2.default.executeEventAll(\"roomleave\");\n\n\t\t// clear current instances\n\t\t_instance2.default.instanceArray.forEach(function (i) {\n\t\t\t_instance2.default.destroy(i, false);\n\t\t});\n\n\t\t// goto new room and create new instances\n\t\trm = room.get(rm);\n\t\troom.current = rm;\n\t\trm.instances.forEach(function (inst) {\n\t\t\t_instance2.default.create(inst.name, inst.x, inst.y);\n\t\t});\n\n\t\t// enter room event\n\t\t_instance2.default.executeEventAll(\"roomenter\");\n\t},\n\n\t/**\r\n  *\r\n  */\n\tdraw: function draw(rm) {\n\n\t\t// draw background\n\t\trm = room.get(rm);\n\t\tvar spr = _sprite2.default.get(rm.background);\n\t\tif (spr !== null) {\n\n\t\t\tvar canvas = _draw3.default.getTarget();\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tvar image = spr.images[0].img;\n\t\t\tif (rm.backgroundMethod === \"stretch\") {\n\t\t\t\tctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t\t\t} else {\n\t\t\t\tvar ptrn = ctx.createPattern(image, rm.backgroundMethod);\n\t\t\t\tctx.fillStyle = ptrn;\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\tget: function get(name) {\n\n\t\tif ((typeof name === \"undefined\" ? \"undefined\" : _typeof(name)) === \"object\") return name;\n\n\t\tfor (var n = 0; n < room.array.length; n++) {\n\t\t\tif (room.array[n][\"name\"] === name) return room.array[n];\n\t\t}return null;\n\t}\n\n\t//\n};exports.default = room;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _canvas = __webpack_require__(3);\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nvar _keyvalues = __webpack_require__(9);\n\nvar _keyvalues2 = _interopRequireDefault(_keyvalues);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @module input\r\n */\n\nvar element = document;\n\n// mouse object\nvar __mouse = {\n\tpressed: [false, false, false],\n\tdown: [false, false, false],\n\treleased: [false, false, false],\n\twheelUp: false,\n\twheelDown: false,\n\tx: 0,\n\ty: 0\n\n\t// keboard object\n};var __keyboard = {\n\tpressed: {},\n\tdown: {},\n\treleased: {}\n\n\t// touch object\n};var __touch = {\n\tstart: [],\n\theld: [],\n\tmove: [],\n\tend: [],\n\tcancel: [],\n\tx: [],\n\ty: []\n\n\t//\n};var __triggerEvents = [];\n\n//\nvar input = {\n\n\ttriggerEvents: __triggerEvents,\n\tmouse: __mouse,\n\tkeyboard: __keyboard,\n\ttouch: __touch,\n\n\t/**\r\n  *\r\n  */\n\tinit: function init() {\n\n\t\t// init all input methods\n\t\tinput.initMouse();\n\t\tinput.initKeyboard();\n\t\tinput.initTouch();\n\n\t\t// disable context menu\n\t\telement.oncontextmenu = function (e) {\n\t\t\te.preventDefault();\n\t\t};\n\t},\n\n\t/**\r\n  *\r\n  */\n\tinitMouse: function initMouse() {\n\n\t\t//\n\t\tvar handleMouseDown = function handleMouseDown(e) {\n\t\t\te.preventDefault();\n\t\t\t!__mouse.pressed[e.button] && window.focus();\n\t\t\t__mouse.pressed[e.button] = true;\n\t\t\t__mouse.down[e.button] = true;\n\t\t};\n\n\t\t//\n\t\tvar handleMouseUp = function handleMouseUp(e) {\n\t\t\te.preventDefault();\n\t\t\t__mouse.pressed[e.button] = false;\n\t\t\t__mouse.released[e.button] = true;\n\t\t\t__mouse.down[e.button] = false;\n\t\t};\n\n\t\t//\n\t\tvar handleMouseMove = function handleMouseMove(e) {\n\t\t\tvar canv = _canvas2.default.main;\n\t\t\tvar rect = canv.getBoundingClientRect();\n\t\t\t__mouse.x = e.clientX - rect.left;\n\t\t\t__mouse.y = e.clientY - rect.top;\n\t\t\tconsole.log(e.clientX);\n\t\t};\n\n\t\t//\n\t\tvar handleMouseWheel = function handleMouseWheel(e) {\n\t\t\te.preventDefault();\n\t\t\tvar delta = Math.max(-1, Math.min(1, e.wheelDelta));\n\t\t\t__mouse.wheelUp = delta > 0;\n\t\t\t__mouse.wheelDown = delta < 0;\n\t\t};\n\n\t\t//\n\t\telement.onmousedown = handleMouseDown;\n\t\telement.onmouseup = handleMouseUp;\n\t\telement.onmousemove = handleMouseMove;\n\t\telement.onmousewheel = handleMouseWheel;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tinitKeyboard: function initKeyboard() {\n\n\t\t//\n\t\t_keyvalues2.default.forEach(function (key) {\n\t\t\t__keyboard.pressed[key] = false;\n\t\t\t__keyboard.down[key] = false;\n\t\t\t__keyboard.released[key] = false;\n\t\t});\n\n\t\t//\n\t\tvar handleKeyDown = function handleKeyDown(e) {\n\t\t\te.preventDefault();\n\t\t\tif (!__keyboard.down[e.code]) {\n\t\t\t\t__keyboard.pressed[e.code] = true;\n\t\t\t\t__keyboard.down[e.code] = true;\n\t\t\t}\n\t\t};\n\n\t\t//\n\t\tvar handleKeyUp = function handleKeyUp(e) {\n\t\t\te.preventDefault();\n\t\t\t__keyboard.released[e.code] = true;\n\t\t\t__keyboard.down[e.code] = false;\n\t\t};\n\n\t\t//\n\t\telement.onkeydown = handleKeyDown;\n\t\telement.onkeyup = handleKeyUp;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tinitTouch: function initTouch() {\n\n\t\t//\n\t\tvar handleTouchStart = function handleTouchStart(e) {\n\t\t\te.preventDefault();\n\t\t\t!__touch.start[0] && window.focus();\n\t\t\t__touch.start[0] = true;\n\t\t\t__touch.held[0] = true;\n\t\t};\n\n\t\t//\n\t\tvar handleTouchEnd = function handleTouchEnd(e) {\n\t\t\te.preventDefault();\n\t\t\t__touch.start[0] = false;\n\t\t\t__touch.end[0] = true;\n\t\t\t__touch.held[0] = false;\n\t\t};\n\n\t\t//\n\t\tvar handleTouchMove = function handleTouchMove(e) {\n\t\t\te.preventDefault();\n\t\t\tvar touches = e.changedTouches;\n\t\t\t__touch.x[0] = touches[0].pageX;\n\t\t\t__touch.y[0] = touches[0].pageY;\n\t\t};\n\n\t\t//\n\t\telement.ontouchstart = handleTouchStart;\n\t\telement.ontouchend = handleTouchEnd;\n\t\telement.ontouchcancel = handleTouchEnd;\n\t\telement.ontouchmove = handleTouchMove;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tgetTriggerEvents: function getTriggerEvents() {\n\n\t\t__triggerEvents.length = 0;\n\t\tObject.keys(__keyboard.down).forEach(function (key) {\n\n\t\t\tif (_keyvalues2.default.includes(key)) {\n\n\t\t\t\tif (__keyboard.down[key]) __triggerEvents.push(key);\n\n\t\t\t\tif (__keyboard.pressed[key]) __triggerEvents.push(key + \"Pressed\");\n\n\t\t\t\tif (__keyboard.released[key]) __triggerEvents.push(key + \"Released\");\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"input key not supported: \", key);\n\t\t\t\tdelete __keyboard.down[key];\n\t\t\t}\n\t\t});\n\n\t\t// map mouse ids to names\n\t\tvar mouseMap = [\"Left\", \"Middle\", \"Right\"];\n\n\t\t// mouse events\n\t\tfor (var n = 0; n < 3; n++) {\n\n\t\t\tif (__mouse.down[n]) __triggerEvents.push(mouseMap[n] + \"Down\");\n\n\t\t\tif (__mouse.pressed[n]) __triggerEvents.push(mouseMap[n] + \"Pressed\");\n\n\t\t\tif (__mouse.released[n]) __triggerEvents.push(mouseMap[n] + \"Released\");\n\t\t}\n\n\t\tif (__mouse.wheelUp) __triggerEvents.push(\"WheelUp\");\n\t\tif (__mouse.wheelDown) __triggerEvents.push(\"WheelDown\");\n\t},\n\n\t/**\r\n  *\r\n  */\n\tupdate: function update() {\n\n\t\tObject.keys(__keyboard.down).forEach(function (key) {\n\t\t\t__keyboard.pressed[key] = false;\n\t\t\t__keyboard.released[key] = false;\n\t\t});\n\n\t\tObject.keys(__mouse.down).forEach(function (button) {\n\t\t\t__mouse.pressed[button] = false;\n\t\t\t__mouse.released[button] = false;\n\t\t});\n\n\t\tObject.keys(__touch.held).forEach(function (button) {\n\t\t\t__touch.start[button] = false;\n\t\t\t__touch.end[button] = false;\n\t\t\t__touch.held[button] = false;\n\t\t});\n\n\t\t__mouse.wheelUp = false;\n\t\t__mouse.wheelDown = false;\n\t}\n\n\t//\n};exports.default = input;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _canvas = __webpack_require__(3);\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nvar _room = __webpack_require__(5);\n\nvar _room2 = _interopRequireDefault(_room);\n\nvar _input = __webpack_require__(6);\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _global = __webpack_require__(13);\n\nvar _global2 = _interopRequireDefault(_global);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nvar _camera = __webpack_require__(14);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar lastTick = performance.now(),\n    tickLength = 1000 / 60,\n    dt = 0,\n    last = 0;\n\n//\n/**\r\n * @module main\r\n */\n\nvar main = {\n\n\t/**\r\n  *\r\n  */\n\tget dt() {\n\t\treturn dt;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tstart: function start() {\n\t\tvar opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t\t// Basic site-locking\n\t\tif (opts.host !== undefined && opts.host !== \"\") {\n\t\t\tvar loc = window.parent ? window.parent.location : window.location;\n\t\t\tvar host = loc.hostname;\n\t\t\tvar arr = opts.host.split(\" \").join(\"\").split(\",\");\n\t\t\tif (!opts.host.includes(host)) return;\n\t\t}\n\n\t\t//\n\t\tvar canv = _canvas2.default.create({\n\t\t\twidth: _room2.default.current.width,\n\t\t\theight: _room2.default.current.height,\n\t\t\tcrisp2D: true,\n\t\t\tapplication: true\n\t\t});\n\n\t\t// selectively enable input methods\n\t\topts.enableMouse && _input2.default.initMouse();\n\t\topts.enableKeyboard && _input2.default.initKeyboard();\n\t\topts.enableTouch && _input2.default.initTouch();\n\n\t\t//\n\t\topts.hideCursor && (canv.style.cursor = \"none\");\n\n\t\t//\n\t\t_room2.default.enter(_room2.default.current);\n\t\ttick(performance.now());\n\t},\n\n\t/**\r\n  *\r\n  */\n\tsetGameSpeed: function setGameSpeed(speed) {\n\t\ttickLength = 1000 / speed;\n\t}\n\n\t/**\r\n  *\r\n  */\n};function tick(timestamp) {\n\n\t// exit game with Esc key\n\tif (window._GB_stop && _input2.default.triggerEvents.includes(\"EscapePressed\")) window._GB_stop();\n\n\t// request the next frame\n\twindow.requestAnimationFrame(tick);\n\tvar nextTick = lastTick + tickLength;\n\tvar numTicks = 0;\n\t_global2.default.fps = 1000 / (timestamp - last);\n\tlast = timestamp;\n\n\t//\n\tif (timestamp > nextTick) {\n\t\tvar timeSinceTick = timestamp - lastTick;\n\t\tnumTicks = Math.floor(timeSinceTick / tickLength);\n\t}\n\n\t//\n\t_input2.default.getTriggerEvents();\n\tqueueUpdates(numTicks);\n\tgameDraw();\n\n\t//\n\tif (numTicks) {\n\t\t_input2.default.update();\n\t}\n}\n\n/**\r\n *\r\n */\nfunction queueUpdates(numTicks) {\n\tfor (var i = 0; i < numTicks; i++) {\n\t\tlastTick = lastTick + tickLength;\n\t\tdt = 1;\n\t\tgameUpdate(1);\n\t}\n}\n\n/**\r\n * @param {number} dt Delta Time.\r\n */\nfunction gameUpdate(dt) {\n\t_instance2.default.stepAll(dt);\n\t_instance2.default.clearDestroyed();\n}\n\n/**\r\n *\r\n */\nfunction gameDraw() {\n\t_draw2.default.reset();\n\t_canvas2.default.clear(_canvas2.default.main, \"#000000\");\n\t_room2.default.draw(_room2.default.current);\n\t_camera2.default.update();\n\t_instance2.default.drawAll();\n}\n\n/**\r\n *\r\n */\nfunction handleResizeEvent() {\n\t_instance2.default.executeEventAll(\"resize\");\n}\n\n// attach event listerners\nwindow.addEventListener(\"resize\", handleResizeEvent);\n\n//\nexports.default = main;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar color = {\n\n\t/**\r\n  * @param {string} hex\r\n  */\n\thexToRgb: function hexToRgb(hex) {\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result ? {\n\t\t\tr: parseInt(result[1], 16),\n\t\t\tg: parseInt(result[2], 16),\n\t\t\tb: parseInt(result[3], 16)\n\t\t} : null;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tcomponentToHex: function componentToHex(c) {\n\t\tvar hex = c.toString(16);\n\t\treturn hex.length == 1 ? \"0\" + hex : hex;\n\t},\n\n\t/**\r\n  *\r\n  */\n\trgbToHex: function rgbToHex(r, g, b) {\n\t\treturn \"#\" + color.componentToHex(r) + color.componentToHex(g) + color.componentToHex(b);\n\t}\n\n\t//\n};exports.default = color;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\r\n * @module keyvalues\r\n */\n\nvar values = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\", \"Enter\", \"Space\", \"Backspace\", \"Escape\", \"ShiftLeft\", \"ShiftRight\", \"ControlLeft\", \"ControlRight\", \"AltLeft\", \"AltRight\", \"KeyA\", \"KeyB\", \"KeyC\", \"KeyD\", \"KeyE\", \"KeyF\", \"KeyG\", \"KeyH\", \"KeyI\", \"KeyJ\", \"KeyK\", \"KeyL\", \"KeyM\", \"KeyN\", \"KeyO\", \"KeyP\", \"KeyQ\", \"KeyR\", \"KeyS\", \"KeyT\", \"KeyU\", \"KeyV\", \"KeyW\", \"KeyZ\", \"KeyY\", \"KeyZ\"];\n\nexports.default = values;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\r\n                                                                                                                                                                                                                                                                               * @module objects\r\n                                                                                                                                                                                                                                                                               */\n\nvar _event = __webpack_require__(11);\n\nvar _event2 = _interopRequireDefault(_event);\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _objectVars = __webpack_require__(20);\n\nvar _objectVars2 = _interopRequireDefault(_objectVars);\n\nvar _pool = __webpack_require__(12);\n\nvar _pool2 = _interopRequireDefault(_pool);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar objectArray = [];\n\n//\nvar objectModule = {\n\n\t/**\r\n  * @param {string} name\r\n  * @param {number} sprite\r\n  */\n\tcreate: function create(name, sprite) {\n\n\t\t// build new object\n\t\tvar obj = function obj() {};\n\t\t_objectVars2.default.set(obj.prototype);\n\n\t\t//\n\t\tobj.assetType = \"object\";\n\t\tobj.objectName = name || \"object_\" + obj.id;\n\t\tobj.prototype.sprite = sprite || null;\n\n\t\t//\n\t\tobj.pool = new _pool2.default(obj);\n\n\t\t//\n\t\tobjectArray.push(obj);\n\t\treturn obj;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tset: function set(obj, property, value) {\n\t\tobj = objectModule.get(obj);\n\t\tobj.prototype[property] = value;\n\t},\n\n\t/**\r\n  * Add an action with variable parameters to an event of an object.\r\n  * @param object Can be an object constructor or integer ID.\r\n  * @param event\r\n  * @param action\r\n  * @param {...*} args\r\n  */\n\teventAddAction: function eventAddAction(obj, event, action) {\n\t\tfor (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n\t\t\targs[_key - 3] = arguments[_key];\n\t\t}\n\n\t\tobj = objectModule.get(obj);\n\n\t\tif ((typeof event === \"undefined\" ? \"undefined\" : _typeof(event)) === \"object\") {\n\t\t\tObject.keys(event).forEach(function (key) {\n\t\t\t\tevent[key].forEach(function (params) {\n\t\t\t\t\tobjectModule.eventAddAction.apply(objectModule, [obj, key].concat(_toConsumableArray(params)));\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (action !== undefined) {\n\n\t\t\t// if flow action, get flow tag\n\t\t\tvar flow = \"\";\n\t\t\tif (typeof action === \"string\") flow = action;\n\n\t\t\t// create a new event if not yet defined\n\t\t\tif (obj.prototype.events[event] === undefined) {\n\n\t\t\t\tobj.prototype.events[event] = [];\n\n\t\t\t\tif (event.includes(\"collision_\")) {\n\n\t\t\t\t\tvar index = event.indexOf(\"_\") + 1,\n\t\t\t\t\t    name = event.slice(index, 200);\n\n\t\t\t\t\tobjectModule.addCollisionListener(obj, name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add action data to event\n\t\t\tobj.prototype.events[event].push({\n\t\t\t\tflow: flow,\n\t\t\t\taction: action,\n\t\t\t\targs: args\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"tried to add an undefined action to an event!\");\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\taddCollisionListener: function addCollisionListener(obj, target) {\n\n\t\tobj.prototype.listeners.push({\n\t\t\ttype: \"collision\",\n\t\t\ttarget: target\n\t\t});\n\t},\n\n\t/**\r\n  *\r\n  */\n\tgetAllInstances: function getAllInstances(obj) {\n\n\t\tvar arr = [];\n\t\t_instance2.default.instanceArray.forEach(function (instance) {\n\t\t\tvar name = instance.constructor.objectName;\n\t\t\tif (name === obj) arr.push(instance);\n\t\t});\n\t\treturn arr;\n\t},\n\n\t/**\r\n  * @param {number}\r\n  */\n\tget: function get(value) {\n\n\t\tif ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" || typeof value === \"function\") return value;\n\n\t\tfor (var n = 0; n < objectArray.length; n++) {\n\t\t\tif (objectArray[n].objectName === value) return objectArray[n];\n\t\t}console.warn(\"FAIL: \", typeof value === \"undefined\" ? \"undefined\" : _typeof(value), value);\n\t\treturn null;\n\t}\n\n\t//\n};exports.default = objectModule;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\r\n                                                                                                                                                                                                                                                                   * @module event\r\n                                                                                                                                                                                                                                                                   */\n\nvar _keyvalues = __webpack_require__(9);\n\nvar _keyvalues2 = _interopRequireDefault(_keyvalues);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar events = {\n\n\tcreate: \"create\",\n\troomEnter: \"roomEnter\",\n\troomLeave: \"roomLeave\",\n\tstep: \"step\",\n\tdraw: \"draw\",\n\tcollision: \"collision_\",\n\tresize: \"resize\",\n\tkeyboard: _extends({}, translate(_keyvalues2.default), {\n\t\tpressed: translate(_keyvalues2.default, \"Pressed\"),\n\t\treleased: translate(_keyvalues2.default, \"Released\")\n\t})\n\n\t/**\r\n  * @param {array} array\r\n  * @param {string} [postfix=\"\"]\r\n  */\n};function translate(array) {\n\tvar postfix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n\tvar obj = {};\n\tarray.forEach(function (name) {\n\t\tobj[name] = name + postfix;\n\t});\n\treturn obj;\n}\n\n//\nexports.default = events;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = Pool;\n/**\r\n * @module Pool\r\n */\n\n/**\r\n * The Pool object contains an array (the pool) called stack to which we can give objects. The Pool also maintains it's own length property, as the true length of the stack array does not change, so as to avoid garbage collection.\r\n * @param {Object} newConstructor The constructor function for this pool. During get, if no items are in the pool and no default value is provided, a new object is created from this constructor and returned.\r\n */\nfunction Pool(newConstructor) {\n\tthis.stack = [];\n\tthis.length = 0;\n\tthis.newConstructor = newConstructor;\n}\n\n/**\r\n * @param {Object} [def] The default object (or even value) to return if no items are found in the pool. If this is not defined, and no items are found in the pool, then a new object is created as per the Pool's newConstructor property.\r\n */\nPool.prototype.get = function (def) {\n\n\t// return object from pool\n\tif (this.length) {\n\t\tdef = this.stack[--this.length];\n\t\tthis.stack[this.length] = undefined;\n\t}\n\n\t// return found/default object or create a new one\n\treturn def || new this.newConstructor();\n};\n\n/**\r\n * @param {Object} i Objec to release, adding it to the pool.\r\n */\nPool.prototype.release = function (i) {\n\tthis.stack[this.length++] = i;\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar global = {\n\tfps: 0\n};\n\nexports.default = global;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\r\n                                                                                                                                                                                                                                                                   * @module camera\r\n                                                                                                                                                                                                                                                                   */\n\n//\n\n\nvar _room = __webpack_require__(5);\n\nvar _room2 = _interopRequireDefault(_room);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar camera = {\n\n\t//\n\tarray: [],\n\n\t/**\r\n  *\r\n  */\n\tcreate: function create() {\n\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t\t// create new camera\n\t\tvar cam = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tangle: 0,\n\t\t\twidth: _room2.default.current.width,\n\t\t\theight: _room2.default.current.height,\n\t\t\tfollow: null,\n\t\t\tgridLocked: false,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\tbottom: 0\n\n\t\t\t// assign options to new camera\n\t\t};_extends(cam, options);\n\n\t\t// add to camera list\n\t\tcamera.array.push(cam);\n\t\treturn cam;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tupdate: function update() {\n\n\t\tcamera.array.forEach(function (cam) {\n\n\t\t\t// camera is following an instance\n\t\t\tif (cam.follow !== null) {\n\n\t\t\t\t// if single instance, put into array\n\t\t\t\tif (!Array.isArray(cam.follow)) {\n\t\t\t\t\tcam.follow = [cam.follow];\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\tvar x = 0,\n\t\t\t\t    y = 0,\n\t\t\t\t    count = 0,\n\t\t\t\t    weight = 1;\n\n\t\t\t\tcam.follow.forEach(function (inst) {\n\n\t\t\t\t\tif (Array.isArray(inst)) {\n\t\t\t\t\t\tweight = inst[1] || 1;\n\t\t\t\t\t\tinst = inst[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tweight = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tx += inst.x * weight;\n\t\t\t\t\ty += inst.y * weight;\n\t\t\t\t\tcount += weight;\n\t\t\t\t});\n\n\t\t\t\tcam.x = x / count;\n\t\t\t\tcam.y = y / count;\n\t\t\t}\n\n\t\t\t// update bounds\n\t\t\tcam.left = cam.x - cam.width * 0.5;\n\t\t\tcam.right = cam.x + cam.width * 0.5;\n\t\t\tcam.top = cam.y - cam.height * 0.5;\n\t\t\tcam.bottom = cam.y + cam.height * 0.5;\n\n\t\t\t// apply camera\n\t\t\t_draw2.default.transform.translate(-cam.left, -cam.top);\n\t\t});\n\t}\n\n\t//\n};exports.default = camera;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\r\n * @module sound\r\n */\n\n//\nvar soundResources = [];\n\n//\nvar soundModule = {\n\n\t//\n\tisEnabled: true,\n\n\t/**\r\n  * Whether sound should be enabled at all.\r\n  */\n\tenable: function enable(x) {\n\t\tsoundModule.isEnabled = x;\n\t},\n\n\t/**\r\n  * @param {string} name\r\n  * @param {source} source\r\n  */\n\tcreate: function create(name, source) {\n\n\t\t//\n\t\tvar sound = {\n\t\t\tname: name,\n\t\t\tassetType: \"sound\",\n\t\t\tinstances: [new Audio(source)],\n\t\t\tready: false\n\n\t\t\t//\n\t\t};var test = sound.instances[0];\n\t\tvar callback = function callback() {\n\t\t\tsound.ready = true;\n\t\t\ttest.oncanplaythrough = null;\n\t\t};\n\t\ttest.oncanplaythrough = callback;\n\n\t\t//\n\t\tsoundResources.push(sound);\n\t\treturn sound;\n\t},\n\n\t/**\r\n  * @param {object} sound The sound resource (object) to be played.\r\n  * @param {object} options object.\r\n  */\n\tplay: function play(soundName) {\n\t\tvar options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n\t\t//\n\t\tvar sound = void 0;\n\t\tif ((typeof sound === \"undefined\" ? \"undefined\" : _typeof(sound)) !== \"object\") sound = soundModule.get(soundName);\n\n\t\tif (!sound) {\n\t\t\tconsole.warn(\"sound with name \" + soundName + \" doesn't exist!\");\n\t\t\treturn;\n\t\t}\n\n\t\t// sound is enabled\n\t\tif (soundModule.isEnabled) {\n\n\t\t\t// find an existing sound instance to play\n\t\t\tvar playSound = void 0;\n\t\t\tfor (var i = 0, n = sound.instances.length; i < n; i++) {\n\t\t\t\tvar instance = sound.instances[i];\n\t\t\t\tif (instance.paused) playSound = instance;\n\t\t\t}\n\n\t\t\t// create new instance of sound\n\t\t\tif (!playSound) {\n\t\t\t\tplaySound = sound.instances[0].cloneNode();\n\t\t\t\tsound.instances.push(playSound);\n\t\t\t}\n\n\t\t\t//\n\t\t\tplaySound.onError = function (err) {\n\t\t\t\tconsole.error(soundName, err);\n\t\t\t};\n\n\t\t\t// play the sound\n\t\t\tvar promise = playSound.play();\n\t\t\tif (promise !== undefined) {\n\t\t\t\tpromise.then(function () {\n\n\t\t\t\t\t// on end event\n\t\t\t\t\tplaySound.onended = function () {\n\n\t\t\t\t\t\t// internal event stuff\n\t\t\t\t\t\t(Number(options.loop || false) ? _loop : _end).call(this);\n\n\t\t\t\t\t\t// and custom event, if defined\n\t\t\t\t\t\toptions.onEnd && options.onEnd();\n\t\t\t\t\t};\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.warn(error);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//\n\t\t\treturn playSound;\n\t\t}\n\n\t\t// sound is disabled, just return base audio node\n\t\treturn sound.instances[0];\n\t},\n\n\t/**\r\n  *\r\n  */\n\tstop: function stop(sound) {\n\n\t\t//\n\t\tif ((typeof sound === \"undefined\" ? \"undefined\" : _typeof(sound)) !== \"object\") sound = soundModule.get(sound);\n\n\t\t// stop all instance of the given sound\n\t\tfor (var i = 0, n = sound.instances.length; i < n; i++) {\n\t\t\tvar instance = sound.instances[i];\n\t\t\tif (!instance.paused) _end.call(instance);\n\t\t}\n\t},\n\n\t/**\r\n  *\r\n  */\n\treadyAll: function readyAll() {\n\n\t\tfor (var i = 0, n = soundResources.length; i < n; i++) {\n\t\t\tif (!soundResources[i].ready) return false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\r\n  *\r\n  */\n\tget: function get(value) {\n\n\t\t//\n\t\tfor (var i = 0, n = soundResources.length; i < n; i++) {\n\t\t\tif (soundResources[i].name === value) return soundResources[i];\n\t\t}\n\t}\n\n\t//\n};function _loop() {\n\tthis.currentTime = 0;\n\tthis.play();\n}\n\n//\nfunction _end() {\n\tthis.pause();\n\tthis.currentTime = 0;\n}\n\n//\nexports.default = soundModule;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\r\n * @module generator\r\n */\n\n//\nvar generator = {\n\n\t/**\r\n  * @param {function} constructor\r\n  */\n\tfunctionFromConstructor: function functionFromConstructor(constructor) {\n\t\treturn function () {\n\t\t\tfor (var _len = arguments.length, a = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\ta[_key] = arguments[_key];\n\t\t\t}\n\n\t\t\treturn new (Function.prototype.bind.apply(constructor, [null].concat(a)))();\n\t\t};\n\t},\n\n\t/**\r\n  * @param {function} method\r\n  */\n\tfunctionFromMethod: function functionFromMethod(method) {\n\t\treturn function () {\n\t\t\treturn method.call.apply(method, arguments);\n\t\t};\n\t}\n\n\t//\n};exports.default = generator;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _pool = __webpack_require__(12);\n\nvar _pool2 = _interopRequireDefault(_pool);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar gridPool = new _pool2.default(Grid);\n\n/**\r\n *\r\n */\n/**\r\n * @module dataGrid\r\n */\n\n//\nvar Grid = function Grid(width, height) {\n\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\n\t//\n\tvar size = width * height,\n\t    value = options.value || 0;\n\n\tvar myGrid = gridPool.get(this);\n\tvar array = myGrid === this ? this.data = [] : myGrid.data;\n\n\t// fill grid with default value\n\tfor (var n = 0; n < size; n++) {\n\t\tarray[n] = value;\n\t}\n\n\t//\n\tmyGrid.size = size;\n\tmyGrid.width = width;\n\tmyGrid.height = height;\n\treturn myGrid;\n};\n\n/**\r\n *\r\n */\nGrid.prototype.get = function (x, y) {\n\treturn this.data[x + y * this.width];\n};\n\n/**\r\n *\r\n */\nGrid.prototype.set = function (x, y, value) {\n\tthis.data[x + y * this.width] = value;\n};\n\n/**\r\n *\r\n */\nGrid.prototype.destroy = function () {\n\tgridPool.release(this);\n};\n\n//\nexports.default = Grid;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n//\nvar tween = {\n\n\t/**\r\n  *\r\n  */\n\tblend: function blend(n1, n2, perc) {\n\t\tvar diff = n2 - n1;\n\t\treturn n1 + diff * perc;\n\t},\n\n\n\t/**\r\n  *\r\n  */\n\tcubicBezier: function cubicBezier(x2, y2, x3, y3, i) {\n\n\t\tvar x1 = 0,\n\t\t    y1 = 0,\n\t\t    x4 = 1,\n\t\t    y4 = 1;\n\n\t\t// The Green Lines\n\t\tvar xa = tween.blend(x1, x2, i),\n\t\t    ya = tween.blend(y1, y2, i),\n\t\t    xb = tween.blend(x2, x3, i),\n\t\t    yb = tween.blend(y2, y3, i),\n\t\t    xc = tween.blend(x3, x4, i),\n\t\t    yc = tween.blend(y3, y4, i),\n\n\n\t\t// The Blue Line\n\t\txm = tween.blend(xa, xb, i),\n\t\t    ym = tween.blend(ya, yb, i),\n\t\t    xn = tween.blend(xb, xc, i),\n\t\t    yn = tween.blend(yb, yc, i),\n\n\n\t\t// The Black Dot\n\t\tx = tween.blend(xm, xn, i),\n\t\t    y = tween.blend(ym, yn, i);\n\n\t\t//\n\t\treturn y;\n\t}\n};\n\n//\nexports.default = tween;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.tween = exports.math = exports.draw = exports.instance = exports.action = exports.event = exports.object = exports.sound = exports.sprite = exports.input = exports.room = exports.canvas = exports.main = undefined;\n\nvar _main = __webpack_require__(7);\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _canvas = __webpack_require__(3);\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nvar _room = __webpack_require__(5);\n\nvar _room2 = _interopRequireDefault(_room);\n\nvar _input = __webpack_require__(6);\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _sprite = __webpack_require__(1);\n\nvar _sprite2 = _interopRequireDefault(_sprite);\n\nvar _sound = __webpack_require__(15);\n\nvar _sound2 = _interopRequireDefault(_sound);\n\nvar _object = __webpack_require__(10);\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _event = __webpack_require__(11);\n\nvar _event2 = _interopRequireDefault(_event);\n\nvar _action = __webpack_require__(22);\n\nvar action = _interopRequireWildcard(_action);\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nvar _math = __webpack_require__(4);\n\nvar _math2 = _interopRequireDefault(_math);\n\nvar _tween = __webpack_require__(18);\n\nvar _tween2 = _interopRequireDefault(_tween);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.main = _main2.default;\nexports.canvas = _canvas2.default;\nexports.room = _room2.default;\nexports.input = _input2.default;\nexports.sprite = _sprite2.default;\nexports.sound = _sound2.default;\nexports.object = _object2.default;\nexports.event = _event2.default;\nexports.action = action;\nexports.instance = _instance2.default;\nexports.draw = _draw2.default;\nexports.math = _math2.default;\nexports.tween = _tween2.default; /**\r\n                                  * @module core\r\n                                  */\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\r\n                                                                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                                                                   */\n\n//\n\n\nvar _math = __webpack_require__(4);\n\nvar _math2 = _interopRequireDefault(_math);\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar basic = JSON.stringify({\n\tsprite: null,\n\tindex: 0,\n\timageSpeed: 1,\n\tanimationBehavior: \"loop\",\n\tvisible: true,\n\tsolid: false,\n\texists: true,\n\tscaleX: 1,\n\tscaleY: 1,\n\trotation: 0,\n\tterminal: 100,\n\tgravity: 0,\n\tgravityDirection: 0,\n\tspeedX: 0,\n\tspeedY: 0,\n\tboxTop: 0,\n\tboxBottom: 0,\n\tboxLeft: 0,\n\tboxRight: 0,\n\tbehaviours: [],\n\tlisteners: [],\n\tevents: {},\n\tboxCollision: {\n\t\tx: 0,\n\t\ty: 0,\n\t\twidth: 0,\n\t\theight: 0,\n\t\ttop: 0,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t\tright: 0\n\t},\n\t_depth: 0\n});\n\n//\nvar objectVarsModule = {\n\n\t/**\r\n  *\r\n  */\n\tset: function set(proto) {\n\n\t\t_extends(proto, JSON.parse(basic));\n\n\t\tObject.defineProperty(proto, \"depth\", {\n\t\t\tset: function set(x) {\n\t\t\t\tthis._depth = x;\n\t\t\t\t_instance2.default.instanceArray.sort(function (a, b) {\n\t\t\t\t\treturn a._depth - b._depth;\n\t\t\t\t});\n\t\t\t},\n\t\t\tget: function get() {\n\t\t\t\treturn this._depth;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(proto, \"speed\", {\n\t\t\tset: function set(x) {\n\t\t\t\tvar y = this.direction * _math2.default.DEGTORAD;\n\t\t\t\tthis.speedX = Math.cos(y) * x;\n\t\t\t\tthis.speedY = Math.sin(y) * x;\n\t\t\t},\n\t\t\tget: function get(x) {\n\t\t\t\treturn _math2.default.pointDistance(0, 0, this.speedX, this.speedY);\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(proto, \"direction\", {\n\t\t\tset: function set(x) {\n\t\t\t\tvar y = this.speed;\n\t\t\t\tthis.speedX = Math.cos(x * _math2.default.DEGTORAD) * y;\n\t\t\t\tthis.speedY = Math.sin(x * _math2.default.DEGTORAD) * y;\n\t\t\t},\n\t\t\tget: function get(x) {\n\t\t\t\treturn _math2.default.pointDirection(0, 0, this.speedX, this.speedY);\n\t\t\t}\n\t\t});\n\t}\n\n\t//\n};exports.default = objectVarsModule;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _global = __webpack_require__(13);\n\nvar _global2 = _interopRequireDefault(_global);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar compile = {\n\n\t/**\r\n  *\r\n  */\n\tactionExpression: function actionExpression(x) {\n\t\tvar _this = this;\n\n\t\t// x is an expression written as a string\n\t\tif (typeof x === \"string\" && x.charCodeAt(0) === 64) {\n\n\t\t\tvar n = void 0,\n\t\t\t    string = \"\",\n\t\t\t    sIndex = -1,\n\t\t\t    newArr = [];\n\n\t\t\tfor (n = 1; n < x.length; n++) {\n\n\t\t\t\tvar c = x.charAt(n);\n\t\t\t\tswitch (c) {\n\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif (sIndex === -1) {\n\t\t\t\t\t\t\tsIndex = n + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewArr.push(\"'\" + x.slice(sIndex, n) + \"'\");\n\t\t\t\t\t\t\tsIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (sIndex === -1 && c !== \" \") {\n\t\t\t\t\t\t\tif (c === \"+\" || c === \"-\" || c === \"=\") {\n\t\t\t\t\t\t\t\tif (string !== \"\") {\n\t\t\t\t\t\t\t\t\tnewArr.push(string);\n\t\t\t\t\t\t\t\t\tstring = \"\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnewArr.push(c);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstring += c;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (string !== \"\") {\n\t\t\t\tnewArr.push(string);\n\t\t\t\tstring = \"\";\n\t\t\t}\n\n\t\t\tvar y = \"\";\n\n\t\t\tnewArr.forEach(function (word) {\n\t\t\t\tvar num = parseInt(word);\n\t\t\t\tif (isNaN(num)) {\n\t\t\t\t\tvar _c = word.charAt(0);\n\t\t\t\t\tif (_c === \"'\") {\n\t\t\t\t\t\ty += word;\n\t\t\t\t\t} else if (_c === \"+\") {\n\t\t\t\t\t\ty += word;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (word === \"fps\") y += _global2.default.fps;else {\n\t\t\t\t\t\t\tif (_this[word] !== undefined) {\n\t\t\t\t\t\t\t\ty += \"this.\" + word;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ty += word;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ty += word;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn eval(y);\n\t\t}\n\n\t\treturn x;\n\t}\n\n\t//\n}; /**\r\n    * @module compile\r\n    */\n\n//\nexports.default = compile;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.GAME = exports.confirm = exports.alert = exports.message = exports.code = exports.func = exports.confine = exports.wrap = exports.actionConfine = exports.actionWrap = exports.moveReverseY = exports.moveReverseX = exports.moveSpeedY = exports.moveSpeedX = exports.moveDirect = exports.moveFree = exports.jumpRandom = exports.jump = exports.setGravity = exports.actionTest = exports.test = exports.get = exports.set = exports.exitEvent = exports.blockEnd = exports.blockBegin = exports.drawSprite = exports.instanceDrawSelf = exports.drawSelf = exports.drawText = exports.drawSetFontSize = exports.drawSetFont = exports.drawSetColor = exports.soundPlay = exports.instanceChangeSprite = exports.changeSprite = exports.instanceSetDirection = exports.instanceSetRotation = exports.instanceDestroy = exports.instanceCreateMoving = exports.instanceCreate = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /**\r\n                                                                                                                                                                                                                                                                   * @module actions\r\n                                                                                                                                                                                                                                                                   */\n\nvar _room = __webpack_require__(5);\n\nvar _room2 = _interopRequireDefault(_room);\n\nvar _sound = __webpack_require__(15);\n\nvar _sound2 = _interopRequireDefault(_sound);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nvar _instance = __webpack_require__(2);\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _input = __webpack_require__(6);\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _math = __webpack_require__(4);\n\nvar _math2 = _interopRequireDefault(_math);\n\nvar _sprite = __webpack_require__(1);\n\nvar _sprite2 = _interopRequireDefault(_sprite);\n\nvar _canvas = __webpack_require__(3);\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nvar _color = __webpack_require__(8);\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _main = __webpack_require__(7);\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _camera = __webpack_require__(14);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _app = __webpack_require__(23);\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _data = __webpack_require__(24);\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _tilemap = __webpack_require__(25);\n\nvar _tilemap2 = _interopRequireDefault(_tilemap);\n\nvar _tween = __webpack_require__(18);\n\nvar _tween2 = _interopRequireDefault(_tween);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * @param {string} varName\r\n * @param {value} value\r\n */\nfunction actionSet(varName, value, relative) {\n\trelative ? this[varName] += value : this[varName] = value;\n}\n\n/**\r\n * @param {string} varName\r\n * @param {string} op Operation.\r\n * @param {value} value Value to check against.\r\n */\nfunction actionTest(varName, op, value) {\n\tswitch (op) {\n\t\tcase \"==\":\n\t\t\treturn this[varName] == value;\n\t\tcase \"<\":\n\t\t\treturn this[varName] < value;\n\t\tcase \">\":\n\t\t\treturn this[varName] > value;\n\t\tcase \"<=\":\n\t\t\treturn this[varName] <= value;\n\t\tcase \">=\":\n\t\t\treturn this[varName] >= value;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\n/**\r\n * Sets the instance's gravity to the given value.\r\n * @param {number} value The gravity strength.\r\n */\nfunction actionSetGravity(value) {\n\tthis.gravity = value;\n}\n\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n * @param {number} x\r\n * @param {number} y\r\n * @param {boolean} relative\r\n */\nfunction actionJump(x, y, relative) {\n\n\tif (relative) {\n\t\tthis.x += Number(x);\n\t\tthis.y += Number(y);\n\t} else {\n\t\tthis.x = Number(x);\n\t\tthis.y = Number(y);\n\t}\n}\n\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n */\nfunction actionJumpRandom() {\n\tvar x1 = 0,\n\t    y1 = 0,\n\t    x2 = 640,\n\t    y2 = 480;\n\tthis.x = Math.floor(Math.random() * (x2 - x1 + 1)) + x1;\n\tthis.y = Math.floor(Math.random() * (y2 - y1 + 1)) + y1;\n}\n\n/**\r\n *\r\n */\nfunction moveFree(speed, direction) {\n\tthis.speed = speed;\n\tthis.direction = direction;\n}\n\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n * @param {number} x\r\n * @param {number} y\r\n */\nfunction moveDirect(x, y) {\n\tthis.x += x * _main2.default.dt;\n\tthis.y += y * _main2.default.dt;\n}\n\n/**\r\n *\r\n */\nfunction moveSpeedX(speed) {\n\tthis.speedX = Number(speed);\n}\nfunction moveSpeedY(speed) {\n\tthis.speedY = Number(speed);\n}\nfunction moveReverseX() {\n\tthis.speedX = -this.speedX;\n}\nfunction moveReverseY() {\n\tthis.speedY = -this.speedY;\n}\n\n/**\r\n * Wraps the instance back into the room when it leaves.\r\n */\nfunction actionWrap() {\n\n\tvar width = this.boxRight - this.boxLeft,\n\t    height = this.boxBottom - this.boxTop,\n\t    thisRoom = _room2.default.current,\n\t    roomW = thisRoom.width,\n\t    roomH = thisRoom.height;\n\n\tif (this.boxRight < 0) this.x += roomW + width;\n\tif (this.boxBottom < 0) this.y += roomH + height;\n\tif (this.boxLeft > roomW) this.x -= roomW + width;\n\tif (this.boxTop > roomH) this.y -= roomH + height;\n}\n\n/**\r\n * Wraps the instance back into the room when it leaves.\r\n */\nfunction actionConfine() {\n\n\tvar width = this.boxRight - this.boxLeft,\n\t    height = this.boxBottom - this.boxTop,\n\t    thisRoom = _room2.default.current,\n\t    roomW = thisRoom.width,\n\t    roomH = thisRoom.height;\n\n\tif (this.boxLeft < 0) this.x = 0;\n\tif (this.boxTop < 0) this.y = 0;\n\tif (this.boxRight > roomW) this.x = roomW - width;\n\tif (this.boxBottom > roomH) this.y = roomH - height;\n}\n\n/**\r\n * Executes the given function with variable arguments on the instance.\r\n * @param {function} func\r\n * @param {...*} args\r\n */\nfunction actionFunc(func) {\n\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\targs[_key - 1] = arguments[_key];\n\t}\n\n\tfunc.apply(this, args);\n}\n\n/**\r\n * Executes the given function with variable arguments on the instance.\r\n * @param {string} code\r\n */\nfunction runCode(code) {\n\n\tif (typeof code === \"string\") {\n\t\ttry {\n\t\t\teval(code);\n\t\t} catch (err) {\n\t\t\tconsole.error(err.message);\n\t\t}\n\t} else {\n\t\tconsole.error(\"runCode( code ); code must be a string!\");\n\t}\n}\n\n/**\r\n * Shows the value of the given variable of the instance, in the console.\r\n * @param {...*} args\r\n */\nfunction actionGet() {\n\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\targs[_key2] = arguments[_key2];\n\t}\n\n\tconsole.log(this[args].toFixed(2));\n}\n\n// Fucntions for use in code.\nvar GAME = {\n\tmain: {\n\t\tsetGameSpeed: _main2.default.setGameSpeed\n\t},\n\tinstance: {\n\t\tcreate: _instance2.default.create,\n\t\tcreateMoving: _instance2.default.createMoving,\n\t\tdestroy: _instance2.default.destroy,\n\t\tfind: _instance2.default.find,\n\t\tfindRandom: _instance2.default.findRandom,\n\t\tcount: _instance2.default.count,\n\t\tmouseOn: _instance2.default.mouseOn\n\t},\n\tdraw: _extends(_draw2.default, {\n\t\tself: _instance2.default.drawSelf,\n\t\tdebug: _instance2.default.drawDebug\n\t}),\n\tcanvas: {\n\t\tgetMain: _canvas2.default.getMain,\n\t\tcreate: _canvas2.default.create\n\t},\n\tcolor: _color2.default,\n\tsprite: {\n\t\tcreate: _sprite2.default.create,\n\t\taddFrame: _sprite2.default.addFrame,\n\t\ttint: _sprite2.default.tint,\n\t\tget: _sprite2.default.get,\n\t\tcache: _sprite2.default.cache\n\t},\n\tsound: {\n\t\tplay: _sound2.default.play,\n\t\tstop: _sound2.default.stop,\n\t\tget: _sound2.default.get\n\t},\n\troom: _room2.default,\n\tinput: {\n\t\tkeyboard: _input2.default.keyboard,\n\t\tmouse: _input2.default.mouse,\n\t\ttouch: _input2.default.touch\n\t},\n\tmath: _math2.default,\n\tcamera: _camera2.default,\n\tapp: _app2.default,\n\tdata: _data2.default,\n\tTilemap: _tilemap2.default,\n\ttween: _tween2.default\n\n\t//\n};var blockBegin = \"blockBegin\",\n    blockEnd = \"blockEnd\",\n    exitEvent = \"exitEvent\",\n    instanceCreate = _instance2.default.create,\n    instanceCreateMoving = _instance2.default.createMoving,\n    instanceDestroy = _instance2.default.destroy,\n    changeSprite = _instance2.default.changeSprite,\n    instanceSetRotation = _instance2.default.setRotation,\n    instanceSetDirection = _instance2.default.setDirection,\n    message = console.log,\n    alert = function alert(m) {\n\twindow.alert(m);\n},\n    confirm = function confirm(m) {\n\treturn window.confirm(m);\n},\n    drawSetColor = _draw2.default.setColor,\n    drawSetFont = _draw2.default.setFont,\n    drawSetFontSize = _draw2.default.setFontSize,\n    drawText = _draw2.default.text,\n    drawSelf = _instance2.default.drawSelf,\n    drawSprite = _draw2.default.sprite,\n    soundPlay = function soundPlay(snd, loop) {\n\t_sound2.default.play(snd, { loop: loop });\n};\n\n//\nexports.instanceCreate = instanceCreate;\nexports.instanceCreateMoving = instanceCreateMoving;\nexports.instanceDestroy = instanceDestroy;\nexports.instanceSetRotation = instanceSetRotation;\nexports.instanceSetDirection = instanceSetDirection;\nexports.changeSprite = changeSprite;\nexports.instanceChangeSprite = changeSprite;\nexports.soundPlay = soundPlay;\nexports.drawSetColor = drawSetColor;\nexports.drawSetFont = drawSetFont;\nexports.drawSetFontSize = drawSetFontSize;\nexports.drawText = drawText;\nexports.drawSelf = drawSelf;\nexports.instanceDrawSelf = drawSelf;\nexports.drawSprite = drawSprite;\nexports.blockBegin = blockBegin;\nexports.blockEnd = blockEnd;\nexports.exitEvent = exitEvent;\nexports.set = actionSet;\nexports.get = actionGet;\nexports.test = actionTest;\nexports.actionTest = actionTest;\nexports.setGravity = actionSetGravity;\nexports.jump = actionJump;\nexports.jumpRandom = actionJumpRandom;\nexports.moveFree = moveFree;\nexports.moveDirect = moveDirect;\nexports.moveSpeedX = moveSpeedX;\nexports.moveSpeedY = moveSpeedY;\nexports.moveReverseX = moveReverseX;\nexports.moveReverseY = moveReverseY;\nexports.actionWrap = actionWrap;\nexports.actionConfine = actionConfine;\nexports.wrap = actionWrap;\nexports.confine = actionConfine;\nexports.func = actionFunc;\nexports.code = runCode;\nexports.message = message;\nexports.alert = alert;\nexports.confirm = confirm;\nexports.GAME = GAME;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _canvas = __webpack_require__(3);\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\nvar app = {\n\n\t/**\r\n  *\r\n  */\n\tsetCursor: function setCursor(cursor) {\n\t\t_canvas2.default.main.style.cursor = cursor;\n\t}\n\n\t//\n}; /**\r\n    * @module app\r\n    */\n\n//\nexports.default = app;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _generator = __webpack_require__(16);\n\nvar _generator2 = _interopRequireDefault(_generator);\n\nvar _dataGrid = __webpack_require__(17);\n\nvar _dataGrid2 = _interopRequireDefault(_dataGrid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n/**\r\n * @module data\r\n */\n\n//\nvar data = {\n\n\t//\n\tGrid: _dataGrid2.default,\n\tgrid: {\n\t\tcreate: _generator2.default.functionFromConstructor(_dataGrid2.default),\n\t\tget: _generator2.default.functionFromMethod(_dataGrid2.default.prototype.get),\n\t\tset: _generator2.default.functionFromMethod(_dataGrid2.default.prototype.set),\n\t\tdestroy: _generator2.default.functionFromMethod(_dataGrid2.default.prototype.destroy)\n\t}\n\n\t//\n};exports.default = data;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _generator = __webpack_require__(16);\n\nvar _generator2 = _interopRequireDefault(_generator);\n\nvar _dataGrid = __webpack_require__(17);\n\nvar _dataGrid2 = _interopRequireDefault(_dataGrid);\n\nvar _draw = __webpack_require__(0);\n\nvar _draw2 = _interopRequireDefault(_draw);\n\nvar _sprite = __webpack_require__(1);\n\nvar _sprite2 = _interopRequireDefault(_sprite);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n *\r\n */\n/**\r\n * @module Tilemap\r\n */\n\n//\nfunction Tilemap() {\n\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n\t//\n\tthis.textureAtlas = options.atlas || null;\n\tthis.tileWidth = options.tileWidth || 16;\n\tthis.tileHeight = options.tileHeight || 16;\n\tthis.tileSpacing = options.tileSpacing || 0;\n\tthis.tileOverlay = options.tileOverlay || 0;\n\tthis.tilesWide = options.tilesWide || 16;\n\tthis.mapWidth = options.mapWidth || 16;\n\tthis.mapHeight = options.mapHeight || 16;\n\tthis.layers = {};\n}\n\n/**\r\n *\r\n */\nTilemap.prototype.set = function (layer, x, y, index) {\n\n\tif (!this.layers[layer]) {\n\t\tthis.layers[layer] = new _dataGrid2.default(this.mapWidth, this.mapHeight);\n\t}\n\n\tthis.layers[layer].set(x, y, index);\n};\n\n//\nTilemap.prototype.draw = function (options) {\n\n\t// cache\n\tvar atlas = _sprite2.default.get(this.textureAtlas).images[0].img;\n\tvar gap = this.tileSpacing + this.tileOverlay;\n\n\t//\n\tvar startX = void 0,\n\t    startY = void 0,\n\t    endX = void 0,\n\t    endY = void 0,\n\t    order = void 0;\n\tif (options) {\n\t\torder = options.order;\n\t\tstartX = Math.floor(Math.max(0, options.left / this.tileWidth));\n\t\tstartY = Math.floor(Math.max(0, options.top / this.tileHeight));\n\t\tendX = Math.ceil(Math.min(this.mapWidth, options.right / this.tileWidth));\n\t\tendY = Math.ceil(Math.min(this.mapHeight, options.bottom / this.tileHeight));\n\t} else {\n\t\torder = Object.keys(this.layers);\n\t\tstartX = 0;\n\t\tstartY = 0;\n\t\tendX = this.mapWidth;\n\t\tendY = this.mapHeight;\n\t}\n\n\tvar name = void 0,\n\t    x = void 0,\n\t    y = void 0,\n\t    n = void 0;\n\tfor (n = 0; n < order.length; n++) {\n\t\tfor (x = startX; x < endX; x++) {\n\t\t\tfor (y = startY; y < endY; y++) {\n\n\t\t\t\tvar tile = this.layers[order[n]].get(x, y);\n\t\t\t\tif (tile > 0) {\n\n\t\t\t\t\tvar iX = (tile - 1) % this.tilesWide;\n\t\t\t\t\tvar iY = Math.floor((tile - 1) / this.tilesWide);\n\t\t\t\t\tiX = iX * (this.tileWidth + gap * 2) + gap;\n\t\t\t\t\tiY = iY * (this.tileHeight + gap * 2) + gap;\n\n\t\t\t\t\t_draw2.default.context.drawImage(atlas, iX - this.tileOverlay, iY - this.tileOverlay, this.tileWidth + this.tileOverlay * 2, // source width\n\t\t\t\t\tthis.tileHeight + this.tileOverlay * 2, // source height\n\t\t\t\t\tx * this.tileWidth - this.tileOverlay, // target x\n\t\t\t\t\ty * this.tileHeight - this.tileOverlay, // target y\n\t\t\t\t\tthis.tileWidth + this.tileOverlay * 2, // target width\n\t\t\t\t\tthis.tileHeight + this.tileOverlay * 2 // target height\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n//\nTilemap.create = _generator2.default.functionFromConstructor(Tilemap);\n\n//\nexports.default = Tilemap;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// GameBeans.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 29454d469d4d3465aafa","/**\r\n * @module draw\r\n */\r\n\r\nimport math from \"./math.js\";\r\nimport sprite from \"./sprite.js\";\r\n\r\n//\r\nlet draw = {\r\n\t\r\n\t//\r\n\tcolor: \"#FFFFFF\",\r\n\tfont: \"Arial\",\r\n\tfontSize: 30,\r\n\ttextAlign: \"start\",\r\n\ttextBaseline: \"alphabetic\",\r\n\ttarget: null,\r\n\tcontext: null,\r\n\tdefaultTransform: [1, 0, 0, 1, 0, 0],\r\n\ttargetStack: [],\r\n\timageSmoothing: false,\r\n\toffsetX: 0,\r\n\toffsetY: 0,\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetTarget: function( target ) {\r\n\t\tdraw.targetStack.push( draw.target );\r\n\t\tdraw.target = target;\r\n\t\tdraw.context = target.getContext( \"2d\" );\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tresetTarget: function() {\r\n\t\tlet target = draw.targetStack.pop();\r\n\t\tdraw.target = target;\r\n\t\tdraw.context = target.getContext( \"2d\" );\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tgetTarget: function() {\r\n\t\treturn draw.target;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tsave: function() {\r\n\t\tdraw.context.save();\r\n\t},\r\n\t \r\n\t/**\r\n\t *\r\n\t */\r\n\trestore: function() {\r\n\t\tdraw.context.restore();\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\treset: function() {\r\n\t\tdraw.context.imageSmoothingEnabled = draw.imageSmoothing;\r\n\t\tdraw.context.setTransform( ...draw.defaultTransform );\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetImageSmoothing: function( enable ) {\r\n\t\tdraw.imageSmoothing = enable;\r\n\t},\r\n\r\n\t//\r\n\ttransform: {\r\n\t\t\r\n\t\tscale: function( x, y ) {\r\n\t\t\tdraw.context.scale( x, y );\r\n\t\t},\r\n\t\t\r\n\t\trotate: function( rot ) {\r\n\t\t\tdraw.context.rotate( rot * math.DEGTORAD );\r\n\t\t},\r\n\t\t\r\n\t\ttranslate: function( x, y ) {\r\n\t\t\tdraw.offsetX = x;\r\n\t\t\tdraw.offsetY = y;\r\n\t\t\tdraw.context.translate( x, y );\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {object} opt\r\n\t\t */\r\n\t\tsetDefault: function( opt = {} ) {\r\n\t\t\t\r\n\t\t\tlet trans = draw.defaultTransform;\r\n\t\t\tif ( opt.scaleX ) trans[0] = opt.scaleX;\r\n\t\t\tif ( opt.skewX ) trans[1] = opt.skewX;\r\n\t\t\tif ( opt.skewY ) trans[2] = opt.skewY;\r\n\t\t\tif ( opt.scaleY ) trans[3] = opt.scaleY;\r\n\t\t\tif ( opt.moveX ) trans[4] = opt.moveX;\r\n\t\t\tif ( opt.moveY ) trans[5] = opt.moveY;\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {color} c Can be a number or a hex-value.\r\n\t */\r\n\tsetColor: function( c ) {\r\n\t\t\r\n\t\t// quick exit if c is already a CSS color value\r\n\t\tif ( typeof c === \"string\" ) {\r\n\t\t\tdraw.color = c;\r\n\t\t}\r\n\t\t\r\n\t\t// c is an object\r\n\t\telse {\r\n\t\t\t\r\n\t\t\t// RGB / RGBA\r\n\t\t\tif ( \"r\" in c && \"g\" in c && \"b\" in c ) {\r\n\t\t\t\tdraw.color = ( \"a\" in c )\r\n\t\t\t\t\t? \"rgba(\"+c.r+\",\"+c.g+\",\"+c.b+\",\"+c.a+\")\"\r\n\t\t\t\t\t: \"rgb(\"+c.r+\",\"+c.g+\",\"+c.b+\")\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// HSL / HSLA\r\n\t\t\telse if ( \"h\" in c && \"s\" in c && \"l\" in c ) {\r\n\t\t\t\tdraw.color = ( \"a\" in c )\r\n\t\t\t\t\t? \"hsla(\"+c.h+\",\"+c.s+\"%,\"+c.l+\"%,\"+c.a+\")\"\r\n\t\t\t\t\t: \"hsl(\"+c.h+\",\"+c.s+\"%,\"+c.l+\"%)\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string} font\r\n\t * @param {number} size\r\n\t * @param {string} align Horizontal alignment.\r\n\t * @param {string} baseline Vertical alignment.\r\n\t */\r\n\tsetFont: function( font, size, align, baseline ) {\r\n\t\t\r\n\t\tdraw.font = font;\r\n\t\tdraw.fontSize = size;\r\n\t\tdraw.textAlign = align;\r\n\t\tdraw.textBaseline = baseline;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * Draws the sprite at the given x, y position.\r\n\t * @param {sprite} sprite\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tsprite: function( spr, index, x, y, scaleX, scaleY, rotation ) {\r\n\r\n\t\tspr = sprite.get( spr );\r\n\t\t\r\n\t\t//\r\n\t\tlet ctx = draw.context;\r\n\t\tctx.save();\r\n\t\t\r\n\t\t//\r\n\t\tctx.translate( x, y );\r\n\t\tctx.rotate( rotation * math.DEGTORAD );\r\n\t\tctx.scale( scaleX, scaleY );\r\n\t\t\r\n\t\t//\r\n\t\tindex = Math.floor( index ) % spr.images.length;\r\n\t\t\r\n\t\t//\r\n\t\tlet frame = spr.images[index];\r\n\t\tlet img = frame.img;\r\n\t\tctx.drawImage(\r\n\t\t\timg, frame.clip.x, frame.clip.y,\r\n\t\t\tframe.clip.w, frame.clip.h,\r\n\t\t\t-spr.originX, -spr.originY,\r\n\t\t\tspr.width, spr.height\r\n\t\t);\r\n\t\t\r\n\t\t//\r\n\t\tctx.restore();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Draws the sprite at the given x, y position.\r\n\t * @param {sprite} sprite\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} w\r\n\t * @param {number} h\r\n\t */\r\n\tspriteTiled: function( spr, index, x, y, w, h ) {\r\n\r\n\t\tspr = sprite.get( spr );\r\n\t\t\r\n\t\tlet dx, dy, rx, ry;\r\n\t\tfor ( rx=0, dx=x; rx<w; rx++, dx+=spr.width )\r\n\t\tfor ( ry=0, dy=y; ry<h; ry++, dy+=spr.height )\r\n\t\t\tdrawSprite( spr, index, dx, dy, 1, 1, 0 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tcanvas: function( canvas, x, y ) {\r\n\t\tconsole.log( draw.context.imageSmoothingEnabled );\r\n\t\tdraw.context.drawImage( canvas, x, y );\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string} text\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\ttext: function( text, x, y, options ) {\r\n\t\t\r\n\t\tlet ctx = draw.context;\r\n\t\tctx.font = draw.fontSize + \"px \" + draw.font;\r\n\t\tctx.fillStyle = draw.color;\r\n\t\tctx.textAlign = draw.textAlign;\r\n\t\tctx.textBaseline = draw.textBaseline;\r\n\t\t\r\n\t\tif ( options ) {\r\n\t\t\tif ( options.stroke ) {\r\n\t\t\t\tctx.strokeStyle = options.strokeColor || draw.color;\r\n\t\t\t\tctx.lineWidth = options.width || 2;\r\n\t\t\t\tctx.strokeText( text, x, y );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tctx.fillText( text, x, y );\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tprimitive: {\r\n\t\r\n\t\ttextureMap: function( texture, pts ) {\r\n\t\t\t\r\n\t\t\tlet ctx = draw.context;\r\n\t\t\tlet spr = sprite.get( texture );\r\n\t\t\tlet frame = spr.images[0];\r\n\t\t\tlet img = frame.img;\r\n\t\t\tlet w = spr.width;\r\n\t\t\tlet h = spr.height;\r\n\t\t\t\r\n\t\t\tvar tris = [[0, 1, 2], [2, 3, 0]]; // Split in two triangles\r\n\t\t\tfor (var t=0; t<2; t++) {\r\n\t\t\t\tvar pp = tris[t];\r\n\t\t\t\tvar x0 = pts[pp[0]].x, x1 = pts[pp[1]].x, x2 = pts[pp[2]].x;\r\n\t\t\t\tvar y0 = pts[pp[0]].y, y1 = pts[pp[1]].y, y2 = pts[pp[2]].y;\r\n\t\t\t\tvar u0 = pts[pp[0]].u*w, u1 = pts[pp[1]].u*w, u2 = pts[pp[2]].u*w;\r\n\t\t\t\tvar v0 = pts[pp[0]].v*h, v1 = pts[pp[1]].v*h, v2 = pts[pp[2]].v*h;\r\n\r\n\t\t\t\t// Set clipping area so that only pixels inside the triangle will\r\n\t\t\t\t// be affected by the image drawing operation\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(x0, y0);\r\n\t\t\t\tctx.lineTo(x1, y1);\r\n\t\t\t\tctx.lineTo(x2, y2);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\t// Compute matrix transform\r\n\t\t\t\tvar delta = u0*v1 + v0*u2 + u1*v2 - v1*u2 - v0*u1 - u0*v2;\r\n\t\t\t\tvar delta_a = x0*v1 + v0*x2 + x1*v2 - v1*x2 - v0*x1 - x0*v2;\r\n\t\t\t\tvar delta_b = u0*x1 + x0*u2 + u1*x2 - x1*u2 - x0*u1 - u0*x2;\r\n\t\t\t\tvar delta_c = u0*v1*x2 + v0*x1*u2 + x0*u1*v2 - x0*v1*u2\r\n\t\t\t\t\t\t\t  - v0*u1*x2 - u0*x1*v2;\r\n\t\t\t\tvar delta_d = y0*v1 + v0*y2 + y1*v2 - v1*y2 - v0*y1 - y0*v2;\r\n\t\t\t\tvar delta_e = u0*y1 + y0*u2 + u1*y2 - y1*u2 - y0*u1 - u0*y2;\r\n\t\t\t\tvar delta_f = u0*v1*y2 + v0*y1*u2 + y0*u1*v2 - y0*v1*u2\r\n\t\t\t\t\t\t\t  - v0*u1*y2 - u0*y1*v2;\r\n\r\n\t\t\t\t// Draw the transformed image\r\n\t\t\t\tctx.transform(delta_a/delta, delta_d/delta,\r\n\t\t\t\t\t\t\t  delta_b/delta, delta_e/delta,\r\n\t\t\t\t\t\t\t  delta_c/delta, delta_f/delta);\r\n\t\t\t\tctx.drawImage( img, 0, 0 );\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tshape: {\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {number} x1\r\n\t\t * @param {number} y1\r\n\t\t * @param {number} x2\r\n\t\t * @param {number} y2\r\n\t\t * @param {object} options\r\n\t\t */\r\n\t\tline: function( x1, y1, x2, y2, options = {} ) {\r\n\t\t\r\n\t\t\tlet ctx = draw.context;\r\n\t\t\tctx.strokeStyle = options.color || draw.color;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo( x1, y1 );\r\n\t\t\tctx.lineTo( x2, y2 );\r\n\t\t\tctx.stroke();\r\n\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {number} x1\r\n\t\t * @param {number} y1\r\n\t\t * @param {number} x2\r\n\t\t * @param {number} y2\r\n\t\t * @param {object} options\r\n\t\t */\r\n\t\tellipse: function( x, y, xr, yr, options = {} ) {\r\n\t\t\r\n\t\t\t//\r\n\t\t\tlet ctx = draw.context;\r\n\t\t\tctx.save();\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.translate( x-xr, y-yr );\r\n\t\t\tctx.scale( xr, yr );\r\n\t\t\tctx.arc( 1, 1, 1, 0, 2 * Math.PI, false );\r\n\t\t\tctx.restore();\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tlet style;\r\n\t\t\tif ( options.healthbar ) {\r\n\t\t\t\tlet amount = options.healthbar.amount || 1;\r\n\t\t\t\tlet color = options.healthbar.color || \"#0F0\";\r\n\t\t\t\tlet background = options.healthbar.background || \"#F00\";\r\n\t\t\t\tstyle = ctx.createLinearGradient( x-xr, 0, x+xr, 0 );\r\n\t\t\t\tstyle.addColorStop( 0, color );\r\n\t\t\t\tstyle.addColorStop( amount, color );\r\n\t\t\t\tstyle.addColorStop( amount, background );\r\n\t\t\t\tstyle.addColorStop( 1, background );\r\n\t\t\t} else {\r\n\t\t\t\tstyle = options.color || draw.color;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif ( !options.fill ) {\r\n\t\t\t\tctx.fillStyle = style;\r\n\t\t\t\tctx.fill();\r\n\t\t\t} else {\r\n\t\t\t\tctx.strokeStyle = style\r\n\t\t\t\tctx.lineWidth = options.lineWidth || 1;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @param {number} x\r\n\t\t * @param {number} y\r\n\t\t * @param {number} w\r\n\t\t * @param {number} h\r\n\t\t * @param {object} options\r\n\t\t */\r\n\t\trectangle: function( x, y, w, h, options = {} ) {\r\n\t\t\r\n\t\t\t//\r\n\t\t\tlet ctx = draw.context;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect( x, y, w, h );\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tlet style;\r\n\t\t\tif ( options.healthbar ) {\r\n\t\t\t\tlet amount = options.healthbar.amount || 1;\r\n\t\t\t\tlet color = options.healthbar.color || \"#0F0\";\r\n\t\t\t\tlet background = options.healthbar.background || \"#F00\";\r\n\t\t\t\tstyle = ctx.createLinearGradient( x, 0, x+w, 0 );\r\n\t\t\t\tstyle.addColorStop( 0, color );\r\n\t\t\t\tstyle.addColorStop( amount, color );\r\n\t\t\t\tstyle.addColorStop( amount, background );\r\n\t\t\t\tstyle.addColorStop( 1, background );\r\n\t\t\t} else {\r\n\t\t\t\tstyle = options.color || draw.color;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif ( !options.fill ) {\r\n\t\t\t\tctx.fillStyle = style;\r\n\t\t\t\tctx.fill();\r\n\t\t\t} else {\r\n\t\t\t\tctx.strokeStyle = style;\r\n\t\t\t\tctx.lineWidth = options.lineWidth || 1;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default draw;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/draw.js","/**\r\n * @module sprite\r\n */\r\n\r\n//\r\nimport color from \"./color.js\";\r\n\r\n//\r\nlet aSprites = [],\r\n\taLength = 0;\r\n\r\n/**\r\n *\r\n */\r\nlet sprite = {\r\n\t\r\n\t//\r\n\tarray: aSprites,\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tcreate: function( options = {} ) {\r\n\r\n\t\t//\r\n\t\tlet atlas, atlasIndex;\r\n\t\tif ( options.atlas ) {\r\n\t\t\tatlasIndex = options.atlasIndex || 0;\r\n\t\t\tatlas = options.atlas.images[atlasIndex];\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet newSprite = {\r\n\t\t\tassetType: \"sprite\",\r\n\t\t\tname: options.name || newSpriteName(),\r\n\t\t\toriginX: options.originX || 0,\r\n\t\t\toriginY: options.originY || 0,\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\timages: []\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tif ( options.frames ) {\r\n\t\t\toptions.frames.forEach( function( frame ) {\r\n\t\t\t\tsprite.addFrame( newSprite, {\r\n\t\t\t\t\tsource: frame.src\r\n\t\t\t\t});\r\n\t\t\t} );\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\taSprites[aLength++] = newSprite;\r\n\t\treturn newSprite;\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\taddFrame: function( spr, options = {} ) {\r\n\t\t\r\n\t\tspr = sprite.get( spr );\r\n\t\t\r\n\t\t//\r\n\t\tlet atlas;\r\n\t\tif ( options.atlas ) {\r\n\t\t\tatlas = sprite.get( options.atlas ).images[0].img;\r\n\t\t}\r\n\t\t\r\n\t\tlet image = {\r\n\t\t\timg: atlas || new Image(),\r\n\t\t\tclip: null,\r\n\t\t\tready: false\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tif ( options.source ) {\r\n\t\t\t\r\n\t\t\timage.img.onload = function() {\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\timage.clip = {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\tw: image.img.width,\r\n\t\t\t\t\th: image.img.height\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\tif ( spr.width * spr.height === 0 ) {\r\n\t\t\t\t\tspr.width = image.clip.w;\r\n\t\t\t\t\tspr.height = image.clip.h;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\timage.ready = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\timage.img.src = options.source || \"\";\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tif ( atlas && options.clip ) {\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\timage.clip = options.clip;\r\n\t\t\tconsole.log( image.clip );\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif ( spr.width * spr.height === 0 ) {\r\n\t\t\t\tspr.width = image.clip.w;\r\n\t\t\t\tspr.height = image.clip.h;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\timage.ready = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tspr.images.push( image );\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tcache: function( spr, options = {} ) {\r\n\t\t\r\n\t\tspr = sprite.get( spr );\r\n\t\tspr.images.forEach( function( frame ) {\r\n\t\t\tlet canvas = document.createElement( \"CANVAS\" );\r\n\t\t\tcanvas.width = options.width || frame.img.width;\r\n\t\t\tcanvas.height = options.height || frame.img.height;\r\n\t\t\tlet ctx = canvas.getContext( \"2d\" );\r\n\t\t\tctx.drawImage( frame.img, 0, 0, canvas.width+1, canvas.height+1 );\r\n\t\t\t\r\n\t\t\tframe.clip.x = 0;\r\n\t\t\tframe.clip.y = 0;\r\n\t\t\tframe.clip.w = canvas.width;\r\n\t\t\tframe.clip.h = canvas.height;\r\n\t\t\tframe.img = canvas;\r\n\t\t} );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetOrigin: function( spr, x, y ) {\r\n\t\t\r\n\t\tspr = sprite.get( spr );\r\n\t\tspr.originX = Number( x );\r\n\t\tspr.originY = Number( y );\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\treadyAll: function() {\r\n\t\t\r\n\t\tfor ( var n=0; n<aLength; n++ ) {\r\n\t\t\tlet spr = aSprites[n];\r\n\t\t\tfor ( var i=0; i<spr.images.length; i++ ) {\r\n\t\t\t\tlet image = spr.images[i];\r\n\t\t\t\tif ( !image.ready ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\ttint: function( spr, col ) {\r\n\t\t\r\n\t\tif ( typeof spr !== \"object\" )\r\n\t\t\tspr = sprite.get( spr );\r\n\t\t\r\n\t\t//\r\n\t\tspr.images.forEach( function( image ) {\r\n\t\t\t\r\n\t\t\t// create canvas, draw image\r\n\t\t\tlet canvas = document.createElement( \"CANVAS\" );\r\n\t\t\tlet ctx = canvas.getContext( \"2d\" );\r\n\t\t\tcanvas.width = spr.width;\r\n\t\t\tcanvas.height = spr.height;\r\n\t\t\tctx.drawImage( image.img, 0, 0 );\r\n\t\t\t\r\n\t\t\t// get data, do thing, put data back\r\n\t\t\tlet imageData = ctx.getImageData( 0, 0, canvas.width, canvas.height );\r\n\t\t\tpixelDataTint( imageData.data, (typeof col === \"object\") ? col : color.hexToRgb( col ) );\r\n\t\t\tctx.putImageData( imageData, 0, 0 );\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\timage.img.src = canvas.toDataURL( \"image/png\" );\r\n\t\t\t\r\n\t\t} );\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tget: function( name ) {\r\n\t\t\r\n\t\tif ( typeof name === \"object\" )\r\n\t\t\treturn name;\r\n\t\t\r\n\t\tfor ( var n = 0; n < aLength; n++ )\r\n\t\t\tif ( aSprites[n].name === name )\r\n\t\t\t\treturn aSprites[n];\r\n\t\t\t\r\n\t\treturn null;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction newSpriteName() {\r\n\treturn \"Sprite_\" + aLength;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction pixelDataTint( data, rgb ) {\r\n\t\r\n\t// cache as much as possible, there could be a lot of pixels\r\n\tlet l = data.length,\r\n\t\tr = rgb.r / 255,\r\n\t\tg = rgb.g / 255,\r\n\t\tb = rgb.b / 255;\r\n\t\r\n\t//\r\n\tfor (var i = 0; i < l; i += 4) {\r\n\t\tdata[i]     = r * data[i]     >> 0;\r\n\t\tdata[i + 1] = g * data[i + 1] >> 0;\r\n\t\tdata[i + 2] = b * data[i + 2] >> 0;\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default sprite;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/sprite.js","/**\r\n * @module instances\r\n */\r\n\r\nimport math from \"./math.js\";\r\nimport input from \"./input.js\";\r\nimport object from \"./object.js\";\r\nimport sprite from \"./sprite.js\";\r\nimport draw from \"./draw.js\";\r\nimport compile from \"./compile.js\";\r\n\r\n//\r\nwindow.global = {};\r\nlet aInstances = [];\r\nlet otherStack = [];\r\n\r\n//\r\nlet instance = {\r\n\t\r\n\t//\r\n\tinstanceArray: aInstances,\r\n\tinstanceHardLimit: 1000,\r\n\t\r\n\t/**\r\n\t * @param {object} obj\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tcreate: function( obj, x, y ) {\r\n\t\t\r\n\t\t//\r\n\t\tlet o = object.get( obj );\r\n\t\tif ( o === null ) {\r\n\t\t\twindow.addConsoleText( \"#F00\", \"No such object as \" + obj );\r\n\t\t\twindow._GB_stop();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tlet inst = o.pool.get();\r\n\t\tinst.object = o;\r\n\t\tinst.objectName = o.objectName;\r\n\t\tinst.assetType = \"instance\";\r\n\t\tinst.x = Number( x );\r\n\t\tinst.y = Number( y );\r\n\t\tinst.boxCollision = Object.assign( {}, inst.boxCollision );\r\n\t\t\r\n\t\t//\r\n\t\tlet spr = sprite.get( inst.sprite );\r\n\t\tif ( spr ) {\r\n\t\t\tinst.boxCollision.x = spr.originX;\r\n\t\t\tinst.boxCollision.y = spr.originY;\r\n\t\t\tinst.boxCollision.width = spr.width;\r\n\t\t\tinst.boxCollision.height = spr.height;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tinstance.addToArray( inst );\r\n\t\tinstance.updateBoundingBox( inst );\r\n\t\tinstance.updateCollisionBox( inst );\r\n\t\tinstance.executeEvent( inst, \"create\" );\r\n\t\t\r\n\t\t//\r\n\t\treturn inst;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\taddToArray: function( inst ) {\r\n\t\t\r\n\t\tfor ( var i=0; i<aInstances.length; i++ ) {\r\n\t\t\tif ( inst.depth <= aInstances[i].depth ) {\r\n\t\t\t\taInstances.splice( i, 0, inst );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\taInstances.push( inst );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} obj\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} speed\r\n\t * @param {number} direction\r\n\t */\r\n\tcreateMoving: function( obj, x, y, speed, direction ) {\r\n\r\n\t\tif ( aInstances.length >= instance.instanceHardLimit ) {\r\n\t\t\tconsole.warn( \"instance number hard limit reached:\", instance.instanceHardLimit );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet newInst = instance.create( obj, x, y );\r\n\t\tnewInst.speed = speed;\r\n\t\tnewInst.direction = direction;\r\n\t\treturn newInst;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tfind: function( objectName, instNumber ) {\r\n\t\t\r\n\t\tlet n, c=0;\r\n\t\tfor ( n=0; n<aInstances.length; n++ ) {\r\n\t\t\tlet inst = instance.instanceArray[n];\r\n\t\t\tif ( inst.objectName === objectName ) {\r\n\t\t\t\tif ( c++ === instNumber )\r\n\t\t\t\t\treturn inst;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tfindRandom: function( name ) {\r\n\t\t\r\n\t\tlet n, c = 0, instNumber = math.randomInt( 0, count( name ) - 1 );\r\n\t\tfor ( n=0; n<instance.instanceArray.length; n++ ) {\r\n\t\t\tlet inst = instance.instanceArray[n];\r\n\t\t\tif ( inst.objectName === name ) {\r\n\t\t\t\tif ( c++ === instNumber )\r\n\t\t\t\t\treturn inst;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tcount: function( objectName ) {\r\n\t\t\r\n\t\tlet n, c=0;\r\n\t\tinstance.instanceArray.forEach( function( inst ) {\r\n\t\t\tc += (inst.objectName === objectName);\r\n\t\t} );\r\n\t\treturn c;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} rotation\r\n\t * @param {boolean} relative\r\n\t */\r\n\tsetRotation: function( rotation, relative ) {\r\n\t\tthis.rotation = ( relative ) ? this.rotation + rotation : rotation;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} rotation\r\n\t * @param {boolean} relative\r\n\t */\r\n\tsetDirection: function( direction, relative ) {\r\n\t\tthis.direction = ( relative ) ? this.direction + direction : direction;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} inst\r\n\t */\r\n\tmouseOn: function( inst ) {\r\n\t\t\r\n\t\treturn !( inst.boxTop > input.mouse.y/2 - draw.offsetY\r\n\t\t|| inst.boxBottom < input.mouse.y/2 - draw.offsetY\r\n\t\t|| inst.boxLeft > input.mouse.x/2 - draw.offsetX\r\n\t\t|| inst.boxRight < input.mouse.x/2 - draw.offsetX );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {instance} inst\r\n\t */\r\n\tstep: function( inst, dt ) {\r\n\t\t\r\n\t\t// step events\r\n\t\tinstance.executeEvent( inst, \"step\" );\r\n\t\tinstance.updateAnimation( inst, dt );\r\n\t\tinstance.updatePosition( inst, dt );\r\n\t\tinstance.updateBoundingBox( inst );\r\n\t\tinstance.updateCollisionBox( inst );\r\n\t\t\r\n\t\t// collision events\r\n\t\tinstance.instanceExecuteListeners( inst );\r\n\t\t\r\n\t\t// input events\r\n\t\tinput.triggerEvents.forEach( function( event ) {\r\n\t\t\tinstance.executeEvent( inst, event );\r\n\t\t} );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tupdateAnimation: function( inst, dt ) {\r\n\t\t\r\n\t\tinst.index += inst.imageSpeed;\r\n\t\tlet spr = sprite.get( inst.sprite );\r\n\t\tif ( spr ) {\r\n\t\t\tlet length = spr.images.length;\r\n\t\t\tif ( inst.index >= length ) {\r\n\t\t\t\t\r\n\t\t\t\tlet behavior = inst.animationBehavior;\r\n\t\t\t\tlet type = typeof behavior;\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\tif ( type === \"string\" ) {\r\n\t\t\t\t\r\n\t\t\t\t\t//\r\n\t\t\t\t\tif ( behavior === \"loop\" ) {\r\n\t\t\t\t\t\tinst.index -= length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//\r\n\t\t\t\t\telse if ( behavior === \"stop\" ) {\r\n\t\t\t\t\t\tinst.index = length - 1;\r\n\t\t\t\t\t\tinst.imageSpeed = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\telse if ( type === \"function\" ) {\r\n\t\t\t\t\tbehavior.call( inst );\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tupdatePosition: function( inst, dt ) {\r\n\t\t\r\n\t\t// if the instance is already falling at terminal velocity then we no longer apply gravity\r\n\t\tlet gravVector = {\r\n\t\t\tx: math.lengthDirX( inst.terminal, inst.gravityDirection ),\r\n\t\t\ty: math.lengthDirY( inst.terminal, inst.gravityDirection )\r\n\t\t};\r\n\t\t\r\n\t\tif ( gravVector.x > 0 && inst.speedX <= gravVector.x\r\n\t\t||   gravVector.x < 0 && inst.speedX >= gravVector.x ) {\r\n\t\t\tinst.speedX += math.lengthDirX( inst.gravity, inst.gravityDirection );\r\n\t\t}\r\n\t\t\r\n\t\tif ( gravVector.y > 0 && inst.speedY <= gravVector.y\r\n\t\t||   gravVector.y < 0 && inst.speedY >= gravVector.y ) {\r\n\t\t\tinst.speedY += math.lengthDirY( inst.gravity, inst.gravityDirection );\r\n\t\t}\r\n\r\n\t\t// move instance\r\n\t\tinst.x += inst.speedX * dt;\r\n\t\tinst.y += inst.speedY * dt;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} inst\r\n\t */\r\n\tupdateBoundingBox: function( inst ) {\r\n\r\n\t\tlet spr = sprite.get( inst.sprite );\r\n\t\tif ( spr !== null ) {\r\n\t\t\tinst.boxTop    = inst.y - spr.originY * inst.scaleY;\r\n\t\t\tinst.boxLeft   = inst.x - spr.originX * inst.scaleX;\r\n\t\t\tinst.boxBottom = inst.boxTop + spr.height * inst.scaleY;\r\n\t\t\tinst.boxRight  = inst.boxLeft + spr.width * inst.scaleX;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} inst\r\n\t */\r\n\tupdateCollisionBox: function( inst ) {\r\n\t\t\r\n\t\tlet box = inst.boxCollision;\r\n\t\tbox.top    = inst.y - box.y * inst.scaleY;\r\n\t\tbox.left   = inst.x - box.x * inst.scaleX;\r\n\t\tbox.bottom = box.top + box.height * inst.scaleY;\r\n\t\tbox.right  = box.left + box.width * inst.scaleX;\r\n\t\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdestroy: function( inst, ev = true ) {\r\n\t\t\r\n\t\tinst.exists = false;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdraw: function( inst ) {\r\n\t\t\r\n\t\t// execute draw event if it exists, else draw default\r\n\t\t( inst.events[\"draw\"] !== undefined )\r\n\t\t\t? instance.executeEvent( inst, \"draw\" )\r\n\t\t\t: instance.drawSelf( inst );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdrawSelf: function( inst ) {\r\n\t\t\r\n\t\tif ( inst.sprite !== null )\r\n\t\t\tdraw.sprite(\r\n\t\t\t\tinst.sprite,\r\n\t\t\t\tinst.index,\r\n\t\t\t\tinst.x, inst.y,\r\n\t\t\t\tinst.scaleX, inst.scaleY,\r\n\t\t\t\tinst.rotation\r\n\t\t\t);\r\n\t\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdrawDebug: function( inst ) {\r\n\t\t\r\n\t\tlet box = inst.boxCollision;\r\n\t\tdraw.shape.rectangle(\r\n\t\t\tbox.left,\r\n\t\t\tbox.top,\r\n\t\t\tbox.right - box.left,\r\n\t\t\tbox.bottom - box.top, {\r\n\t\t\t\tcolor: \"#FF000055\"\r\n\t\t\t}\r\n\t\t);\r\n\t\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} sprite\r\n\t */\r\n\tchangeSprite: function( sprite ) {\r\n\t\tthis.sprite = sprite;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} inst\r\n\t */\r\n\tinstanceExecuteListeners: function( inst ) {\r\n\r\n\t\tinst.listeners.forEach( listener => {\r\n\t\t\tswitch ( listener.type ) {\r\n\t\t\t\t\r\n\t\t\t\tcase ( \"collision\" ):\r\n\t\t\t\t\tinstance.instanceCollisionInstance( inst, listener.target );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tinstanceCollisionInstance: function( inst, target ) {\r\n\t\t\r\n\t\tlet arr = object.getAllInstances( target );\r\n\t\tlet box1 = inst.boxCollision;\r\n\t\tarr.forEach( function( targ ) {\r\n\t\t\t\r\n\t\t\t// same instance\r\n\t\t\tif ( inst === targ )\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\t// no collision\r\n\t\t\tlet box2 = targ.boxCollision;\r\n\t\t\tif ( box1.left > box2.right\r\n\t\t\t||   box1.right < box2.left\r\n\t\t\t||   box1.top > box2.bottom\r\n\t\t\t||   box1.bottom < box2.top ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// execute collision event\r\n\t\t\tinstance.executeEvent( inst, \"collision_\" + target, targ );\r\n\t\t\t\r\n\t\t} );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {instance} inst\r\n\t * @param {event} event\r\n\t * @param {instance} otherInst The other instance, in collisions for example.\r\n\t */\r\n\texecuteEvent: function( inst, event, otherInst ) {\r\n\t\t\r\n\t\t// set the current \"other\" instance\r\n\t\totherStack.push( window.other );\r\n\t\twindow.other = otherInst;\r\n\t\t\r\n\t\t//\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tif ( inst.exists ) {\r\n\t\t\t\tlet actions = inst.events[event];\r\n\t\t\t\tif ( actions ) {\r\n\t\t\t\t\tinstance.executeActions( inst, actions, otherInst );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch ( err ) {\r\n\t\t\tconsole.error( err );\r\n\t\t\twindow.addConsoleText( \"#F00\",\r\n\t\t\t\t\"Failed to execute event [\" + event + \"]\"\r\n\t\t\t\t+ \" of object [\" + inst.objectName + \"]\"\r\n\t\t\t\t+ \" with error: \" + err );\r\n\t\t}\r\n\t\t\r\n\t\t// restore previous \"other\" instance\r\n\t\twindow.other = otherStack.pop();\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\texecuteEventAll: function( event, otherInst ) {\r\n\t\t\r\n\t\tfor ( var n = 0; n < aInstances.length; n++ )\r\n\t\t\tinstance.executeEvent( aInstances[n], event, otherInst );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\texecuteActions: function( inst, actions, otherInst ) {\r\n\t\t\r\n\t\tlet condition = true,\r\n\t\t\tsteps = [],\r\n\t\t\tscope = 0,\r\n\t\t\ta, action;\r\n\t\t\r\n\t\tfor ( a=0; a<actions.length; a++ ) {\r\n\t\t\t\r\n\t\t\taction = actions[a];\r\n\t\t\tswitch ( action.flow ) {\r\n\t\t\t\t\r\n\t\t\t\t// regular action\r\n\t\t\t\tcase ( \"\" ):\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( condition ) {\r\n\t\t\t\t\t\tlet func = action.action,\r\n\t\t\t\t\t\t\targs = action.args,\r\n\t\t\t\t\t\t\tn, newArgs = [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor ( n = 0; n < args.length; n++ ) {\r\n\t\t\t\t\t\t\tswitch ( args[n] ) {\r\n\t\t\t\t\t\t\t\tcase ( \"self\" ): newArgs[n] = inst; break;\r\n\t\t\t\t\t\t\t\tcase ( \"other\" ): newArgs[n] = otherInst; break;\r\n\t\t\t\t\t\t\t\tdefault: newArgs[n] = compile.actionExpression.call( inst, args[n] ); break\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tcondition = func.apply( inst, newArgs );\r\n\t\t\t\t\t\t( condition === undefined )\r\n\t\t\t\t\t\t\t? condition = true\r\n\t\t\t\t\t\t\t: steps[scope] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\t// control actions\r\n\t\t\t\tcase ( \"blockBegin\" ): scope++; break;\r\n\t\t\t\tcase ( \"blockEnd\" ): scope--; break;\r\n\t\t\t\tcase ( \"exitEvent\" ): if ( condition ) return false; break;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// exit from a single statement after an expression not contained in a block\r\n\t\t\tif ( steps[scope]++ === 1 )\r\n\t\t\t\tcondition = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} dt Delta time.\r\n\t */\r\n\tstepAll: function( dt ) {\r\n\t\t\r\n\t\taInstances.forEach( function( i ) {\r\n\t\t\tinstance.step( i, dt );\r\n\t\t} );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdrawAll: function() {\r\n\t\t\r\n\t\taInstances.forEach( function( inst ) {\r\n\t\t\t( inst.visible ) && instance.draw( inst );\r\n\t\t});\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tclearDestroyed: function() {\r\n\t\t\r\n\t\tfor ( var n=aInstances.length-1; n>=0; n-- ) {\r\n\t\t\tlet i = aInstances[n];\r\n\t\t\tif( !i.exists ) {\r\n\t\t\t\ti.exists = true;\r\n\t\t\t\ti.speedX = 0;\r\n\t\t\t\ti.speedY = 0;\r\n\t\t\t\ti.object.pool.release( i );\r\n\t\t\t\taInstances.splice( n, 1 );\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport default instance;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/instance.js","/**\r\n * @module canvas\r\n */\r\n\r\n//\r\nimport draw from \"./draw.js\";\r\n\t\r\n//\r\nlet canvas = {\r\n\t\r\n\t//\r\n\tarray: [],\r\n\tmain: null,\r\n\tdom: null,\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tcreate: function( options = {} ) {\r\n\t\t\r\n\t\t//\r\n\t\tlet c = document.createElement( \"CANVAS\" );\r\n\t\tcanvas.array.push( c );\r\n\t\t\r\n\t\t//\r\n\t\tc.width = options.width || 300;\r\n\t\tc.height = options.height || 150;\r\n\t\tc.scale = options.scale || 1;\r\n\t\tc.application = options.application || false;\r\n\t\t\r\n\t\t//\r\n\t\tif ( options.crisp2D ) {\r\n\t\t\tlet ctx = c.getContext( \"2d\" );\r\n\t\t\tctx.imageSmoothingEnabled = false;\r\n\t\t\t//ctx.scale( c.scale, c.scale );\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tif ( c.application ) {\r\n\t\t\tdraw.setTarget( c );\r\n\t\t\tcanvas.setMain( c );\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tc.oncontextmenu = function( e ){\r\n\t\t\te.preventDefault()\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\treturn c;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetMain: function( c ) {\r\n\t\r\n\t\tcanvas.main = c;\r\n\t\tif ( canvas.dom === null ) {\r\n\t\t\tcanvas.dom = c;\r\n\t\t\tvar el = document.getElementById(\"gbgamebox\") || document.body;\r\n\t\t\tel.appendChild( c );\r\n\t\t}\r\n\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tgetMain: function() {\r\n\t\treturn canvas.main;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tclear: function( c, color ) {\r\n\t\tvar ctx = c.getContext( \"2d\" );\r\n\t\tctx.fillStyle = color || \"#000000\";\r\n\t\tctx.fillRect( 0, 0, c.width / c.scale, c.height / c.scale );\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default canvas;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/canvas.js","/**\r\n * @module math\r\n */\r\n\r\nlet math = {\r\n \r\n\t// constances\r\n\tPI: Math.PI,\r\n\tRADTODEG: 180 / Math.PI,\r\n\tDEGTORAD: Math.PI / 180,\r\n\t\t\r\n\t// copied functions\r\n\tcos: Math.cos,\r\n\tsin: Math.sin,\r\n\tsign: Math.sign,\r\n\t\t\r\n\t/**\r\n\t *\r\n\t */\r\n\trandomInt: function( min, max ) {\r\n\t\tmin = Math.ceil( min );\r\n\t\tmax = Math.floor( max );\r\n\t\treturn Math.floor( Math.random() * ( max - min + 1 ) ) + min;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tchoose: function( ...value ) {\r\n\t\treturn value[Math.floor( Math.random() * value.length )];\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tlengthDirX: function( l, d ) {\r\n\t\treturn Math.cos( d * math.DEGTORAD ) * l;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tlengthDirY: function( l, d ) {\r\n\t\treturn Math.sin( d * math.DEGTORAD ) * l;\r\n\t},\r\n\t \r\n\t/**\r\n\t * @param {number} x1\r\n\t * @param {number} y1\r\n\t * @param {number} x2\r\n\t * @param {number} y2\r\n\t */\r\n\tpointDistance: function( x1, y1, x2, y2 ) {\r\n\t\tlet a = x1 - x2,\r\n\t\t\tb = y1 - y2;\r\n\t\treturn Math.sqrt( a * a + b * b );\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} x1\r\n\t * @param {number} y1\r\n\t * @param {number} x2\r\n\t * @param {number} y2\r\n\t */\r\n\tpointDirection: function( x1, y1, x2, y2 ) {\r\n\t\treturn ( ( Math.atan2( y2 - y1, x2 - x1 ) * math.RADTODEG ) + 360 ) % 360;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tangleDifference: function( angle1, angle2 ) {\r\n\t\t\r\n\t\tlet diff = ( angle2 - angle1 ) % 360;\r\n\t\t\r\n\t\tif ( diff <= -180 ) {\r\n\t\t\tdiff += 360;\r\n\t\t} else if ( diff > 180 ) {\r\n\t\t\tdiff -= 360;\r\n\t\t}\r\n\t\t\r\n\t\treturn diff;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default math;\n\n\n// WEBPACK FOOTER //\n// ./js/math.js","/**\r\n * @module room\r\n */\r\n\r\n//\r\nimport instance from \"./instance.js\";\r\nimport sprite from \"./sprite.js\";\r\nimport draw from \"./draw.js\";\r\n \r\n//\r\nlet room = {\r\n\t\r\n\tarray: [],\r\n\tcurrent: null,\r\n\t\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {int} width\r\n\t * @param {int} height\r\n\t */\r\n\tcreate: function( name, width, height ) {\r\n\t\t\r\n\t\tlet newRoom = {\r\n\t\t\tname: name,\r\n\t\t\tassetType: \"room\",\r\n\t\t\twidth: Number( width ),\r\n\t\t\theight: Number( height ),\r\n\t\t\tbackground: null,\r\n\t\t\tbackgroundMethod: \"no-repeat\",\r\n\t\t\tinstances: []\r\n\t\t};\r\n\t\t\r\n\t\tif ( room.current === null )\r\n\t\t\troom.current = newRoom;\r\n\t\t\r\n\t\troom.array.push( newRoom );\r\n\t\treturn newRoom;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetBackground: function( rm, spr ) {\r\n\t\t\r\n\t\trm = room.get( rm );\r\n\t\trm.background = spr;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\taddInstance: function( rm, inst, x, y ) {\r\n\t\t\r\n\t\trm = room.get( rm );\r\n\t\trm.instances.push( { name: inst, x: x, y: y } );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tenter: function( rm ) {\r\n\t\t\r\n\t\t// leave room event\r\n\t\tinstance.executeEventAll( \"roomleave\" );\r\n\t\t\r\n\t\t// clear current instances\r\n\t\tinstance.instanceArray.forEach( function( i ) {\r\n\t\t\tinstance.destroy( i, false );\r\n\t\t} );\r\n\r\n\t\t// goto new room and create new instances\r\n\t\trm = room.get( rm );\r\n\t\troom.current = rm;\r\n\t\trm.instances.forEach( function ( inst ) {\r\n\t\t\tinstance.create( inst.name, inst.x, inst.y );\r\n\t\t} );\r\n\t\t\r\n\t\t// enter room event\r\n\t\tinstance.executeEventAll( \"roomenter\" );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tdraw: function( rm ) {\r\n\r\n\t\t// draw background\r\n\t\trm = room.get( rm );\r\n\t\tlet spr = sprite.get( rm.background );\r\n\t\tif ( spr !== null ) {\r\n\t\t\t\r\n\t\t\tvar canvas = draw.getTarget();\r\n\t\t\tvar ctx = canvas.getContext( \"2d\" );\r\n\t\t\tlet image = spr.images[0].img;\r\n\t\t\tif ( rm.backgroundMethod === \"stretch\" ) {\r\n\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\r\n\t\t\t} else {\r\n\t\t\t\tlet ptrn = ctx.createPattern( image, rm.backgroundMethod );\r\n\t\t\t\tctx.fillStyle = ptrn;\r\n\t\t\t\tctx.fillRect( 0, 0, canvas.width, canvas.height );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tget: function( name ) {\r\n\t\t\r\n\t\tif ( typeof name === \"object\" )\r\n\t\t\treturn name;\r\n\t\t\r\n\t\tfor ( var n = 0; n < room.array.length; n++ )\r\n\t\t\tif ( room.array[n][\"name\"] === name )\r\n\t\t\t\treturn room.array[n];\r\n\t\t\t\r\n\t\treturn null;\r\n\t\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default room;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/room.js","/**\r\n * @module input\r\n */\r\n \r\nimport canvas from \"./canvas\";\r\nimport keyValues from \"./keyvalues.js\";\r\n\r\nlet element = document;\r\n\r\n// mouse object\r\nlet __mouse = {\r\n\tpressed: [false, false, false],\r\n\tdown: [false, false, false],\r\n\treleased: [false, false, false],\r\n\twheelUp: false,\r\n\twheelDown: false,\r\n\tx: 0,\r\n\ty: 0\r\n}\r\n\r\n// keboard object\r\nlet __keyboard = {\r\n\tpressed: {},\r\n\tdown: {},\r\n\treleased: {}\r\n}\r\n\r\n// touch object\r\nlet __touch = {\r\n\tstart: [],\r\n\theld: [],\r\n\tmove: [],\r\n\tend: [],\r\n\tcancel: [],\r\n\tx: [],\r\n\ty: []\r\n}\r\n\r\n//\r\nlet __triggerEvents = [];\r\n\r\n//\r\nlet input = {\r\n\t\r\n\ttriggerEvents: __triggerEvents,\r\n\tmouse: __mouse,\r\n\tkeyboard: __keyboard,\r\n\ttouch: __touch,\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinit: function() {\r\n\t\r\n\t\t// init all input methods\r\n\t\tinput.initMouse();\r\n\t\tinput.initKeyboard();\r\n\t\tinput.initTouch();\r\n\t\t\r\n\t\t// disable context menu\r\n\t\telement.oncontextmenu = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinitMouse: function() {\r\n\t\t\r\n\t\t//\r\n\t\tlet handleMouseDown = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\t( !__mouse.pressed[e.button] ) && window.focus();\r\n\t\t\t__mouse.pressed[e.button] = true;\r\n\t\t\t__mouse.down[e.button] = true;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleMouseUp = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\t__mouse.pressed[e.button] = false;\r\n\t\t\t__mouse.released[e.button] = true;\r\n\t\t\t__mouse.down[e.button] = false;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleMouseMove = function( e ) {\r\n\t\t\tlet canv = canvas.main;\r\n\t\t\tlet rect = canv.getBoundingClientRect();\r\n\t\t\t__mouse.x = e.clientX - rect.left;\r\n\t\t\t__mouse.y = e.clientY - rect.top;\r\n\t\t\tconsole.log(e.clientX);\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleMouseWheel = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet delta = Math.max( -1, Math.min( 1, e.wheelDelta ) );\r\n\t\t\t__mouse.wheelUp = delta > 0;\r\n\t\t\t__mouse.wheelDown = delta < 0;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\telement.onmousedown = handleMouseDown;\r\n\t\telement.onmouseup = handleMouseUp;\r\n\t\telement.onmousemove = handleMouseMove;\r\n\t\telement.onmousewheel = handleMouseWheel;\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinitKeyboard: function() {\r\n\t\t\r\n\t\t//\r\n\t\tkeyValues.forEach( function( key ) {\r\n\t\t\t__keyboard.pressed[key] = false;\r\n\t\t\t__keyboard.down[key] = false;\r\n\t\t\t__keyboard.released[key] = false;\r\n\t\t} );\r\n\t\t\r\n\t\t//\r\n\t\tlet handleKeyDown = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif ( !__keyboard.down[e.code] ) {\r\n\t\t\t\t__keyboard.pressed[e.code] = true;\r\n\t\t\t\t__keyboard.down[e.code] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleKeyUp = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\t__keyboard.released[e.code] = true;\r\n\t\t\t__keyboard.down[e.code] = false;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\telement.onkeydown = handleKeyDown;\r\n\t\telement.onkeyup = handleKeyUp;\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tinitTouch: function() {\r\n\t\t\r\n\t\t//\r\n\t\tlet handleTouchStart = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\t( !__touch.start[0] ) && window.focus();\r\n\t\t\t__touch.start[0] = true;\r\n\t\t\t__touch.held[0] = true;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleTouchEnd = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\t__touch.start[0] = false;\r\n\t\t\t__touch.end[0] = true;\r\n\t\t\t__touch.held[0] = false;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet handleTouchMove = function( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet touches = e.changedTouches;\r\n\t\t\t__touch.x[0] = touches[0].pageX;\r\n\t\t\t__touch.y[0] = touches[0].pageY;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\telement.ontouchstart = handleTouchStart;\r\n\t\telement.ontouchend = handleTouchEnd;\r\n\t\telement.ontouchcancel = handleTouchEnd;\r\n\t\telement.ontouchmove = handleTouchMove;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tgetTriggerEvents: function() {    \r\n\r\n\t\t__triggerEvents.length = 0;\r\n\t\tObject.keys( __keyboard.down ).forEach( key => {\r\n\t\t\t\r\n\t\t\tif ( keyValues.includes( key ) ) {\r\n\t\t\t\r\n\t\t\t\tif ( __keyboard.down[key] )\r\n\t\t\t\t\t__triggerEvents.push( key );\r\n\t\t\t\t\r\n\t\t\t\tif ( __keyboard.pressed[key] )\r\n\t\t\t\t\t__triggerEvents.push( key + \"Pressed\" );\r\n\t\t\t\t\r\n\t\t\t\tif ( __keyboard.released[key] )\r\n\t\t\t\t\t__triggerEvents.push( key + \"Released\" );\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\r\n\t\t\t\tconsole.warn( \"input key not supported: \", key );\r\n\t\t\t\tdelete __keyboard.down[key];\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} );\r\n\t\t\r\n\t\t// map mouse ids to names\r\n\t\tlet mouseMap = [\"Left\", \"Middle\", \"Right\"];\r\n\t\t\r\n\t\t// mouse events\r\n\t\tfor( var n=0; n<3; n++ ) {\r\n\t\t\t\r\n\t\t\tif ( __mouse.down[n] )\r\n\t\t\t\t__triggerEvents.push( mouseMap[n] + \"Down\" );\r\n\t\t\t\r\n\t\t\tif ( __mouse.pressed[n] )\r\n\t\t\t\t__triggerEvents.push( mouseMap[n] + \"Pressed\" );\r\n\t\t\t\r\n\t\t\tif ( __mouse.released[n] )\r\n\t\t\t\t__triggerEvents.push( mouseMap[n] + \"Released\" );\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif ( __mouse.wheelUp ) __triggerEvents.push( \"WheelUp\" );\r\n\t\tif ( __mouse.wheelDown ) __triggerEvents.push( \"WheelDown\" );\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tupdate: function() {\r\n\t\t\r\n\t\tObject.keys( __keyboard.down ).forEach( key => {\r\n\t\t\t__keyboard.pressed[key] = false;\r\n\t\t\t__keyboard.released[key] = false;\r\n\t\t} );\r\n\r\n\t\tObject.keys( __mouse.down ).forEach( button => {\r\n\t\t\t__mouse.pressed[button] = false;\r\n\t\t\t__mouse.released[button] = false;\r\n\t\t} );\r\n\t\t\r\n\t\tObject.keys( __touch.held ).forEach( button => {\r\n\t\t\t__touch.start[button] = false;\r\n\t\t\t__touch.end[button] = false;\r\n\t\t\t__touch.held[button] = false;\r\n\t\t} );\r\n\t\t\r\n\t\t__mouse.wheelUp = false;\r\n\t\t__mouse.wheelDown = false;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default input;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/input.js","/**\r\n * @module main\r\n */\r\n\r\nimport canvas from \"./canvas.js\";\r\nimport room from \"./room.js\";\r\nimport input from \"./input.js\";\r\nimport instance from \"./instance.js\";\r\nimport global from \"./global.js\";\r\nimport draw from \"./draw.js\";\r\nimport camera from \"./camera.js\";\r\n\r\nlet lastTick = performance.now(),\r\n\ttickLength = 1000 / 60,\r\n\tdt = 0,\r\n\tlast = 0;\r\n\t\r\n//\r\nlet main = {\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tget dt() {\r\n\t\treturn dt;\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tstart: function( opts = {} ) {\r\n\t\t\r\n\t\t// Basic site-locking\r\n\t\tif ( opts.host !== undefined && opts.host !== \"\" ) {\r\n\t\t\tlet loc = ( window.parent ) ? window.parent.location : window.location;\r\n\t\t\tlet host = loc.hostname;\r\n\t\t\tlet arr = opts.host.split( \" \" ).join( \"\" ).split( \",\" );\r\n\t\t\tif ( !opts.host.includes( host ) )\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet canv = canvas.create({\r\n\t\t\twidth: room.current.width,\r\n\t\t\theight: room.current.height,\r\n\t\t\tcrisp2D: true,\r\n\t\t\tapplication: true\r\n\t\t});\r\n\t\t\r\n\t\t// selectively enable input methods\r\n\t\t( opts.enableMouse ) && input.initMouse();\r\n\t\t( opts.enableKeyboard ) && input.initKeyboard();\r\n\t\t( opts.enableTouch ) && input.initTouch();\r\n\t\t\r\n\t\t//\r\n\t\t( opts.hideCursor ) && ( canv.style.cursor = \"none\" );\r\n\t\t\r\n\t\t//\r\n\t\troom.enter( room.current );\r\n\t\ttick( performance.now() );\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetGameSpeed: function( speed ) {\r\n\t\ttickLength = 1000 / speed;\r\n\t}\r\n\t\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction tick( timestamp ) {\r\n\t\r\n\t// exit game with Esc key\r\n\tif ( window._GB_stop && input.triggerEvents.includes(\"EscapePressed\") )\r\n\t\twindow._GB_stop();\r\n\t\r\n\t// request the next frame\r\n\twindow.requestAnimationFrame( tick );\r\n\tlet nextTick = lastTick + tickLength;\r\n\tlet numTicks = 0;\r\n\tglobal.fps = 1000 / (timestamp - last);\r\n\tlast = timestamp;\r\n\r\n\t//\r\n\tif ( timestamp > nextTick ) {\r\n\t\tlet timeSinceTick = timestamp - lastTick;\r\n\t\tnumTicks = Math.floor( timeSinceTick / tickLength );\r\n\t}\r\n\t\r\n\t//\r\n\tinput.getTriggerEvents();\r\n\tqueueUpdates( numTicks );\r\n\tgameDraw();\r\n\t\r\n\t//\r\n\tif ( numTicks ) {\r\n\t\tinput.update();\r\n\t}\r\n\t\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction queueUpdates( numTicks ) {\r\n\tfor( var i = 0; i < numTicks; i++ ) {\r\n\t\tlastTick = lastTick + tickLength;\r\n\t\tdt = 1;\r\n\t\tgameUpdate( 1 );\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {number} dt Delta Time.\r\n */\r\nfunction gameUpdate( dt ) {\r\n\tinstance.stepAll( dt );\r\n\tinstance.clearDestroyed();\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction gameDraw() {\r\n\tdraw.reset();\r\n\tcanvas.clear( canvas.main, \"#000000\" );\r\n\troom.draw( room.current );\r\n\tcamera.update();\r\n\tinstance.drawAll();\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction handleResizeEvent() {\r\n\tinstance.executeEventAll( \"resize\" );\r\n}\r\n\r\n// attach event listerners\r\nwindow.addEventListener( \"resize\", handleResizeEvent );\r\n\r\n//\r\nexport default main;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","\r\nlet color = {\r\n\r\n\t/**\r\n\t * @param {string} hex\r\n\t */\r\n\thexToRgb: function( hex ) {\r\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\treturn result ? {\r\n\t\t\tr: parseInt( result[1], 16 ),\r\n\t\t\tg: parseInt( result[2], 16 ),\r\n\t\t\tb: parseInt( result[3], 16 )\r\n\t\t} : null;\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tcomponentToHex: function( c ) {\r\n\t\tvar hex = c.toString( 16 );\r\n\t\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\trgbToHex: function( r, g, b ) {\r\n\t\treturn \"#\" + color.componentToHex( r ) + color.componentToHex( g ) + color.componentToHex( b );\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default color;\n\n\n// WEBPACK FOOTER //\n// ./js/color.js","/**\r\n * @module keyvalues\r\n */\r\n \r\nlet values = [\r\n\t\"ArrowUp\",\r\n\t\"ArrowDown\",\r\n\t\"ArrowLeft\",\r\n\t\"ArrowRight\",\r\n\t\"Enter\",\r\n\t\"Space\",\r\n\t\"Backspace\",\r\n\t\"Escape\",\r\n\t\"ShiftLeft\",\r\n\t\"ShiftRight\",\r\n\t\"ControlLeft\",\r\n\t\"ControlRight\",\r\n\t\"AltLeft\",\r\n\t\"AltRight\",\r\n\t\"KeyA\",\r\n\t\"KeyB\",\r\n\t\"KeyC\",\r\n\t\"KeyD\",\r\n\t\"KeyE\",\r\n\t\"KeyF\",\r\n\t\"KeyG\",\r\n\t\"KeyH\",\r\n\t\"KeyI\",\r\n\t\"KeyJ\",\r\n\t\"KeyK\",\r\n\t\"KeyL\",\r\n\t\"KeyM\",\r\n\t\"KeyN\",\r\n\t\"KeyO\",\r\n\t\"KeyP\",\r\n\t\"KeyQ\",\r\n\t\"KeyR\",\r\n\t\"KeyS\",\r\n\t\"KeyT\",\r\n\t\"KeyU\",\r\n\t\"KeyV\",\r\n\t\"KeyW\",\r\n\t\"KeyZ\",\r\n\t\"KeyY\",\r\n\t\"KeyZ\",\r\n];\r\n\r\nexport default values;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/keyvalues.js","/**\r\n * @module objects\r\n */\r\n\r\nimport event from \"./event.js\";\r\nimport instance from \"./instance.js\";\r\nimport objectVars from \"./objectVars.js\";\r\nimport Pool from \"./utils/pool.js\";\r\n\r\nlet objectArray = [];\r\n\r\n//\r\nlet objectModule = {\r\n\t\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {number} sprite\r\n\t */\r\n\tcreate: function( name, sprite ) {\r\n\t\t\r\n\t\t// build new object\r\n\t\tlet obj = function(){};\r\n\t\tobjectVars.set( obj.prototype );\r\n\t\t\r\n\t\t//\r\n\t\tobj.assetType = \"object\";\r\n\t\tobj.objectName = name || \"object_\" + obj.id;\r\n\t\tobj.prototype.sprite = sprite || null;\r\n\t\t\r\n\t\t//\r\n\t\tobj.pool = new Pool( obj );\r\n\t\t\r\n\t\t//\r\n\t\tobjectArray.push( obj );\r\n\t\treturn obj;\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tset: function( obj, property, value ) {\r\n\t\tobj = objectModule.get( obj );\r\n\t\tobj.prototype[property] = value;\r\n\t},\r\n\r\n\t/**\r\n\t * Add an action with variable parameters to an event of an object.\r\n\t * @param object Can be an object constructor or integer ID.\r\n\t * @param event\r\n\t * @param action\r\n\t * @param {...*} args\r\n\t */\r\n\teventAddAction: function( obj, event, action, ...args ) {\r\n\t\t\r\n\t\tobj = objectModule.get( obj );\r\n\t\t\r\n\t\tif ( typeof event === \"object\" ) {\r\n\t\t\tObject.keys( event ).forEach( key => {\r\n\t\t\t\tevent[key].forEach( params => {\r\n\t\t\t\t\tobjectModule.eventAddAction( obj, key, ...params );\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif ( action !== undefined ) {\r\n\t\t\t\r\n\t\t\t// if flow action, get flow tag\r\n\t\t\tlet flow = \"\";\r\n\t\t\tif ( typeof action === \"string\" )\r\n\t\t\t\tflow = action;\r\n\t\t\t\r\n\t\t\t// create a new event if not yet defined\r\n\t\t\tif ( obj.prototype.events[event] === undefined ) {\r\n\t\t\t\t\r\n\t\t\t\tobj.prototype.events[event] = [];\r\n\t\t\t\t\r\n\t\t\t\tif ( event.includes( \"collision_\" ) ) {\r\n\t\t\t\t\r\n\t\t\t\t\tlet index = event.indexOf( \"_\" ) + 1,\r\n\t\t\t\t\t\tname = event.slice( index, 200 );\r\n\t\t\t\t\t\r\n\t\t\t\t\tobjectModule.addCollisionListener( obj, name );\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// add action data to event\r\n\t\t\tobj.prototype.events[event].push({\r\n\t\t\t\tflow: flow,\r\n\t\t\t\taction: action,\r\n\t\t\t\targs: args\r\n\t\t\t});\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tconsole.warn( \"tried to add an undefined action to an event!\" );\r\n\t\t}\r\n\t\t\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\taddCollisionListener: function( obj, target ) {\r\n\r\n\t\tobj.prototype.listeners.push({\r\n\t\t\ttype: \"collision\",\r\n\t\t\ttarget: target\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tgetAllInstances: function( obj ) {\r\n\r\n\t\tlet arr = [];\r\n\t\tinstance.instanceArray.forEach( instance => {\r\n\t\t\tlet name = instance.constructor.objectName;\r\n\t\t\tif ( name === obj )\r\n\t\t\t\tarr.push( instance );\r\n\t\t} );\r\n\t\treturn arr;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number}\r\n\t */\r\n\tget: function( value ) {\r\n\t\t\r\n\t\tif ( typeof value === \"object\" || typeof value === \"function\" )\r\n\t\t\treturn value;\r\n\t\t\r\n\t\tfor ( var n = 0; n < objectArray.length; n++ )\r\n\t\t\tif ( objectArray[n].objectName === value )\r\n\t\t\t\treturn objectArray[n];\r\n\t\t\t\r\n\t\tconsole.warn(\"FAIL: \", typeof value, value);\r\n\t\treturn null;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default objectModule;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/object.js","/**\r\n * @module event\r\n */\r\n \r\nimport keyValues from \"./keyvalues.js\";\r\n\r\n//\r\nlet events = {\r\n\t\r\n\tcreate: \"create\",\r\n\troomEnter: \"roomEnter\",\r\n\troomLeave: \"roomLeave\",\r\n\tstep: \"step\",\r\n\tdraw: \"draw\",\r\n\tcollision: \"collision_\",\r\n\tresize: \"resize\",\r\n\tkeyboard: {\r\n\t\t...translate( keyValues ),\r\n\t\tpressed: translate( keyValues, \"Pressed\" ),\r\n\t\treleased: translate( keyValues, \"Released\" )\r\n\t}\r\n\t\r\n}\r\n\t\r\n/**\r\n * @param {array} array\r\n * @param {string} [postfix=\"\"]\r\n */\r\nfunction translate( array, postfix = \"\" ) {\r\n\tlet obj = {};\r\n\tarray.forEach( function( name ) {\r\n\t\tobj[name] = name + postfix;\r\n\t} );\r\n\treturn obj;\r\n}\r\n\r\n//\r\nexport default events;\n\n\n// WEBPACK FOOTER //\n// ./js/event.js","/**\r\n * @module Pool\r\n */\r\n\r\n/**\r\n * The Pool object contains an array (the pool) called stack to which we can give objects. The Pool also maintains it's own length property, as the true length of the stack array does not change, so as to avoid garbage collection.\r\n * @param {Object} newConstructor The constructor function for this pool. During get, if no items are in the pool and no default value is provided, a new object is created from this constructor and returned.\r\n */\r\nexport default function Pool( newConstructor ) {\r\n\tthis.stack = [];\r\n\tthis.length = 0;\r\n\tthis.newConstructor = newConstructor;\r\n}\r\n\r\n/**\r\n * @param {Object} [def] The default object (or even value) to return if no items are found in the pool. If this is not defined, and no items are found in the pool, then a new object is created as per the Pool's newConstructor property.\r\n */\r\nPool.prototype.get = function( def ) {\r\n\t\r\n\t// return object from pool\r\n\tif ( this.length ) {\r\n\t\tdef = this.stack[--this.length];\r\n\t\tthis.stack[this.length] = undefined;\r\n\t}\r\n\t\r\n\t// return found/default object or create a new one\r\n\treturn def || new this.newConstructor();\r\n\t\r\n}\r\n\r\n/**\r\n * @param {Object} i Objec to release, adding it to the pool.\r\n */\r\nPool.prototype.release = function( i ) {\r\n\tthis.stack[this.length++] = i;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/utils/pool.js","\r\nlet global = {\r\n\tfps: 0\r\n}\r\n\r\nexport default global;\n\n\n// WEBPACK FOOTER //\n// ./js/global.js","/**\r\n * @module camera\r\n */\r\n\r\n//\r\nimport room from \"./room.js\";\r\nimport draw from \"./draw.js\";\r\n\r\n//\r\nlet camera = {\r\n\t\r\n\t//\r\n\tarray: [],\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tcreate: function( options = {} ) {\r\n\t\r\n\t\t// create new camera\r\n\t\tlet cam = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tangle: 0,\r\n\t\t\twidth: room.current.width,\r\n\t\t\theight: room.current.height,\r\n\t\t\tfollow: null,\r\n\t\t\tgridLocked: false,\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0\r\n\t\t}\r\n\t\t\r\n\t\t// assign options to new camera\r\n\t\tObject.assign( cam, options );\r\n\t\t\r\n\t\t// add to camera list\r\n\t\tcamera.array.push( cam );\r\n\t\treturn cam;\r\n\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tupdate: function() {\r\n\t\r\n\t\tcamera.array.forEach( function( cam ) {\r\n\t\t\t\r\n\t\t\t// camera is following an instance\r\n\t\t\tif ( cam.follow !== null ) {\r\n\t\t\t\t\r\n\t\t\t\t// if single instance, put into array\r\n\t\t\t\tif ( !Array.isArray( cam.follow ) ) {\r\n\t\t\t\t\tcam.follow = [cam.follow];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//\r\n\t\t\t\tlet x = 0,\r\n\t\t\t\t\ty = 0,\r\n\t\t\t\t\tcount = 0,\r\n\t\t\t\t\tweight = 1;\r\n\t\t\t\t\r\n\t\t\t\tcam.follow.forEach( function( inst ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( Array.isArray( inst ) ) {\r\n\t\t\t\t\t\tweight = inst[1] || 1;\r\n\t\t\t\t\t\tinst = inst[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tweight = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tx += inst.x * weight;\r\n\t\t\t\t\ty += inst.y * weight;\r\n\t\t\t\t\tcount += weight;\r\n\t\t\t\t\t\r\n\t\t\t\t} );\r\n\t\t\t\t\r\n\t\t\t\tcam.x = x / count;\r\n\t\t\t\tcam.y = y / count;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// update bounds\r\n\t\t\tcam.left   = cam.x - cam.width  * 0.5;\r\n\t\t\tcam.right  = cam.x + cam.width  * 0.5;\r\n\t\t\tcam.top    = cam.y - cam.height * 0.5;\r\n\t\t\tcam.bottom = cam.y + cam.height * 0.5;\r\n\t\t\t\r\n\t\t\t// apply camera\r\n\t\t\tdraw.transform.translate( -cam.left, -cam.top );\r\n\t\t\t\r\n\t\t} );\r\n\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default camera;\n\n\n// WEBPACK FOOTER //\n// ./js/camera.js","/**\r\n * @module sound\r\n */\r\n\r\n//\r\nlet soundResources = [];\r\n\t\r\n//\r\nlet soundModule = {\r\n\t\r\n\t//\r\n\tisEnabled: true,\r\n\t\r\n\t/**\r\n\t * Whether sound should be enabled at all.\r\n\t */\r\n\tenable: function( x ) {\r\n\t\tsoundModule.isEnabled = x;\r\n\t},\r\n\t\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {source} source\r\n\t */\r\n\tcreate: function( name, source ) {\r\n\r\n\t\t//\r\n\t\tlet sound = {\r\n\t\t\tname: name,\r\n\t\t\tassetType: \"sound\",\r\n\t\t\tinstances: [new Audio( source )],\r\n\t\t\tready: false\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tlet test = sound.instances[0];\r\n\t\tlet callback = function() {\r\n\t\t\tsound.ready = true;\r\n\t\t\ttest.oncanplaythrough = null;\r\n\t\t}\r\n\t\ttest.oncanplaythrough = callback;\r\n\t\t\r\n\t\t//\r\n\t\tsoundResources.push( sound );\r\n\t\treturn sound;\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t * @param {object} sound The sound resource (object) to be played.\r\n\t * @param {object} options object.\r\n\t */\r\n\tplay: function( soundName, options = {} ) {\r\n\t\t\r\n\t\t//\r\n\t\tlet sound;\r\n\t\tif ( typeof sound !== \"object\" )\r\n\t\t\tsound = soundModule.get( soundName );\r\n\t\t\r\n\t\tif ( !sound ) {\r\n\t\t\tconsole.warn( \"sound with name \" + soundName + \" doesn't exist!\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// sound is enabled\r\n\t\tif ( soundModule.isEnabled ) {\r\n\t\t\t\r\n\t\t\t// find an existing sound instance to play\r\n\t\t\tlet playSound;\r\n\t\t\tfor ( var i=0, n=sound.instances.length; i<n; i++ ) {\r\n\t\t\t\tlet instance = sound.instances[i];\r\n\t\t\t\tif ( instance.paused )\r\n\t\t\t\t\tplaySound = instance;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// create new instance of sound\r\n\t\t\tif ( !playSound ) {\r\n\t\t\t\tplaySound = sound.instances[0].cloneNode();\r\n\t\t\t\tsound.instances.push( playSound );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tplaySound.onError = function( err ) {\r\n\t\t\t\tconsole.error( soundName, err );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// play the sound\r\n\t\t\tlet promise = playSound.play();\r\n\t\t\tif ( promise !== undefined ) {\r\n\t\t\t\tpromise.then( function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// on end event\r\n\t\t\t\t\tplaySound.onended = function() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// internal event stuff\r\n\t\t\t\t\t\t( ( Number( options.loop || false ) )\r\n\t\t\t\t\t\t\t? _loop : _end ).call( this );\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// and custom event, if defined\r\n\t\t\t\t\t\t( options.onEnd ) && options.onEnd();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t} ).catch( function( error ) {\r\n\t\t\t\t\tconsole.warn( error );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\treturn playSound;\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// sound is disabled, just return base audio node\r\n\t\treturn sound.instances[0];\r\n\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tstop: function( sound ) {\r\n\t\r\n\t\t//\r\n\t\tif ( typeof sound !== \"object\" )\r\n\t\t\tsound = soundModule.get( sound );\r\n\t\t\r\n\t\t// stop all instance of the given sound\r\n\t\tfor ( var i=0, n=sound.instances.length; i<n; i++ ) {\r\n\t\t\tlet instance = sound.instances[i];\r\n\t\t\tif ( !instance.paused )\r\n\t\t\t\t_end.call( instance );\r\n\t\t}\r\n\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\treadyAll: function() {\r\n\t\t\r\n\t\tfor ( var i=0, n=soundResources.length; i<n; i++ ) {\r\n\t\t\tif ( !soundResources[i].ready )\r\n\t\t\t\treturn false\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t\t\r\n\t},\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tget: function( value ) {\r\n\t\t\r\n\t\t//\r\n\t\tfor ( var i=0, n=soundResources.length; i<n; i++ ) {\r\n\t\t\tif ( soundResources[i].name === value )\r\n\t\t\t\treturn soundResources[i];\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nfunction _loop() {\r\n\tthis.currentTime = 0;\r\n\tthis.play();\r\n}\r\n\r\n//\r\nfunction _end() {\r\n\tthis.pause();\r\n\tthis.currentTime = 0;\r\n}\r\n\r\n//\r\nexport default soundModule;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/sound.js","/**\r\n * @module generator\r\n */\r\n\r\n//\r\nlet generator = {\r\n\t\r\n\t/**\r\n\t * @param {function} constructor\r\n\t */\r\n\tfunctionFromConstructor: function( constructor ) {\r\n\t\treturn function( ...a ) { return new constructor( ...a ) }\r\n\t},\r\n\r\n\t/**\r\n\t * @param {function} method\r\n\t */\r\n\tfunctionFromMethod: function( method ) {\r\n\t\treturn function( ...a ) { return method.call( ...a ) }\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default generator;\n\n\n// WEBPACK FOOTER //\n// ./js/generator.js","/**\r\n * @module dataGrid\r\n */\r\n\r\n//\r\nimport Pool from \"../utils/pool.js\";\r\n\r\n//\r\nlet gridPool = new Pool( Grid );\r\n\r\n/**\r\n *\r\n */\r\nlet Grid = function( width, height, options = {} ) {\r\n\t\r\n\t//\r\n\tlet size = width * height,\r\n\t\tvalue = options.value || 0;\r\n\t\r\n\tlet myGrid = gridPool.get( this );\r\n\tlet array = ( myGrid === this )\r\n\t\t? this.data = []\r\n\t\t: myGrid.data;\r\n\t\r\n\t// fill grid with default value\r\n\tfor ( var n=0; n<size; n++ ) {\r\n\t\tarray[n] = value;\r\n\t}\r\n\r\n\t//\r\n\tmyGrid.size = size;\r\n\tmyGrid.width = width;\r\n\tmyGrid.height = height;\r\n\treturn myGrid;\r\n\r\n}\r\n\r\n/**\r\n *\r\n */\r\nGrid.prototype.get = function( x, y ) {\r\n\treturn this.data[x + y * this.width];\r\n}\r\n\r\n/**\r\n *\r\n */\r\nGrid.prototype.set = function( x, y, value ) {\r\n\tthis.data[x + y * this.width] = value;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nGrid.prototype.destroy = function() {\r\n\tgridPool.release( this );\r\n}\r\n\r\n//\r\nexport default Grid;\n\n\n// WEBPACK FOOTER //\n// ./js/data/dataGrid.js","\r\n//\r\nlet tween = {\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tblend( n1 , n2 , perc ) {\r\n\t\tlet diff = n2 - n1;\r\n\t\treturn n1 + ( diff * perc );\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tcubicBezier( x2, y2, x3, y3, i ) {\r\n\t\t\r\n\t\tlet x1 = 0,\r\n\t\t\ty1 = 0,\r\n\t\t\tx4 = 1,\r\n\t\t\ty4 = 1;\r\n\t\t\r\n\t\t // The Green Lines\r\n\t\tlet xa = tween.blend( x1 , x2 , i ),\r\n\t\t\tya = tween.blend( y1 , y2 , i ),\r\n\t\t\txb = tween.blend( x2 , x3 , i ),\r\n\t\t\tyb = tween.blend( y2 , y3 , i ),\r\n\t\t\txc = tween.blend( x3 , x4 , i ),\r\n\t\t\tyc = tween.blend( y3 , y4 , i ),\r\n\r\n\t\t\t// The Blue Line\r\n\t\t\txm = tween.blend( xa , xb , i ),\r\n\t\t\tym = tween.blend( ya , yb , i ),\r\n\t\t\txn = tween.blend( xb , xc , i ),\r\n\t\t\tyn = tween.blend( yb , yc , i ),\r\n\r\n\t\t\t// The Black Dot\r\n\t\t\tx = tween.blend( xm , xn , i ),\r\n\t\t\ty = tween.blend( ym , yn , i );\r\n\t\t\r\n\t\t//\r\n\t\treturn y;\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default tween;\n\n\n// WEBPACK FOOTER //\n// ./js/tween.js","/**\r\n * @module core\r\n */\r\n\r\nimport main from \"./main.js\";\r\nimport canvas from \"./canvas.js\";\r\nimport room from \"./room.js\";\r\nimport input from \"./input.js\";\r\nimport sprite from \"./sprite.js\";\r\nimport sound from \"./sound.js\";\r\nimport object from \"./object.js\";\r\nimport event from \"./event.js\";\r\nimport * as action from \"./action.js\";\r\nimport instance from \"./instance.js\";\r\nimport draw from \"./draw.js\";\r\nimport math from \"./math.js\";\r\nimport tween from \"./tween.js\";\r\n\r\nexport {\r\n\tmain,\r\n\tcanvas,\r\n\troom,\r\n\tinput,\r\n\tsprite,\r\n\tsound,\r\n\tobject,\r\n\tevent,\r\n\taction,\r\n\tinstance,\r\n\tdraw,\r\n\tmath,\r\n\ttween\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/core.js","/**\r\n *\r\n */\r\n \r\n//\r\nimport math from \"./math.js\";\r\nimport instance from \"./instance.js\";\r\n \r\n//\r\nlet basic = JSON.stringify({\r\n\tsprite: null,\r\n\tindex: 0,\r\n\timageSpeed: 1,\r\n\tanimationBehavior: \"loop\",\r\n\tvisible: true,\r\n\tsolid: false,\r\n\texists: true,\r\n\tscaleX: 1,\r\n\tscaleY: 1,\r\n\trotation: 0,\r\n\tterminal: 100,\r\n\tgravity: 0,\r\n\tgravityDirection: 0,\r\n\tspeedX: 0,\r\n\tspeedY: 0,\r\n\tboxTop: 0,\r\n\tboxBottom: 0,\r\n\tboxLeft: 0,\r\n\tboxRight: 0,\r\n\tbehaviours: [],\r\n\tlisteners: [],\r\n\tevents: {},\r\n\tboxCollision: {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: 0,\r\n\t\theight: 0,\r\n\t\ttop: 0,\r\n\t\tbottom: 0,\r\n\t\tleft: 0,\r\n\t\tright: 0 \r\n\t},\r\n\t_depth: 0\r\n});\r\n \r\n//\r\nlet objectVarsModule = {\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tset: function( proto ) {\r\n\t\t\r\n\t\tObject.assign( proto, JSON.parse( basic ) );\r\n\t\t\r\n\t\tObject.defineProperty( proto, \"depth\", {\r\n\t\t\tset: function( x ) {\r\n\t\t\t\tthis._depth = x;\r\n\t\t\t\tinstance.instanceArray.sort( function( a, b ) {\r\n\t\t\t\t\treturn a._depth - b._depth;\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\tget: function() {\r\n\t\t\t\treturn this._depth;\r\n\t\t\t}\r\n\t\t} );\r\n\t\t\r\n\t\tObject.defineProperty( proto, \"speed\", {\r\n\t\t\tset: function( x ) {\r\n\t\t\t\tlet y = this.direction * math.DEGTORAD;\r\n\t\t\t\tthis.speedX = Math.cos( y ) * x;\r\n\t\t\t\tthis.speedY = Math.sin( y ) * x;\r\n\t\t\t},\r\n\t\t\tget: function( x ) {\r\n\t\t\t\treturn math.pointDistance( 0, 0, this.speedX, this.speedY );\r\n\t\t\t}\r\n\t\t} );\r\n\t\t\r\n\t\tObject.defineProperty( proto, \"direction\", {\r\n\t\t\tset: function( x ) {\r\n\t\t\t\tlet y = this.speed;\r\n\t\t\t\tthis.speedX = Math.cos( x * math.DEGTORAD ) * y;\r\n\t\t\t\tthis.speedY = Math.sin( x * math.DEGTORAD ) * y;\r\n\t\t\t},\r\n\t\t\tget: function( x ) {\r\n\t\t\t\treturn math.pointDirection( 0, 0, this.speedX, this.speedY );\r\n\t\t\t}\r\n\t\t} );\r\n\t\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default objectVarsModule;\n\n\n// WEBPACK FOOTER //\n// ./js/objectVars.js","/**\r\n * @module compile\r\n */\r\n\r\n//\r\nimport global from \"./global.js\";\r\n \r\n//\r\nlet compile = {\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tactionExpression: function( x ) {\r\n\t\t\r\n\t\t// x is an expression written as a string\r\n\t\tif ( typeof x === \"string\"\r\n\t\t&&   x.charCodeAt( 0 ) === 64 ) {\r\n\t\t\t\r\n\t\t\tlet n,\r\n\t\t\t\tstring = \"\",\r\n\t\t\t\tsIndex = -1,\r\n\t\t\t\tnewArr = [];\r\n\t\t\t\t\r\n\t\t\tfor ( n = 1; n < x.length; n++ ) {\r\n\t\t\t\t\r\n\t\t\t\tlet c = x.charAt( n );\r\n\t\t\t\tswitch ( c ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase ( \"'\" ):\r\n\t\t\t\t\t\tif ( sIndex === -1 ) {\r\n\t\t\t\t\t\t\tsIndex = n + 1\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewArr.push( \"'\" + x.slice( sIndex, n ) + \"'\" );\r\n\t\t\t\t\t\t\tsIndex = -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif ( sIndex === -1 && c !== \" \" ) {\r\n\t\t\t\t\t\t\tif ( c === \"+\" || c === \"-\" || c === \"=\" ) {\r\n\t\t\t\t\t\t\t\tif ( string !== \"\" ) {\r\n\t\t\t\t\t\t\t\t\tnewArr.push( string );\r\n\t\t\t\t\t\t\t\t\tstring = \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewArr.push( c );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstring += c;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( string !== \"\" ) {\r\n\t\t\t\tnewArr.push( string );\r\n\t\t\t\tstring = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet y = \"\";\r\n\t\t\t\r\n\t\t\tnewArr.forEach( word => {\r\n\t\t\t\tlet num = parseInt( word );\r\n\t\t\t\tif ( isNaN( num ) ) {\r\n\t\t\t\t\tlet c = word.charAt( 0 );\r\n\t\t\t\t\tif ( c === \"'\" ) {\r\n\t\t\t\t\t\ty += word;\r\n\t\t\t\t\t} else if ( c === \"+\" ) {\r\n\t\t\t\t\t\ty += word;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ( word === \"fps\" )\r\n\t\t\t\t\t\t\ty += global.fps;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif ( this[word] !== undefined ) {\r\n\t\t\t\t\t\t\t\ty += \"this.\" + word;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ty += word;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty += word;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\t\r\n\t\t\treturn eval( y );\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn x;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//\r\nexport default compile;\n\n\n// WEBPACK FOOTER //\n// ./js/compile.js","/**\r\n * @module actions\r\n */\r\n\r\nimport room from \"./room.js\";\r\nimport sound from \"./sound.js\";\r\nimport draw from \"./draw.js\";\r\nimport instance from \"./instance.js\";\r\nimport input from \"./input.js\";\r\nimport math from \"./math.js\";\r\nimport sprite from \"./sprite.js\";\r\nimport canvas from \"./canvas.js\";\r\nimport color from \"./color.js\";\r\nimport main from \"./main.js\";\r\nimport camera from \"./camera.js\";\r\nimport app from \"./app.js\";\r\nimport data from \"./data.js\";\r\nimport Tilemap from \"./tilemap.js\";\r\nimport tween from \"./tween.js\";\r\n \r\n/**\r\n * @param {string} varName\r\n * @param {value} value\r\n */\r\nfunction actionSet( varName, value, relative ) {\r\n\t( relative )\r\n\t\t? this[varName] += value\r\n\t\t: this[varName] = value;\r\n}\r\n\r\n/**\r\n * @param {string} varName\r\n * @param {string} op Operation.\r\n * @param {value} value Value to check against.\r\n */\r\nfunction actionTest( varName, op, value ) {\r\n\tswitch ( op ) {\r\n\t\tcase( \"==\" ): return this[varName] == value;\r\n\t\tcase( \"<\" ):  return this[varName] <  value;\r\n\t\tcase( \">\" ):  return this[varName] >  value;\r\n\t\tcase( \"<=\" ): return this[varName] <= value;\r\n\t\tcase( \">=\" ): return this[varName] >= value;\r\n\t\tdefault: return false;\r\n\t}\r\n}\r\n\r\n/**\r\n * Sets the instance's gravity to the given value.\r\n * @param {number} value The gravity strength.\r\n */\r\nfunction actionSetGravity( value ) {\r\n\tthis.gravity = value;\r\n}\r\n\r\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n * @param {number} x\r\n * @param {number} y\r\n * @param {boolean} relative\r\n */\r\nfunction actionJump( x, y, relative ) {\r\n\t\r\n\tif ( relative ) {\r\n\t\tthis.x += Number( x );\r\n\t\tthis.y += Number( y );\r\n\t} else {\r\n\t\tthis.x = Number( x );\r\n\t\tthis.y = Number( y );\r\n\t}\r\n}\r\n\r\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n */\r\nfunction actionJumpRandom() {\r\n\tlet x1 = 0, y1 = 0, x2 = 640, y2 = 480;\r\n\tthis.x = Math.floor( Math.random() * ( x2 - x1 + 1 ) ) + x1;\r\n\tthis.y = Math.floor( Math.random() * ( y2 - y1 + 1 ) ) + y1;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction moveFree( speed, direction ) {\r\n\tthis.speed = speed;\r\n\tthis.direction = direction;\r\n}\r\n\r\n/**\r\n * Instantly sets the instance's x and y values to a random position within\r\n * the current room.\r\n * @param {number} x\r\n * @param {number} y\r\n */\r\nfunction moveDirect( x, y ) {\r\n\tthis.x += x * main.dt;\r\n\tthis.y += y * main.dt;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nfunction moveSpeedX( speed ) { this.speedX = Number( speed ); }\r\nfunction moveSpeedY( speed ) { this.speedY = Number( speed ); }\r\nfunction moveReverseX() { this.speedX = -this.speedX; }\r\nfunction moveReverseY() { this.speedY = -this.speedY; }\r\n\r\n/**\r\n * Wraps the instance back into the room when it leaves.\r\n */\r\nfunction actionWrap() {\r\n\t\r\n\tlet width = this.boxRight - this.boxLeft,\r\n\t\theight = this.boxBottom - this.boxTop,\r\n\t\tthisRoom = room.current,\r\n\t\troomW = thisRoom.width,\r\n\t\troomH = thisRoom.height;\r\n\t\t\r\n\tif ( this.boxRight  < 0 )     this.x += roomW + width;\r\n\tif ( this.boxBottom < 0 )     this.y += roomH + height;\r\n\tif ( this.boxLeft   > roomW ) this.x -= roomW + width;\r\n\tif ( this.boxTop    > roomH ) this.y -= roomH + height;\r\n\t\r\n}\r\n\r\n/**\r\n * Wraps the instance back into the room when it leaves.\r\n */\r\nfunction actionConfine() {\r\n\t\r\n\tlet width = this.boxRight - this.boxLeft,\r\n\t\theight = this.boxBottom - this.boxTop,\r\n\t\tthisRoom = room.current,\r\n\t\troomW = thisRoom.width,\r\n\t\troomH = thisRoom.height;\r\n\t\t\r\n\tif ( this.boxLeft   < 0 )     this.x = 0;\r\n\tif ( this.boxTop    < 0 )     this.y = 0;\r\n\tif ( this.boxRight  > roomW ) this.x = roomW - width;\r\n\tif ( this.boxBottom > roomH ) this.y = roomH - height;\r\n\t\r\n}\r\n\r\n/**\r\n * Executes the given function with variable arguments on the instance.\r\n * @param {function} func\r\n * @param {...*} args\r\n */\r\nfunction actionFunc( func, ...args ) {\r\n\tfunc.apply( this, args );\r\n}\r\n\r\n/**\r\n * Executes the given function with variable arguments on the instance.\r\n * @param {string} code\r\n */\r\nfunction runCode( code ) {\r\n\t\r\n\tif ( typeof code === \"string\" ) {\r\n\t\ttry {\r\n\t\t\teval( code );\r\n\t\t}\r\n\t\tcatch( err ) {\r\n\t\t\tconsole.error( err.message );\r\n\t\t}\r\n\t}\r\n\t\r\n\telse {\r\n\t\tconsole.error( \"runCode( code ); code must be a string!\" );\r\n\t}\r\n\t\r\n}\r\n\r\n/**\r\n * Shows the value of the given variable of the instance, in the console.\r\n * @param {...*} args\r\n */\r\nfunction actionGet( ...args ) {\r\n\tconsole.log( this[args].toFixed( 2 ) );\r\n}\r\n\r\n// Fucntions for use in code.\r\nlet GAME = {\r\n\tmain: {\r\n\t\tsetGameSpeed: main.setGameSpeed\r\n\t},\r\n\tinstance: {\r\n\t\tcreate: instance.create,\r\n\t\tcreateMoving: instance.createMoving,\r\n\t\tdestroy: instance.destroy,\r\n\t\tfind: instance.find,\r\n\t\tfindRandom: instance.findRandom,\r\n\t\tcount: instance.count,\r\n\t\tmouseOn: instance.mouseOn\r\n\t},\r\n\tdraw: Object.assign( draw, {\r\n\t\tself: instance.drawSelf,\r\n\t\tdebug: instance.drawDebug\r\n\t} ),\r\n\tcanvas: {\r\n\t\tgetMain: canvas.getMain,\r\n\t\tcreate: canvas.create\r\n\t},\r\n\tcolor: color,\r\n\tsprite: {\r\n\t\tcreate: sprite.create,\r\n\t\taddFrame: sprite.addFrame,\r\n\t\ttint: sprite.tint,\r\n\t\tget: sprite.get,\r\n\t\tcache: sprite.cache\r\n\t},\r\n\tsound: {\r\n\t\tplay: sound.play,\r\n\t\tstop: sound.stop,\r\n\t\tget: sound.get\r\n\t},\r\n\troom: room,\r\n\tinput: {\r\n\t\tkeyboard: input.keyboard,\r\n\t\tmouse: input.mouse,\r\n\t\ttouch: input.touch\r\n\t},\r\n\tmath: math,\r\n\tcamera: camera,\r\n\tapp: app,\r\n\tdata: data,\r\n\tTilemap: Tilemap,\r\n\ttween: tween\r\n}\r\n\r\n//\r\nlet blockBegin            = \"blockBegin\",\r\n\tblockEnd        \t  = \"blockEnd\",\r\n\texitEvent        \t  = \"exitEvent\",\r\n\tinstanceCreate    \t  = instance.create,\r\n\tinstanceCreateMoving  = instance.createMoving,\r\n\tinstanceDestroy       = instance.destroy,\r\n\tchangeSprite  \t\t  = instance.changeSprite,\r\n\tinstanceSetRotation   = instance.setRotation,\r\n\tinstanceSetDirection  = instance.setDirection,\r\n\tmessage               = console.log,\r\n\talert                 = function( m ) { window.alert( m ) },\r\n\tconfirm               = function( m ) { return window.confirm( m ) },\r\n\tdrawSetColor          = draw.setColor,\r\n\tdrawSetFont           = draw.setFont,\r\n\tdrawSetFontSize       = draw.setFontSize,\r\n\tdrawText              = draw.text,\r\n\tdrawSelf              = instance.drawSelf,\r\n\tdrawSprite            = draw.sprite,\r\n\tsoundPlay = function( snd, loop ) { sound.play( snd, { loop: loop } ) };\r\n\r\n//\r\nexport {\r\n\tinstanceCreate,\r\n\tinstanceCreateMoving,\r\n\tinstanceDestroy,\r\n\tinstanceSetRotation,\r\n\tinstanceSetDirection,\r\n\tchangeSprite,\r\n\tchangeSprite as instanceChangeSprite,\r\n\tsoundPlay,\r\n\tdrawSetColor,\r\n\tdrawSetFont,\r\n\tdrawSetFontSize,\r\n\tdrawText,\r\n\tdrawSelf,\r\n\tdrawSelf as instanceDrawSelf,\r\n\tdrawSprite,\r\n\tblockBegin,\r\n\tblockEnd,\r\n\texitEvent,\r\n\tactionSet        as set,\r\n\tactionGet        as get,\r\n\tactionTest       as test,\r\n\tactionTest,\r\n\tactionSetGravity as setGravity,\r\n\tactionJump       as jump,\r\n\tactionJumpRandom as jumpRandom,\r\n\tmoveFree,\r\n\tmoveDirect,\r\n\tmoveSpeedX,\r\n\tmoveSpeedY,\r\n\tmoveReverseX,\r\n\tmoveReverseY,\r\n\tactionWrap,\r\n\tactionConfine,\r\n\tactionWrap       as wrap,\r\n\tactionConfine    as confine,\r\n\tactionFunc       as func,\t// DEPRECATE?\r\n\trunCode          as code,\r\n\tmessage,\r\n\talert,\r\n\tconfirm,\r\n\tGAME\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/action.js","/**\r\n * @module app\r\n */\r\n \r\n//\r\nimport canvas from \"./canvas.js\";\r\n \r\n//\r\nlet app = {\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tsetCursor: function( cursor ) {\r\n\t\tcanvas.main.style.cursor = cursor;\r\n\t}\r\n\t\r\n}\r\n\r\n//\r\nexport default app;\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","/**\r\n * @module data\r\n */\r\n \r\n//\r\nimport generator from \"./generator.js\";\r\nimport Grid from \"./data/dataGrid.js\";\r\n\r\n//\r\nlet data = {\r\n\t\r\n\t//\r\n\tGrid: Grid,\r\n\tgrid: {\r\n\t\tcreate: generator.functionFromConstructor( Grid ),\r\n\t\tget: generator.functionFromMethod( Grid.prototype.get ),\r\n\t\tset: generator.functionFromMethod( Grid.prototype.set ),\r\n\t\tdestroy: generator.functionFromMethod( Grid.prototype.destroy )\r\n\t}\r\n\r\n}\r\n\r\n//\r\nexport default data;\n\n\n// WEBPACK FOOTER //\n// ./js/data.js","/**\r\n * @module Tilemap\r\n */\r\n\r\n//\r\nimport generator from \"./generator.js\";\r\nimport Grid from \"./data/dataGrid.js\";\r\nimport draw from \"./draw.js\";\r\nimport sprite from \"./sprite.js\";\r\n\r\n/**\r\n *\r\n */\r\nfunction Tilemap( options = {} ) {\r\n\t\r\n\t//\r\n\tthis.textureAtlas = options.atlas || null;\r\n\tthis.tileWidth = options.tileWidth || 16;\r\n\tthis.tileHeight = options.tileHeight || 16;\r\n\tthis.tileSpacing = options.tileSpacing || 0;\r\n\tthis.tileOverlay = options.tileOverlay || 0;\r\n\tthis.tilesWide = options.tilesWide || 16;\r\n\tthis.mapWidth = options.mapWidth || 16;\r\n\tthis.mapHeight = options.mapHeight || 16;\r\n\tthis.layers = {};\r\n\t\r\n}\r\n\r\n/**\r\n *\r\n */\r\nTilemap.prototype.set = function( layer, x, y, index ) {\r\n\r\n\tif ( !this.layers[layer] ) {\r\n\t\tthis.layers[layer] = new Grid( this.mapWidth, this.mapHeight );\r\n\t}\r\n\t\r\n\tthis.layers[layer].set( x, y, index );\r\n\r\n}\r\n\r\n//\r\nTilemap.prototype.draw = function( options ) {\r\n\r\n\t// cache\r\n\tlet atlas = sprite.get( this.textureAtlas ).images[0].img;\r\n\tlet gap = this.tileSpacing + this.tileOverlay;\r\n\t\r\n\t//\r\n\tlet startX, startY, endX, endY, order;\r\n\tif ( options ) {\r\n\t\torder = options.order;\r\n\t\tstartX = Math.floor(Math.max( 0, options.left / this.tileWidth ));\r\n\t\tstartY = Math.floor(Math.max( 0, options.top / this.tileHeight ));\r\n\t\tendX = Math.ceil(Math.min( this.mapWidth, options.right / this.tileWidth ));\r\n\t\tendY = Math.ceil(Math.min( this.mapHeight, options.bottom / this.tileHeight ));\r\n\t} else {\r\n\t\torder = Object.keys( this.layers );\r\n\t\tstartX = 0;\r\n\t\tstartY = 0;\r\n\t\tendX = this.mapWidth;\r\n\t\tendY = this.mapHeight;\r\n\t}\r\n\t\r\n\tlet name, x, y, n;\r\n\tfor ( n=0; n<order.length; n++ ) {\r\n\t\tfor ( x=startX; x<endX; x++ ) {\r\n\t\t\tfor ( y=startY; y<endY; y++ ) {\r\n\t\t\t\t\r\n\t\t\t\tvar tile = this.layers[order[n]].get( x, y );\r\n\t\t\t\tif ( tile > 0 ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet iX = ( tile - 1 ) % this.tilesWide;\r\n\t\t\t\t\tlet iY = Math.floor( ( tile - 1 ) / this.tilesWide );\r\n\t\t\t\t\tiX = iX * (this.tileWidth + gap*2) + gap;\r\n\t\t\t\t\tiY = iY * (this.tileHeight + gap*2) + gap;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdraw.context.drawImage(\r\n\t\t\t\t\t\tatlas,\r\n\t\t\t\t\t\tiX - this.tileOverlay, iY - this.tileOverlay,\r\n\t\t\t\t\t\tthis.tileWidth + this.tileOverlay * 2, // source width\r\n\t\t\t\t\t\tthis.tileHeight + this.tileOverlay * 2, // source height\r\n\t\t\t\t\t\tx * this.tileWidth - this.tileOverlay, // target x\r\n\t\t\t\t\t\ty * this.tileHeight - this.tileOverlay, // target y\r\n\t\t\t\t\t\tthis.tileWidth + this.tileOverlay * 2, // target width\r\n\t\t\t\t\t\tthis.tileHeight + this.tileOverlay * 2 // target height\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n//\r\nTilemap.create = generator.functionFromConstructor( Tilemap );\r\n\r\n//\r\nexport default Tilemap;\n\n\n// WEBPACK FOOTER //\n// ./js/tilemap.js"],"sourceRoot":""}